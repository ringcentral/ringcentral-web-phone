(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.STATUS_EARLY=1]="STATUS_EARLY",e[e.STATUS_CONFIRMED=2]="STATUS_CONFIRMED"}(t.DialogStatus||(t.DialogStatus={})),function(e){e[e.STATUS_NULL=0]="STATUS_NULL",e[e.STATUS_INVITE_SENT=1]="STATUS_INVITE_SENT",e[e.STATUS_1XX_RECEIVED=2]="STATUS_1XX_RECEIVED",e[e.STATUS_INVITE_RECEIVED=3]="STATUS_INVITE_RECEIVED",e[e.STATUS_WAITING_FOR_ANSWER=4]="STATUS_WAITING_FOR_ANSWER",e[e.STATUS_ANSWERED=5]="STATUS_ANSWERED",e[e.STATUS_WAITING_FOR_PRACK=6]="STATUS_WAITING_FOR_PRACK",e[e.STATUS_WAITING_FOR_ACK=7]="STATUS_WAITING_FOR_ACK",e[e.STATUS_CANCELED=8]="STATUS_CANCELED",e[e.STATUS_TERMINATED=9]="STATUS_TERMINATED",e[e.STATUS_ANSWERED_WAITING_FOR_PRACK=10]="STATUS_ANSWERED_WAITING_FOR_PRACK",e[e.STATUS_EARLY_MEDIA=11]="STATUS_EARLY_MEDIA",e[e.STATUS_CONFIRMED=12]="STATUS_CONFIRMED"}(t.SessionStatus||(t.SessionStatus={})),function(e){e[e.STATUS_TRYING=1]="STATUS_TRYING",e[e.STATUS_PROCEEDING=2]="STATUS_PROCEEDING",e[e.STATUS_CALLING=3]="STATUS_CALLING",e[e.STATUS_ACCEPTED=4]="STATUS_ACCEPTED",e[e.STATUS_COMPLETED=5]="STATUS_COMPLETED",e[e.STATUS_TERMINATED=6]="STATUS_TERMINATED",e[e.STATUS_CONFIRMED=7]="STATUS_CONFIRMED"}(t.TransactionStatus||(t.TransactionStatus={})),function(e){e[e.AckClientTransaction=0]="AckClientTransaction",e[e.ClientContext=1]="ClientContext",e[e.ConfigurationError=2]="ConfigurationError",e[e.Dialog=3]="Dialog",e[e.DigestAuthentication=4]="DigestAuthentication",e[e.DTMF=5]="DTMF",e[e.IncomingMessage=6]="IncomingMessage",e[e.IncomingRequest=7]="IncomingRequest",e[e.IncomingResponse=8]="IncomingResponse",e[e.InvalidStateError=9]="InvalidStateError",e[e.InviteClientContext=10]="InviteClientContext",e[e.InviteClientTransaction=11]="InviteClientTransaction",e[e.InviteServerContext=12]="InviteServerContext",e[e.InviteServerTransaction=13]="InviteServerTransaction",e[e.Logger=14]="Logger",e[e.LoggerFactory=15]="LoggerFactory",e[e.MethodParameterError=16]="MethodParameterError",e[e.NameAddrHeader=17]="NameAddrHeader",e[e.NonInviteClientTransaction=18]="NonInviteClientTransaction",e[e.NonInviteServerTransaction=19]="NonInviteServerTransaction",e[e.NotSupportedError=20]="NotSupportedError",e[e.OutgoingRequest=21]="OutgoingRequest",e[e.Parameters=22]="Parameters",e[e.PublishContext=23]="PublishContext",e[e.ReferClientContext=24]="ReferClientContext",e[e.ReferServerContext=25]="ReferServerContext",e[e.RegisterContext=26]="RegisterContext",e[e.RenegotiationError=27]="RenegotiationError",e[e.RequestSender=28]="RequestSender",e[e.ServerContext=29]="ServerContext",e[e.Session=30]="Session",e[e.SessionDescriptionHandler=31]="SessionDescriptionHandler",e[e.SessionDescriptionHandlerError=32]="SessionDescriptionHandlerError",e[e.SessionDescriptionHandlerObserver=33]="SessionDescriptionHandlerObserver",e[e.Subscription=34]="Subscription",e[e.Transport=35]="Transport",e[e.TransportError=36]="TransportError",e[e.UA=37]="UA",e[e.URI=38]="URI"}(t.TypeStrings||(t.TypeStrings={})),function(e){e[e.STATUS_INIT=0]="STATUS_INIT",e[e.STATUS_STARTING=1]="STATUS_STARTING",e[e.STATUS_READY=2]="STATUS_READY",e[e.STATUS_USER_CLOSED=3]="STATUS_USER_CLOSED",e[e.STATUS_NOT_READY=4]="STATUS_NOT_READY"}(t.UAStatus||(t.UAStatus={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);!function(e){e.USER_AGENT=n.title+"/"+n.version,e.SIP="sip",e.SIPS="sips",function(e){e.CONNECTION_ERROR="Connection Error",e.INTERNAL_ERROR="Internal Error",e.REQUEST_TIMEOUT="Request Timeout",e.SIP_FAILURE_CODE="SIP Failure Code",e.ADDRESS_INCOMPLETE="Address Incomplete",e.AUTHENTICATION_ERROR="Authentication Error",e.BUSY="Busy",e.DIALOG_ERROR="Dialog Error",e.INCOMPATIBLE_SDP="Incompatible SDP",e.NOT_FOUND="Not Found",e.REDIRECTED="Redirected",e.REJECTED="Rejected",e.UNAVAILABLE="Unavailable",e.BAD_MEDIA_DESCRIPTION="Bad Media Description",e.CANCELED="Canceled",e.EXPIRES="Expires",e.NO_ACK="No ACK",e.NO_ANSWER="No Answer",e.NO_PRACK="No PRACK",e.RTP_TIMEOUT="RTP Timeout",e.USER_DENIED_MEDIA_ACCESS="User Denied Media Access",e.WEBRTC_ERROR="WebRTC Error",e.WEBRTC_NOT_SUPPORTED="WebRTC Not Supported"}(e.causes||(e.causes={})),function(e){e.REQUIRED="required",e.SUPPORTED="supported",e.UNSUPPORTED="none"}(e.supported||(e.supported={})),e.SIP_ERROR_CAUSES={ADDRESS_INCOMPLETE:[484],AUTHENTICATION_ERROR:[401,407],BUSY:[486,600],INCOMPATIBLE_SDP:[488,606],NOT_FOUND:[404,604],REDIRECTED:[300,301,302,305,380],REJECTED:[403,603],UNAVAILABLE:[480,410,408,430]},e.ACK="ACK",e.BYE="BYE",e.CANCEL="CANCEL",e.INFO="INFO",e.INVITE="INVITE",e.MESSAGE="MESSAGE",e.NOTIFY="NOTIFY",e.OPTIONS="OPTIONS",e.REGISTER="REGISTER",e.UPDATE="UPDATE",e.SUBSCRIBE="SUBSCRIBE",e.PUBLISH="PUBLISH",e.REFER="REFER",e.PRACK="PRACK",e.REASON_PHRASE={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},e.OPTION_TAGS={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0},function(e){e.INFO="info",e.RTP="rtp"}(e.dtmfType||(e.dtmfType={}))}(t.C||(t.C={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),s=r(4);!function(e){e.defer=function(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e},e.reducePromises=function(e,t){return e.reduce(function(e,t){return e=e.then(t)},Promise.resolve(t))},e.str_utf8_length=function(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length},e.generateFakeSDP=function(e){if(e){var t=e.indexOf("o="),r=e.indexOf("\r\n",t);return"v=0\r\n"+e.slice(t,r)+"\r\ns=-\r\nt=0 0\r\nc=IN IP4 0.0.0.0"}},e.isDecimal=function(e){var t=parseInt(e,10);return!isNaN(t)&&parseFloat(e)===t},e.createRandomToken=function(e,t){void 0===t&&(t=32);for(var r="",n=0;n<e;n++)r+=Math.floor(Math.random()*t).toString(t);return r},e.newTag=function(){return e.createRandomToken(10)},e.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.floor(16*Math.random());return("x"===e?t:t%4+8).toString(16)})},e.normalizeTarget=function(t,r){if(t){if(t.type===i.TypeStrings.URI)return t;if("string"==typeof t){var o=t.split("@"),a=void 0,u=void 0;switch(o.length){case 1:if(!r)return;a=t,u=r;break;case 2:a=o[0],u=o[1];break;default:a=o.slice(0,o.length-1).join("@"),u=o[o.length-1]}return a=a.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(a)&&(a=a.replace(/[\-\.\(\)]/g,"")),t=n.C.SIP+":"+e.escapeUser(a)+"@"+u,s.Grammar.URIParse(t)}}},e.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},e.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),n=r.length,i="",s=0;s<n;s++)0!==s&&(i+="-"),i+=r[s].charAt(0).toUpperCase()+r[s].substring(1);return t[i]&&(i=t[i]),i},e.sipErrorCause=function(e){for(var t in n.C.SIP_ERROR_CAUSES)if(-1!==n.C.SIP_ERROR_CAUSES[t].indexOf(e))return n.C.causes[t];return n.C.causes.SIP_FAILURE_CODE},e.getReasonPhrase=function(e,t){return t||n.C.REASON_PHRASE[e]||""},e.getReasonHeaderValue=function(t,r){return"SIP;cause="+t+';text="'+(r=e.getReasonPhrase(t,r))+'"'},e.getCancelReason=function(t,r){if(t&&t<200||t>699)throw new TypeError("Invalid statusCode: "+t);if(t)return e.getReasonHeaderValue(t,r)},e.buildStatusLine=function(t,r){if(!t||t<100||t>699)throw new TypeError("Invalid statusCode: "+t);if(r&&"string"!=typeof r&&!(r instanceof String))throw new TypeError("Invalid reason: "+r);return"SIP/2.0 "+t+" "+(r=e.getReasonPhrase(t,r))+"\r\n"}}(t.Utils||(t.Utils={}))},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,s,o,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,a=u,console&&console.warn&&console.warn(a)}return e}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,e))}.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)s(u,this,t);else{var c=u.length,h=f(u,c);for(r=0;r<c;++r)s(h[r],this,t)}return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,i,s,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(39);!function(e){e.parse=function(e,t){var r={startRule:t};try{n.parse(e,r)}catch(e){r.data=-1}return r.data},e.nameAddrHeaderParse=function(t){var r=e.parse(t,"Name_Addr_Header");return-1!==r?r:void 0},e.URIParse=function(t){var r=e.parse(t,"SIP_URI");return-1!==r?r:void 0}}(t.Grammar||(t.Grammar={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),o=function(e){function t(t,r,n){var i=e.call(this,n)||this;return i.code=t,i.name=r,i.message=n,i}return i(t,e),t}(Error);!function(e){var t=function(e){function t(t,r){var n=e.call(this,1,"CONFIGURATION_ERROR",r?"Invalid value "+JSON.stringify(r)+" for parameter '"+t+"'":"Missing parameter: "+t)||this;return n.type=s.TypeStrings.ConfigurationError,n.parameter=t,n.value=r,n}return i(t,e),t}(o);e.ConfigurationError=t;var r=function(e){function t(t){var r=e.call(this,2,"INVALID_STATE_ERROR","Invalid status: "+t)||this;return r.type=s.TypeStrings.InvalidStateError,r.status=t,r}return i(t,e),t}(o);e.InvalidStateError=r;var n=function(e){function t(t){var r=e.call(this,3,"NOT_SUPPORTED_ERROR",t)||this;return r.type=s.TypeStrings.NotSupportedError,r}return i(t,e),t}(o);e.NotSupportedError=n;var a=function(e){function t(t){var r=e.call(this,5,"RENEGOTIATION_ERROR",t)||this;return r.type=s.TypeStrings.RenegotiationError,r}return i(t,e),t}(o);e.RenegotiationError=a;var u=function(e){function t(t,r,n){var i=e.call(this,6,"METHOD_PARAMETER_ERROR",n?"Invalid value "+JSON.stringify(n)+" for parameter '"+r+"'":"Missing parameter: "+r)||this;return i.type=s.TypeStrings.MethodParameterError,i.method=t,i.parameter=r,i.value=n,i}return i(t,e),t}(o);e.MethodParameterError=u;var c=function(e){function t(t){var r=e.call(this,7,"TRANSPORT_ERROR",t)||this;return r.type=s.TypeStrings.TransportError,r}return i(t,e),t}(o);e.TransportError=c;var h=function(e){function t(t,r,n){var i=e.call(this,8,"SESSION_DESCRIPTION_HANDLER_ERROR",n||"Error with Session Description Handler")||this;return i.type=s.TypeStrings.SessionDescriptionHandlerError,i.method=t,i.error=r,i}return i(t,e),t}(o);e.SessionDescriptionHandlerError=h}(t.Exceptions||(t.Exceptions={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),o=r(0),a=r(4),u=r(2),c=function(e){var t=[];e.method===s.C.REGISTER?t.push("path","gruu"):e.method===s.C.INVITE&&(e.ua.contact.pubGruu||e.ua.contact.tempGruu)&&t.push("gruu"),e.ua.configuration.rel100===s.C.supported.SUPPORTED&&t.push("100rel"),e.ua.configuration.replaces===s.C.supported.SUPPORTED&&t.push("replaces"),t.push("outbound"),t=t.concat(e.ua.configuration.extraSupported||[]);var r=e.ua.configuration.hackAllowUnregisteredOptionTags||!1,n={};return"Supported: "+(t=t.filter(function(e){var t=s.C.OPTION_TAGS[e],i=!n[e];return n[e]=!0,(t||r)&&i})).join(", ")+"\r\n"},h=function(){function e(e,t,r,n,i,s){void 0===n&&(n={}),this.type=o.TypeStrings.OutgoingRequest,this.logger=r.getLogger("sip.sipmessage"),this.ua=r,this.headers={},this.method=e,this.ruri=t,this.body=s,this.extraHeaders=(i||[]).slice(),this.statusCode=n.statusCode,this.reasonPhrase=n.reasonPhrase,n.routeSet?this.setHeader("route",n.routeSet):r.configuration.usePreloadedRoute&&r.transport&&this.setHeader("route",r.transport.server.sipUri),this.setHeader("via",""),this.setHeader("max-forwards","70");var c=n.toUri||t,h=n.toDisplayName||0===n.toDisplayName?'"'+n.toDisplayName+'" ':"";h+="<"+(c.type===o.TypeStrings.URI?c.toRaw():c)+">",h+=n.toTag?";tag="+n.toTag:"",this.to=a.Grammar.nameAddrHeaderParse(h),this.setHeader("to",h);var l,p=n.fromUri||r.configuration.uri||"";l=n.fromDisplayName||0===n.fromDisplayName?'"'+n.fromDisplayName+'" ':r.configuration.displayName?'"'+r.configuration.displayName+'" ':"",l+="<"+(p.type===o.TypeStrings.URI?p.toRaw():p)+">;tag=",l+=n.fromTag||u.Utils.newTag(),this.from=a.Grammar.nameAddrHeaderParse(l),this.setHeader("from",l),this.callId=n.callId||r.configuration.sipjsId+u.Utils.createRandomToken(15),this.setHeader("call-id",this.callId),this.cseq=n.cseq||Math.floor(1e4*Math.random()),this.setHeader("cseq",this.cseq+" "+e)}return e.prototype.setHeader=function(e,t){this.headers[u.Utils.headerize(e)]=t instanceof Array?t:[t]},e.prototype.getHeader=function(e){var t=this.headers[u.Utils.headerize(e)];if(t){if(t[0])return t[0]}else for(var r=new RegExp("^\\s*"+e+"\\s*:","i"),n=0,i=this.extraHeaders;n<i.length;n++){var s=i[n];if(r.test(s))return s.substring(s.indexOf(":")+1).trim()}},e.prototype.cancel=function(e,t){},e.prototype.getHeaders=function(e){var t=[],r=this.headers[u.Utils.headerize(e)];if(r)for(var n=0,i=r;n<i.length;n++){var s=i[n];t.push(s)}else for(var o=new RegExp("^\\s*"+e+"\\s*:","i"),a=0,c=this.extraHeaders;a<c.length;a++){var h=c[a];o.test(h)&&t.push(h.substring(h.indexOf(":")+1).trim())}return t},e.prototype.hasHeader=function(e){if(this.headers[u.Utils.headerize(e)])return!0;for(var t=new RegExp("^\\s*"+e+"\\s*:","i"),r=0,n=this.extraHeaders;r<n.length;r++){var i=n[r];if(t.test(i))return!0}return!1},e.prototype.toString=function(){var e="";for(var t in e+=this.method+" "+(this.ruri.type===o.TypeStrings.URI?this.ruri.toRaw():this.ruri)+" SIP/2.0\r\n",this.headers)if(this.headers[t])for(var r=0,n=this.headers[t];r<n.length;r++){e+=t+": "+n[r]+"\r\n"}for(var i=0,s=this.extraHeaders;i<s.length;i++){e+=(t=s[i]).trim()+"\r\n"}return e+=c(this),e+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",this.body?"string"==typeof this.body?(e+="Content-Length: "+u.Utils.str_utf8_length(this.body)+"\r\n\r\n",e+=this.body):this.body.body&&this.body.contentType?(e+="Content-Type: "+this.body.contentType+"\r\n",e+="Content-Length: "+u.Utils.str_utf8_length(this.body.body)+"\r\n\r\n",e+=this.body.body):e+="Content-Length: 0\r\n\r\n":e+="Content-Length: 0\r\n\r\n",e},e}();t.OutgoingRequest=h;var l=function(){function e(){this.type=o.TypeStrings.IncomingMessage,this.headers={}}return e.prototype.addHeader=function(e,t){var r={raw:t};e=u.Utils.headerize(e),this.headers[e]?this.headers[e].push(r):this.headers[e]=[r]},e.prototype.getHeader=function(e){var t=this.headers[u.Utils.headerize(e)];if(t)return t[0]?t[0].raw:void 0},e.prototype.getHeaders=function(e){var t=this.headers[u.Utils.headerize(e)],r=[];if(!t)return[];for(var n=0,i=t;n<i.length;n++){var s=i[n];r.push(s.raw)}return r},e.prototype.hasHeader=function(e){return!!this.headers[u.Utils.headerize(e)]},e.prototype.parseHeader=function(e,t){if(void 0===t&&(t=0),e=u.Utils.headerize(e),this.headers[e]&&!(t>=this.headers[e].length)){var r=this.headers[e][t],n=r.raw;if(r.parsed)return r.parsed;var i=a.Grammar.parse(n,e.replace(/-/g,"_"));return-1===i?void this.headers[e].splice(t,1):(r.parsed=i,i)}},e.prototype.s=function(e,t){return void 0===t&&(t=0),this.parseHeader(e,t)},e.prototype.setHeader=function(e,t){this.headers[u.Utils.headerize(e)]=[{raw:t}]},e.prototype.toString=function(){return this.data},e}(),p=function(e){function t(t){var r=e.call(this)||this;return r.type=o.TypeStrings.IncomingRequest,r.logger=t.getLogger("sip.sipmessage"),r.ua=t,r}return i(t,e),t.prototype.reply=function(e,t,r,n,i,o){var a=u.Utils.buildStatusLine(e,t);if(r=(r||[]).slice(),this.method===s.C.INVITE&&e>100&&e<=200)for(var h=0,l=this.getHeaders("record-route");h<l.length;h++){a+="Record-Route: "+l[h]+"\r\n"}for(var p=0,d=this.getHeaders("via");p<d.length;p++){a+="Via: "+d[p]+"\r\n"}var f=this.getHeader("to")||"";!this.toTag&&e>100?f+=";tag="+u.Utils.newTag():this.toTag&&!this.s("to").hasParam("tag")&&(f+=";tag="+this.toTag),a+="To: "+f+"\r\n",a+="From: "+this.getHeader("From")+"\r\n",a+="Call-ID: "+this.callId+"\r\n",a+="CSeq: "+this.cseq+" "+this.method+"\r\n";for(var g=0,v=r;g<v.length;g++){a+=v[g].trim()+"\r\n"}return a+=c(this),a+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",n?"string"==typeof n?(a+="Content-Type: application/sdp\r\n",a+="Content-Length: "+u.Utils.str_utf8_length(n)+"\r\n\r\n",a+=n):n.body&&n.contentType?(a+="Content-Type: "+n.contentType+"\r\n",a+="Content-Length: "+u.Utils.str_utf8_length(n.body)+"\r\n\r\n",a+=n.body):a+="Content-Length: 0\r\n\r\n":a+="Content-Length: 0\r\n\r\n",this.serverTransaction&&this.serverTransaction.receiveResponse(e,a).then(i,o),a},t.prototype.reply_sl=function(e,t){for(var r=u.Utils.buildStatusLine(e,t),n=0,i=this.getHeaders("via");n<i.length;n++){r+="Via: "+i[n]+"\r\n"}var s=this.getHeader("To")||"";!this.toTag&&e>100?s+=";tag="+u.Utils.newTag():this.toTag&&!this.s("to").hasParam("tag")&&(s+=";tag="+this.toTag),r+="To: "+s+"\r\n",r+="From: "+this.getHeader("From")+"\r\n",r+="Call-ID: "+this.callId+"\r\n",r+="CSeq: "+this.cseq+" "+this.method+"\r\n",r+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",r+="Content-Length: 0\r\n\r\n",this.transport&&this.transport.send(r)},t}(l);t.IncomingRequest=p;var d=function(e){function t(t){var r=e.call(this)||this;return r.type=o.TypeStrings.IncomingResponse,r.logger=t.getLogger("sip.sipmessage"),r.headers={},r}return i(t,e),t}(l);t.IncomingResponse=d},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(1),a=r(0),u=r(9),c=r(6),h=r(2),l=function(e){function t(r,n,i,s){var o=e.call(this)||this;return o.data={},t.initializer(o,r,n,i,s),o}return i(t,e),t.initializer=function(e,t,r,n,i){if(e.type=a.TypeStrings.ClientContext,void 0===n)throw new TypeError("Not enough arguments");e.ua=t,e.logger=t.getLogger("sip.clientcontext"),e.method=r;var s=t.normalizeTarget(n);if(!s)throw new TypeError("Invalid target: "+n);(i=Object.create(i||Object.prototype)).extraHeaders=(i.extraHeaders||[]).slice(),e.request=new c.OutgoingRequest(e.method,s,e.ua,i.params,i.extraHeaders),i.body&&(e.body={},e.body.body=i.body,i.contentType&&(e.body.contentType=i.contentType),e.request.body=e.body),e.request.from&&(e.localIdentity=e.request.from),e.request.to&&(e.remoteIdentity=e.request.to)},t.prototype.send=function(){return new u.RequestSender(this,this.ua).send(),this},t.prototype.receiveResponse=function(e){var t=e.statusCode||0,r=h.Utils.getReasonPhrase(t);switch(!0){case/^1[0-9]{2}$/.test(t.toString()):this.emit("progress",e,r);break;case/^2[0-9]{2}$/.test(t.toString()):this.ua.applicants[this.toString()]&&delete this.ua.applicants[this.toString()],this.emit("accepted",e,r);break;default:this.ua.applicants[this.toString()]&&delete this.ua.applicants[this.toString()],this.emit("rejected",e,r),this.emit("failed",e,r)}},t.prototype.onRequestTimeout=function(){this.emit("failed",void 0,o.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",void 0,o.C.causes.CONNECTION_ERROR)},t}(s.EventEmitter);t.ClientContext=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),s=r(10),o=function(){function e(e,t){this.type=i.TypeStrings.RequestSender,this.logger=t.getLogger("sip.requestsender"),this.ua=t,this.applicant=e,this.method=e.request.method,this.request=e.request,this.credentials=void 0,this.challenged=!1,this.staled=!1,t.status===i.UAStatus.STATUS_USER_CLOSED&&this.method!==n.C.BYE&&this.method!==n.C.ACK&&this.onTransportError()}return e.prototype.send=function(){if(!this.ua.transport)throw new Error("No transport to make transaction");switch(this.method){case"INVITE":this.clientTransaction=new s.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new s.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new s.NonInviteClientTransaction(this,this.request,this.ua.transport)}return this.clientTransaction.send(),this.clientTransaction},e.prototype.onRequestTimeout=function(){this.applicant.onRequestTimeout()},e.prototype.onTransportError=function(){this.applicant.onTransportError()},e.prototype.receiveResponse=function(e){var t=e&&e.statusCode?e.statusCode:0;if(401===t||407===t){var r=void 0,i=void 0;if(401===t?(r=e.parseHeader("www-authenticate"),i="authorization"):(r=e.parseHeader("proxy-authenticate"),i="proxy-authorization"),!r)return this.logger.warn(t+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(e);if(!this.challenged||!this.staled&&!0===r.stale){if(!this.credentials&&this.ua.configuration.authenticationFactory&&(this.credentials=this.ua.configuration.authenticationFactory(this.ua)),!this.credentials.authenticate(this.request,r))return void this.applicant.receiveResponse(e);this.challenged=!0,r.stale&&(this.staled=!0);var s=void 0;e.method===n.C.REGISTER?s=this.applicant.cseq+=1:this.request.dialog?s=this.request.dialog.localSeqnum+=1:(s=(this.request.cseq||0)+1,this.request.cseq=s),this.request.setHeader("cseq",s+" "+this.method),this.request.setHeader(i,this.credentials.toString()),this.send()}else this.applicant.receiveResponse(e)}else this.applicant.receiveResponse(e)},e}();t.RequestSender=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(1),a=r(0),u=r(6),c=r(12),h={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},l=function(e,t,r){var n="SIP/2.0/"+(e.configuration.hackViaTcp?"TCP":t.server.scheme);return n+=" "+e.configuration.viaHost+";branch="+r,e.configuration.forceRport&&(n+=";rport"),n},p=function(e){function t(t,r,n){var i=e.call(this)||this;i.kind=h.NON_INVITE_CLIENT,i.type=a.TypeStrings.NonInviteClientTransaction,i.transport=n,i.id="z9hG4bK"+Math.floor(1e7*Math.random()),i.requestSender=t,i.request=r,i.logger=t.ua.getLogger("sip.transaction.nict",i.id);var s=l(t.ua,n,i.id);return i.request.setHeader("via",s),i.requestSender.ua.newTransaction(i),i}return i(t,e),t.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},t.prototype.send=function(){var e=this;this.stateChanged(a.TransactionStatus.STATUS_TRYING),this.F=setTimeout(function(){return e.timer_F()},c.Timers.TIMER_F),this.transport.send(this.request).catch(function(){return e.onTransportError()})},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode||0;if(r<200)switch(this.state){case a.TransactionStatus.STATUS_TRYING:case a.TransactionStatus.STATUS_PROCEEDING:this.stateChanged(a.TransactionStatus.STATUS_PROCEEDING),this.requestSender.receiveResponse(e)}else switch(this.state){case a.TransactionStatus.STATUS_TRYING:case a.TransactionStatus.STATUS_PROCEEDING:this.stateChanged(a.TransactionStatus.STATUS_COMPLETED),this.F&&clearTimeout(this.F),408===r?this.requestSender.onRequestTimeout():this.requestSender.receiveResponse(e),this.K=setTimeout(function(){return t.timer_K()},c.Timers.TIMER_K);break;case a.TransactionStatus.STATUS_COMPLETED:}},t.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting non-INVITE client transaction "+this.id),this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this),this.requestSender.onTransportError()},t.prototype.timer_F=function(){this.logger.debug("Timer F expired for non-INVITE client transaction "+this.id),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this),this.requestSender.onRequestTimeout()},t.prototype.timer_K=function(){this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this)},t}(s.EventEmitter);t.NonInviteClientTransaction=p;var d=function(e){function t(t,r,n){var i=e.call(this)||this;i.kind=h.INVITE_CLIENT,i.type=a.TypeStrings.InviteClientTransaction,i.transport=n,i.id="z9hG4bK"+Math.floor(1e7*Math.random()),i.requestSender=t,i.request=r,i.logger=t.ua.getLogger("sip.transaction.ict",i.id);var s=l(t.ua,n,i.id);return i.request.setHeader("via",s),i.requestSender.ua.newTransaction(i),i.request.cancel=function(e,t){for(var r="",n=0,s=t=(t||[]).slice();n<s.length;n++){r+=s[n].trim()+"\r\n"}i.cancelRequest(i,e,r)},i}return i(t,e),t.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},t.prototype.send=function(){var e=this;this.stateChanged(a.TransactionStatus.STATUS_CALLING),this.B=setTimeout(function(){return e.timer_B()},c.Timers.TIMER_B),this.transport.send(this.request).catch(function(){return e.onTransportError()})},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode||0;if(e.transaction=this,this.response&&this.response.statusCode===e.statusCode&&this.response.cseq===e.cseq)return this.logger.debug("ICT Received a retransmission for cseq: "+e.cseq),void(this.ackSender&&this.ackSender.send());if(this.response=e,r>=100&&r<=199)switch(this.state){case a.TransactionStatus.STATUS_CALLING:this.stateChanged(a.TransactionStatus.STATUS_PROCEEDING),this.requestSender.receiveResponse(e),this.cancel&&this.transport.send(this.cancel);break;case a.TransactionStatus.STATUS_PROCEEDING:this.requestSender.receiveResponse(e)}else if(r>=200&&r<=299)switch(this.state){case a.TransactionStatus.STATUS_CALLING:case a.TransactionStatus.STATUS_PROCEEDING:this.stateChanged(a.TransactionStatus.STATUS_ACCEPTED),this.M=setTimeout(function(){return t.timer_M()},c.Timers.TIMER_M),this.requestSender.receiveResponse(e);break;case h.STATUS_ACCEPTED:this.requestSender.receiveResponse(e)}else if(r>=300&&r<=699)switch(this.state){case a.TransactionStatus.STATUS_CALLING:case a.TransactionStatus.STATUS_PROCEEDING:this.stateChanged(a.TransactionStatus.STATUS_COMPLETED),this.sendACK(),this.requestSender.receiveResponse(e);break;case a.TransactionStatus.STATUS_COMPLETED:this.sendACK()}},t.prototype.sendACK=function(e){var t,r=this;if(void 0===e&&(e={}),t=this.response&&this.response.getHeader("contact")?this.response.parseHeader("contact").uri:this.request.ruri,this.response){var n=new u.OutgoingRequest("ACK",t.toString(),this.request.ua,{cseq:this.response.cseq,callId:this.response.callId,fromUri:this.response.from.uri,fromTag:this.response.fromTag,toUri:this.response.to.uri,toTag:this.response.toTag,routeSet:this.response.getHeaders("record-route").reverse()},e.extraHeaders||[],e.body);if(!n.ua.transport)throw new Error("No transport to make transaction");return this.ackSender=new f({onTransportError:this.requestSender.applicant?this.requestSender.applicant.onTransportError.bind(this.requestSender.applicant):function(){r.logger.warn("ACK Request had a transport error")},ua:n.ua},n,n.ua.transport),this.ackSender.send(),n}},t.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting INVITE client transaction "+this.id),this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this),this.state!==a.TransactionStatus.STATUS_ACCEPTED&&this.requestSender.onTransportError()},t.prototype.timer_M=function(){this.logger.debug("Timer M expired for INVITE client transaction "+this.id),this.state===a.TransactionStatus.STATUS_ACCEPTED&&(this.B&&(clearTimeout(this.B),this.B=void 0),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this))},t.prototype.timer_B=function(){this.logger.debug("Timer B expired for INVITE client transaction "+this.id),this.state===a.TransactionStatus.STATUS_CALLING&&(this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this),this.requestSender.onRequestTimeout())},t.prototype.timer_D=function(){this.logger.debug("Timer D expired for INVITE client transaction "+this.id),this.B&&(clearTimeout(this.B),this.B=void 0),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.requestSender.ua.destroyTransaction(this)},t.prototype.cancelRequest=function(e,t,r){var n=e.request;this.cancel=o.C.CANCEL+" "+n.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+n.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+n.headers.Route.toString()+"\r\n"),this.cancel+="To: "+n.headers.To.toString()+"\r\n",this.cancel+="From: "+n.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+n.headers["Call-ID"].toString()+"\r\n",this.cancel+="Max-Forwards: 70\r\n",this.cancel+="CSeq: "+n.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",t&&(this.cancel+="Reason: "+t+"\r\n"),r&&(this.cancel+=r),this.cancel+="Content-Length: 0\r\n\r\n",this.state===a.TransactionStatus.STATUS_PROCEEDING&&this.transport.send(this.cancel)},t}(s.EventEmitter);t.InviteClientTransaction=d;var f=function(e){function t(t,r,n){var i=e.call(this)||this;i.type=a.TypeStrings.AckClientTransaction,i.transport=n,i.id="z9hG4bK"+Math.floor(1e7*Math.random()),i.requestSender=t,i.request=r,i.logger=t.ua.getLogger("sip.transaction.nict",i.id);var s=l(t.ua,n,i.id);return i.request.setHeader("via",s),i}return i(t,e),t.prototype.send=function(){var e=this;this.transport.send(this.request).catch(function(){e.logger.log("transport error occurred, for an ACK client transaction "+e.id),e.requestSender.onTransportError()})},t}(s.EventEmitter);t.AckClientTransaction=f;var g=function(e){function t(t,r){var n=e.call(this)||this;return n.kind=h.NON_INVITE_SERVER,n.type=a.TypeStrings.NonInviteServerTransaction,n.id=t.viaBranch,n.request=t,n.transport=r.transport,n.ua=r,n.lastResponse="",n.transportError=!1,t.serverTransaction=n,n.logger=r.getLogger("sip.transaction.nist",n.id),n.state=a.TransactionStatus.STATUS_TRYING,r.newTransaction(n),n}return i(t,e),t.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},t.prototype.receiveResponse=function(e,t){var r=this;return new Promise(function(n,i){if(100===e)switch(r.state){case a.TransactionStatus.STATUS_TRYING:r.stateChanged(h.STATUS_PROCEEDING),r.transport&&r.transport.send(t).catch(function(){return r.onTransportError()});break;case a.TransactionStatus.STATUS_PROCEEDING:r.lastResponse=t,r.transport&&r.transport.send(t).then(n).catch(function(){r.onTransportError(),i()})}else if(e>=200&&e<=699)switch(r.state){case a.TransactionStatus.STATUS_TRYING:case a.TransactionStatus.STATUS_PROCEEDING:r.stateChanged(h.STATUS_COMPLETED),r.lastResponse=t,r.J=setTimeout(function(){r.logger.debug("Timer J expired for non-INVITE server transaction "+r.id),r.stateChanged(h.STATUS_TERMINATED),r.ua.destroyTransaction(r)},c.Timers.TIMER_J),r.transport&&r.transport.send(t).then(n).catch(function(){r.onTransportError(),i()});break;case a.TransactionStatus.STATUS_COMPLETED:}})},t.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting non-INVITE server transaction "+this.id),this.J&&(clearTimeout(this.J),this.J=void 0),this.stateChanged(h.STATUS_TERMINATED),this.ua.destroyTransaction(this))},t}(s.EventEmitter);t.NonInviteServerTransaction=g;var v=function(e){function t(t,r){var n=e.call(this)||this;return n.kind=h.INVITE_SERVER,n.type=a.TypeStrings.InviteServerTransaction,n.id=t.viaBranch,n.request=t,n.transport=r.transport,n.ua=r,n.lastResponse="",n.transportError=!1,t.serverTransaction=n,n.logger=r.getLogger("sip.transaction.ist",n.id),n.state=a.TransactionStatus.STATUS_PROCEEDING,r.newTransaction(n),t.reply(100),n}return i(t,e),t.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},t.prototype.timer_I=function(){this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.ua.destroyTransaction(this)},t.prototype.receiveResponse=function(e,t){var r=this;return new Promise(function(n,i){if(e>=100&&e<=199&&r.state===a.TransactionStatus.STATUS_PROCEEDING)r.transport&&r.transport.send(t).catch(function(){return r.onTransportError()}),r.lastResponse=t,e>100&&void 0===r.resendProvisionalTimer&&(r.resendProvisionalTimer=setInterval(function(){r.transport&&r.transport.send(t).catch(function(){return r.onTransportError()})},c.Timers.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&e<=299)switch(r.state){case a.TransactionStatus.STATUS_PROCEEDING:r.stateChanged(h.STATUS_ACCEPTED),r.lastResponse=t,r.L=setTimeout(function(){return r.timer_L()},c.Timers.TIMER_L),void 0!==r.resendProvisionalTimer&&(clearInterval(r.resendProvisionalTimer),r.resendProvisionalTimer=void 0);case a.TransactionStatus.STATUS_ACCEPTED:r.transport&&r.transport.send(t).then(n).catch(function(e){r.logger.error(e),r.onTransportError(),i()})}else if(e>=300&&e<=699)switch(r.state){case a.TransactionStatus.STATUS_PROCEEDING:void 0!==r.resendProvisionalTimer&&(clearInterval(r.resendProvisionalTimer),r.resendProvisionalTimer=void 0),r.transport&&r.transport.send(t).then(function(){r.stateChanged(a.TransactionStatus.STATUS_COMPLETED),r.H=setTimeout(function(){return r.timer_H()},c.Timers.TIMER_H),n()}).catch(function(e){r.logger.error(e),r.onTransportError(),i()})}})},t.prototype.timer_H=function(){this.logger.debug("Timer H expired for INVITE server transaction "+this.id),this.state===a.TransactionStatus.STATUS_COMPLETED&&this.logger.warn("transactions: ACK for INVITE server transaction was never received, call will be terminated"),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.ua.destroyTransaction(this)},t.prototype.timer_L=function(){this.logger.debug("Timer L expired for INVITE server transaction "+this.id),this.state===a.TransactionStatus.STATUS_ACCEPTED&&(this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.ua.destroyTransaction(this))},t.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting INVITE server transaction "+this.id),void 0!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.stateChanged(a.TransactionStatus.STATUS_TERMINATED),this.ua.destroyTransaction(this))},t}(s.EventEmitter);t.InviteServerTransaction=v,t.checkTransaction=function(e,t){var r=e.transactions.ist[t.viaBranch];switch(t.method){case o.C.INVITE:if(r){switch(r.state){case a.TransactionStatus.STATUS_PROCEEDING:r.transport&&r.transport.send(r.lastResponse);break;case a.TransactionStatus.STATUS_ACCEPTED:}return!0}break;case o.C.ACK:if(!r)return!1;if(r.state===a.TransactionStatus.STATUS_ACCEPTED)return!1;if(r.state===a.TransactionStatus.STATUS_COMPLETED)return r.stateChanged(a.TransactionStatus.STATUS_CONFIRMED),r.I=setTimeout(r.timer_I.bind(r),c.Timers.TIMER_I),!0;break;case o.C.CANCEL:return r?(t.reply_sl(200),r.state!==a.TransactionStatus.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:var n=e.transactions.nist[t.viaBranch];if(n){switch(n.state){case a.TransactionStatus.STATUS_TRYING:break;case a.TransactionStatus.STATUS_PROCEEDING:case a.TransactionStatus.STATUS_COMPLETED:n.transport&&n.transport.send(n.lastResponse)}return!0}}return!1}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),o=r(0),a=function(){function e(e){for(var t in this.parameters={},this.type=o.TypeStrings.Parameters,e)e.hasOwnProperty(t)&&this.setParam(t,e[t])}return e.prototype.setParam=function(e,t){e&&(this.parameters[e.toLowerCase()]=null==t?null:t.toString())},e.prototype.getParam=function(e){if(e)return this.parameters[e.toLowerCase()]},e.prototype.hasParam=function(e){return!!e&&!!this.parameters.hasOwnProperty(e.toLowerCase())},e.prototype.deleteParam=function(e){if(e=e.toLowerCase(),this.parameters.hasOwnProperty(e)){var t=this.parameters[e];return delete this.parameters[e],t}},e.prototype.clearParams=function(){this.parameters={}},e}();t.Parameters=a;var u=function(e){function t(t,r,n,i,a,u){var c=e.call(this,a)||this;if(c.headers={},c.type=o.TypeStrings.URI,!n)throw new TypeError('missing or invalid "host" parameter');for(var h in t=t||s.C.SIP,u)u.hasOwnProperty(h)&&c.setHeader(h,u[h]);return c.raw={scheme:t,user:r,host:n,port:i},c.normal={scheme:t.toLowerCase(),user:r,host:n.toLowerCase(),port:i},c}return i(t,e),Object.defineProperty(t.prototype,"_normal",{get:function(){return this.normal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_raw",{get:function(){return this.raw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scheme",{get:function(){return this.normal.scheme},set:function(e){this.raw.scheme=e,this.normal.scheme=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this.normal.user},set:function(e){this.normal.user=this.raw.user=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this.normal.host},set:function(e){this.raw.host=e,this.normal.host=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aor",{get:function(){return this.normal.user+"@"+this.normal.host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this.normal.port},set:function(e){this.normal.port=this.raw.port=e},enumerable:!0,configurable:!0}),t.prototype.setHeader=function(e,t){this.headers[this.headerize(e)]=t instanceof Array?t:[t]},t.prototype.getHeader=function(e){if(e)return this.headers[this.headerize(e)]},t.prototype.hasHeader=function(e){return!!e&&!!this.headers.hasOwnProperty(this.headerize(e))},t.prototype.deleteHeader=function(e){if(e=this.headerize(e),this.headers.hasOwnProperty(e)){var t=this.headers[e];return delete this.headers[e],t}},t.prototype.clearHeaders=function(){this.headers={}},t.prototype.clone=function(){return new t(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},t.prototype.toRaw=function(){return this._toString(this._raw)},t.prototype.toString=function(){return this._toString(this._normal)},t.prototype._toString=function(e){var t=e.scheme+":";for(var r in e.scheme.toLowerCase().match("^sips?$")||(t+="//"),e.user&&(t+=this.escapeUser(e.user)+"@"),t+=e.host,(e.port||0===e.port)&&(t+=":"+e.port),this.parameters)this.parameters.hasOwnProperty(r)&&(t+=";"+r,null!==this.parameters[r]&&(t+="="+this.parameters[r]));var n=[];for(var i in this.headers)if(this.headers.hasOwnProperty(i))for(var s in this.headers[i])this.headers[i].hasOwnProperty(s)&&n.push(i+"="+this.headers[i][s]);return n.length>0&&(t+="?"+n.join("&")),t},t.prototype.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},t.prototype.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),n=r.length,i="",s=0;s<n;s++)0!==s&&(i+="-"),i+=r[s].charAt(0).toUpperCase()+r[s].substring(1);return t[i]&&(i=t[i]),i},t}(a);t.URI=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=500;t.Timers={T1:n,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),s=r(9),o=r(6),a=function(){function e(e,t,r,n){if(this.pracked=[],this.uacPendingReply=!1,this.uasPendingReply=!1,this.type=i.TypeStrings.Dialog,!t.hasHeader("contact"))throw new Error("unable to create a Dialog without Contact header field");if(t.type===i.TypeStrings.IncomingResponse){var s=t.statusCode;n=s&&s<200?i.DialogStatus.STATUS_EARLY:i.DialogStatus.STATUS_CONFIRMED}else n=n||i.DialogStatus.STATUS_CONFIRMED;var o=t.parseHeader("contact");"UAS"===r&&t.type===i.TypeStrings.IncomingRequest?(this.id={callId:t.callId,localTag:t.toTag,remoteTag:t.fromTag,toString:function(){return t.callId+t.toTag+t.fromTag}},this.state=n,this.remoteSeqnum=t.cseq,this.localUri=(t.parseHeader("to")||{}).uri,this.remoteUri=(t.parseHeader("from")||{}).uri,this.remoteTarget=o.uri,this.routeSet=t.getHeaders("record-route"),this.inviteSeqnum=t.cseq,this.localSeqnum=t.cseq):(this.id={callId:t.callId,localTag:t.fromTag,remoteTag:t.toTag,toString:function(){return t.callId+t.fromTag+t.toTag}},this.state=n,this.inviteSeqnum=t.cseq,this.localSeqnum=t.cseq,this.localUri=t.parseHeader("from").uri,this.pracked=[],this.remoteUri=t.parseHeader("to").uri,this.remoteTarget=o.uri,this.routeSet=t.getHeaders("record-route").reverse()),this.logger=e.ua.getLogger("sip.dialog",this.id.toString()),this.owner=e,e.ua.dialogs[this.id.toString()]=this,this.logger.log("new "+r+" dialog created with status "+(this.state===i.DialogStatus.STATUS_EARLY?"EARLY":"CONFIRMED")),e.emit("dialog",this)}return e.prototype.update=function(e,t){this.state=i.DialogStatus.STATUS_CONFIRMED,this.logger.log("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.routeSet=e.getHeaders("record-route").reverse())},e.prototype.terminate=function(){this.logger.log("dialog "+this.id.toString()+" deleted"),this.sessionDescriptionHandler&&this.state!==i.DialogStatus.STATUS_CONFIRMED&&this.sessionDescriptionHandler.close(),delete this.owner.ua.dialogs[this.id.toString()]},e.prototype.createRequest=function(e,t,r){void 0===t&&(t=[]),t=t.slice(),this.localSeqnum||(this.localSeqnum=Math.floor(1e4*Math.random()));var i=e===n.C.CANCEL||e===n.C.ACK?this.inviteSeqnum:this.localSeqnum+=1,s=new o.OutgoingRequest(e,this.remoteTarget,this.owner.ua,{cseq:i,callId:this.id.callId,fromUri:this.localUri,fromTag:this.id.localTag,toIri:this.remoteUri,toTag:this.id.remoteTag,routeSet:this.routeSet},t,r);return s.dialog=this,s},e.prototype.checkInDialogRequest=function(e){var t=this;if(this.remoteSeqnum){if(e.cseq<this.remoteSeqnum)return e.method!==n.C.ACK&&e.reply(500),e.cseq===this.inviteSeqnum}else this.remoteSeqnum=e.cseq;switch(e.method){case n.C.INVITE:if(!0===this.uacPendingReply)e.reply(491);else{if(!0===this.uasPendingReply&&e.cseq>this.remoteSeqnum){var r=Math.floor(10*Math.random())+1;return e.reply(500,void 0,["Retry-After:"+r]),this.remoteSeqnum=e.cseq,!1}this.uasPendingReply=!0;var s=function(){!e.serverTransaction||e.serverTransaction.state!==i.TransactionStatus.STATUS_ACCEPTED&&e.serverTransaction.state!==i.TransactionStatus.STATUS_COMPLETED&&e.serverTransaction.state!==i.TransactionStatus.STATUS_TERMINATED||(e.serverTransaction.removeListener("stateChanged",s),t.uasPendingReply=!1)};e.serverTransaction&&e.serverTransaction.on("stateChanged",s)}e.hasHeader("contact")&&e.serverTransaction&&e.serverTransaction.on("stateChanged",function(){e.serverTransaction&&e.serverTransaction.state===i.TransactionStatus.STATUS_ACCEPTED&&(t.remoteTarget=e.parseHeader("contact").uri)});break;case n.C.NOTIFY:e.hasHeader("contact")&&e.serverTransaction&&e.serverTransaction.on("stateChanged",function(){e.serverTransaction&&e.serverTransaction.state===i.TransactionStatus.STATUS_COMPLETED&&(t.remoteTarget=e.parseHeader("contact").uri)})}return e.cseq>this.remoteSeqnum&&(this.remoteSeqnum=e.cseq),!0},e.prototype.sendRequest=function(e,t,r){var o=this;void 0===r&&(r={});var a,u=(r.extraHeaders||[]).slice();r.body&&(r.body.body?a=r.body:((a={}).body=r.body,r.contentType&&(a.contentType=r.contentType)));var c=this.createRequest(t,u,a),h=function(t){var r=new s.RequestSender({request:c,onRequestTimeout:e.onRequestTimeout.bind(e),onTransportError:e.onTransportError.bind(e),receiveResponse:function(r){408===r.statusCode||481===r.statusCode?e.onDialogError(r):r.method===n.C.INVITE&&491===r.statusCode?t?e.receiveResponse(r):(c.cseq=o.localSeqnum+=1,setTimeout(function(){void 0!==o.owner.status&&o.owner.status!==i.SessionStatus.STATUS_TERMINATED&&h(!0)},1e3)):e.receiveResponse(r)}},o.owner.ua);if(r.send(),r.clientTransaction&&r.clientTransaction.type!==i.TypeStrings.AckClientTransaction&&c.method===n.C.INVITE&&r.clientTransaction&&r.clientTransaction.state!==i.TransactionStatus.STATUS_TERMINATED){o.uacPendingReply=!0;var a=function(){var e=r.clientTransaction.state;r.clientTransaction&&r.clientTransaction.type!==i.TypeStrings.AckClientTransaction&&(!r.clientTransaction||e!==i.TransactionStatus.STATUS_ACCEPTED&&e!==i.TransactionStatus.STATUS_COMPLETED&&e!==i.TransactionStatus.STATUS_TERMINATED||(r.clientTransaction.removeListener("stateChanged",a),o.uacPendingReply=!1))};r.clientTransaction.on("stateChanged",a)}};return h(!1),c},e.prototype.receiveRequest=function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)},e.C=i.DialogStatus,e}();t.Dialog=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(1),a=r(0),u=r(4),c=r(10),h=r(2),l=function(e){function t(r,n){var i=e.call(this)||this;return i.data={},t.initializer(i,r,n),i}return i(t,e),t.initializer=function(e,t,r){if(e.type=a.TypeStrings.ServerContext,e.ua=t,e.logger=t.getLogger("sip.servercontext"),e.request=r,r.method===o.C.INVITE?e.transaction=new c.InviteServerTransaction(r,t):e.transaction=new c.NonInviteServerTransaction(r,t),r.body&&(e.body=r.body),r.hasHeader("Content-Type")&&(e.contentType=r.getHeader("Content-Type")),e.method=r.method,e.localIdentity=r.to,e.remoteIdentity=r.from,r.hasHeader("P-Asserted-Identity")){var n=r.getHeader("P-Asserted-Identity");n&&(e.assertedIdentity=u.Grammar.nameAddrHeaderParse(n))}},t.prototype.progress=function(e){return void 0===e&&(e={}),e.statusCode=e.statusCode||180,e.minCode=100,e.maxCode=199,e.events=["progress"],this.reply(e)},t.prototype.accept=function(e){return void 0===e&&(e={}),e.statusCode=e.statusCode||200,e.minCode=200,e.maxCode=299,e.events=["accepted"],this.reply(e)},t.prototype.reject=function(e){return void 0===e&&(e={}),e.statusCode=e.statusCode||480,e.minCode=300,e.maxCode=699,e.events=["rejected","failed"],this.reply(e)},t.prototype.reply=function(e){var t=this;void 0===e&&(e={});var r=e.statusCode||100,n=e.minCode||100,i=e.maxCode||699,s=h.Utils.getReasonPhrase(r,e.reasonPhrase),o=e.extraHeaders||[],a=e.body,u=e.events||[];if(r<n||r>i)throw new TypeError("Invalid statusCode: "+r);var c=this.request.reply(r,s,o,a);return u.forEach(function(e){t.emit(e,c,s)}),this},t.prototype.onRequestTimeout=function(){this.emit("failed",void 0,o.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",void 0,o.C.causes.CONNECTION_ERROR)},t}(s.EventEmitter);t.ServerContext=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){for(var r,n=[],i=e.split(/\r\n/),s=0;s<i.length;){var o=i[s];if(/^m=(?:audio|video)/.test(o))r={index:s,stripped:[]},n.push(r);else if(r){var a=/^a=rtpmap:(\d+) ([^/]+)\//.exec(o);if(a&&t===a[2]){i.splice(s,1),r.stripped.push(a[1]);continue}}s++}for(var u=0,c=n;u<c.length;u++){for(var h=c[u],l=i[h.index].split(" "),p=3;p<l.length;)-1===h.stripped.indexOf(l[p])?p++:l.splice(p,1);i[h.index]=l.join(" ")}return i.join("\r\n")},i=function(e,t){var r=new RegExp("m="+t+".*$","gm"),n=new RegExp("^a=group:.*$","gm");if(r.test(e)){var i,s=(e=e.split(/^m=/gm).filter(function(e){if(e.substr(0,t.length)===t){if(i=e.match(/^a=mid:.*$/gm)){var r=i[0].match(/:.+$/g);r&&(i=r[0].substr(1))}return!1}return!0}).join("m=")).match(n);if(s&&1===s.length){var o=s[0],a=new RegExp(" *"+i+"[^ ]*","g");o=o.replace(a,""),e=e.split(n).join(o)}}return e};t.stripTcpCandidates=function(e){return e.sdp=(e.sdp||"").replace(/^a=candidate:\d+ \d+ tcp .*?\r\n/gim,""),Promise.resolve(e)},t.stripTelephoneEvent=function(e){return e.sdp=n(e.sdp||"","telephone-event"),Promise.resolve(e)},t.cleanJitsiSdpImageattr=function(e){return e.sdp=(e.sdp||"").replace(/^(a=imageattr:.*?)(x|y)=\[0-/gm,"$1$2=[1:"),Promise.resolve(e)},t.stripG722=function(e){return e.sdp=n(e.sdp||"","G722"),Promise.resolve(e)},t.stripRtpPayload=function(e){return function(t){return t.sdp=n(t.sdp||"",e),Promise.resolve(t)}},t.stripVideo=function(e){return e.sdp=i(e.sdp||"","video"),Promise.resolve(e)},t.addMidLines=function(e){var t=e.sdp||"";if(-1===t.search(/^a=mid.*$/gm)){var r=t.match(/^m=.*$/gm),n=t.split(/^m=.*$/gm);r&&r.forEach(function(e,t){r[t]=e+"\na=mid:"+t}),n.forEach(function(e,t){r&&r[t]&&(n[t]=e+r[t])}),t=n.join(""),e.sdp=t}return Promise.resolve(e)}},function(e){e.exports={name:"sip.js",title:"SIP.js",description:"A simple, intuitive, and powerful JavaScript signaling library",version:"0.13.5",license:"MIT",main:"lib/index.js",homepage:"https://sipjs.com",author:"OnSIP <developer@onsip.com> (https://sipjs.com/aboutus/)",contributors:[{url:"https://github.com/onsip/SIP.js/blob/master/THANKS.md"}],repository:{type:"git",url:"https://github.com/onsip/SIP.js.git"},keywords:["sip","websocket","webrtc","library","javascript"],dependencies:{"crypto-js":"^3.1.9-1"},devDependencies:{"@types/node":"^11.9.0","circular-dependency-plugin":"^5.0.2","jasmine-core":"^3.3.0",karma:"^4.0.0","karma-chrome-launcher":"^2.2.0","karma-cli":"^2.0.0","karma-jasmine":"^2.0.1","karma-jasmine-html-reporter":"^1.4.0","karma-mocha-reporter":"^2.2.5","karma-webpack":"^3.0.5",pegjs:"^0.10.0","ts-loader":"^5.3.3","ts-pegjs":"0.2.2",tslint:"^5.12.1",typescript:"^3.3.3",webpack:"^4.29.3","webpack-cli":"^3.2.3"},engines:{node:">=8.0"},scripts:{prebuild:"tslint -p tsconfig.json -c tslint.json","generate-grammar":"node build/grammarGenerator.js","build-reg-bundle":"webpack --progress --config build/webpack.config.js --env.buildType reg","build-min-bundle":"webpack --progress --config build/webpack.config.js --env.buildType min","build-bundles":"npm run build-reg-bundle && npm run build-min-bundle","build-lib":"tsc","copy-dist-files":"cp dist/sip.js dist/sip-$npm_package_version.js && cp dist/sip.min.js  dist/sip-$npm_package_version.min.js",build:"npm run generate-grammar && npm run build-lib && npm run build-reg-bundle && npm run build-min-bundle && npm run copy-dist-files",browserTest:"sleep 2 && open http://0.0.0.0:9876/debug.html & karma start --reporters kjhtml --no-single-run",commandLineTest:"karma start --reporters mocha --browsers ChromeHeadless --single-run",buildAndTest:"npm run build && npm run commandLineTest",buildAndBrowserTest:"npm run build && npm run browserTest"},types:"./types"}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),o=function(e){function t(t,r,n){var i=e.call(this,n)||this;if(i.type=s.TypeStrings.NameAddrHeader,!t||t.type!==s.TypeStrings.URI)throw new TypeError('missing or invalid "uri" parameter');return i.uri=t,i._displayName=r,i}return i(t,e),Object.defineProperty(t.prototype,"friendlyName",{get:function(){return this.displayName||this.uri.aor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._displayName},set:function(e){this._displayName=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))},t.prototype.toString=function(){var e=this.displayName||"0"===this.displayName?'"'+this.displayName+'" ':"";for(var t in e+="<"+this.uri.toString()+">",this.parameters)this.parameters.hasOwnProperty(t)&&(e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]));return e},t}(r(11).Parameters);t.NameAddrHeader=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=r(0),s=r(2),o=function(){function e(e){this.type=i.TypeStrings.DigestAuthentication,this.logger=e.getLogger("sipjs.digestauthentication"),this.username=e.configuration.authorizationUser,this.password=e.configuration.password,this.nc=0,this.ncHex="00000000"}return e.prototype.authenticate=function(e,t,r){if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;this.qop="auth-int"}else this.qop=void 0;return this.method=e.method,this.uri=e.ruri,this.cnonce=s.Utils.createRandomToken(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(r),!0},e.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")},e.prototype.updateNcHex=function(){var e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e},e.prototype.calculateResponse=function(e){var t,r=n(this.username+":"+this.realm+":"+this.password);"auth"===this.qop?(t=n(this.method+":"+this.uri),this.response=n(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+t)):"auth-int"===this.qop?(t=n(this.method+":"+this.uri+":"+n(e||"")),this.response=n(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+t)):void 0===this.qop&&(t=n(this.method+":"+this.uri),this.response=n(r+":"+this.nonce+":"+t))},e}();t.DigestAuthentication=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0);!function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"}(n=t.Levels||(t.Levels={}));var s=function(){function e(){this.builtinEnabled=!0,this._level=n.log,this.loggers={},this.type=i.TypeStrings.LoggerFactory,this.logger=this.getLogger("sip:loggerfactory")}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){e>=0&&e<=3?this._level=e:e>3?this._level=3:n.hasOwnProperty(e)?this._level=e:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connector",{get:function(){return this._connector},set:function(e){e?"function"==typeof e?this._connector=e:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(e)):this._connector=void 0},enumerable:!0,configurable:!0}),e.prototype.getLogger=function(e,t){if(t&&3===this.level)return new o(this,e,t);if(this.loggers[e])return this.loggers[e];var r=new o(this,e);return this.loggers[e]=r,r},e.prototype.genericLog=function(e,t,r,i){this.level>=e&&(this.builtinEnabled&&this.print(console[n[e]],t,r,i),this.connector&&this.connector(n[e],t,r,i))},e.prototype.print=function(e,t,r,n){if("string"==typeof n){var i=[new Date,t];r&&i.push(r),n=i.concat(n).join(" | ")}e.call(console,n)},e}();t.LoggerFactory=s;var o=function(){function e(e,t,r){this.type=i.TypeStrings.Logger,this.logger=e,this.category=t,this.label=r}return e.prototype.error=function(e){this.genericLog(n.error,e)},e.prototype.warn=function(e){this.genericLog(n.warn,e)},e.prototype.log=function(e){this.genericLog(n.log,e)},e.prototype.debug=function(e){this.genericLog(n.debug,e)},e.prototype.genericLog=function(e,t){this.logger.genericLog(e,this.category,this.label,t)},e}();t.Logger=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),s=r(6);!function(e){function t(e,t){var r=t,n=0,i=0;if(e.substring(r,r+2).match(/(^\r\n)/))return-2;for(;0===n;){if(-1===(i=e.indexOf("\r\n",r)))return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?r=i+2:n=i}return n}function r(e,t,r,s){var o,a=t.indexOf(":",r),u=t.substring(r,a).trim(),c=t.substring(a+1,s).trim();switch(u.toLowerCase()){case"via":case"v":e.addHeader("via",c),1===e.getHeaders("via").length?(o=e.parseHeader("Via"))&&(e.via=o,e.viaBranch=o.branch):o=0;break;case"from":case"f":e.setHeader("from",c),(o=e.parseHeader("from"))&&(e.from=o,e.fromTag=o.getParam("tag"));break;case"to":case"t":e.setHeader("to",c),(o=e.parseHeader("to"))&&(e.to=o,e.toTag=o.getParam("tag"));break;case"record-route":if(-1===(o=i.Grammar.parse(c,"Record_Route"))){o=void 0;break}for(var h in o)o[h]&&(e.addHeader("record-route",c.substring(o[h].position,o[h].offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=o[h].parsed);break;case"call-id":case"i":e.setHeader("call-id",c),(o=e.parseHeader("call-id"))&&(e.callId=c);break;case"contact":case"m":if(-1===(o=i.Grammar.parse(c,"Contact"))){o=void 0;break}for(var h in o)o[h]&&(e.addHeader("contact",c.substring(o[h].position,o[h].offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=o[h].parsed);break;case"content-length":case"l":e.setHeader("content-length",c),o=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",c),o=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",c),(o=e.parseHeader("cseq"))&&(e.cseq=o.value),e.type===n.TypeStrings.IncomingResponse&&(e.method=o.method);break;case"max-forwards":e.setHeader("max-forwards",c),o=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",c),o=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",c),o=e.parseHeader("proxy-authenticate");break;case"refer-to":case"r":e.setHeader("refer-to",c),(o=e.parseHeader("refer-to"))&&(e.referTo=o);break;default:e.setHeader(u,c),o=0}return void 0!==o||{error:"error parsing header '"+u+"'"}}e.getHeader=t,e.parseHeader=r,e.parseMessage=function(e,n){var o=0,a=e.indexOf("\r\n"),u=n.getLogger("sip.parser");if(-1!==a){var c,h=e.substring(0,a),l=i.Grammar.parse(h,"Request_Response");if(-1!==l){var p;for(l.status_code?((c=new s.IncomingResponse(n)).statusCode=l.status_code,c.reasonPhrase=l.reason_phrase):((c=new s.IncomingRequest(n)).method=l.method,c.ruri=l.uri),c.data=e,o=a+2;;){if(-2===(a=t(e,o))){p=o+2;break}if(-1===a)return void u.error("malformed message");if(!0!==r(c,e,o,a))return void u.error(l.error);o=a+2}return c.hasHeader("content-length")?c.body=e.substr(p,Number(c.getHeader("content-length"))):c.body=e.substring(p),c}u.warn('error parsing first line of SIP message: "'+h+'"')}else u.warn("no CRLF found, not a SIP message, discarded")}}(t.Parser||(t.Parser={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(8),o=r(1),a=r(0),u=r(5),c=r(6),h=r(2),l=function(e){function t(t,r,n,i){void 0===i&&(i={});var s=this;if(i.extraHeaders=(i.extraHeaders||[]).slice(),i.contentType=i.contentType||"text/plain","number"!=typeof i.expires||i.expires%1!=0?i.expires=3600:i.expires=Number(i.expires),"boolean"!=typeof i.unpublishOnClose&&(i.unpublishOnClose=!0),null==r||""===r)throw new u.Exceptions.MethodParameterError("Publish","Target",r);if(void 0===(r=t.normalizeTarget(r)))throw new u.Exceptions.MethodParameterError("Publish","Target",r);if((s=e.call(this,t,o.C.PUBLISH,r,i)||this).type=a.TypeStrings.PublishContext,s.options=i,s.target=r,null==n||""===n)throw new u.Exceptions.MethodParameterError("Publish","Event",n);return s.event=n,s.logger=t.getLogger("sip.publish"),s.pubRequestExpires=s.options.expires,t.on("transportCreated",function(e){e.on("transportError",function(){return s.onTransportError()})}),s}return i(t,e),t.prototype.publish=function(e){this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.options.body=e,this.pubRequestBody=this.options.body,0===this.pubRequestExpires&&(this.pubRequestExpires=this.options.expires,this.pubRequestEtag=void 0),this.ua.publishers[this.target.toString()+":"+this.event]||(this.ua.publishers[this.target.toString()+":"+this.event]=this),this.sendPublishRequest()},t.prototype.unpublish=function(){this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestExpires=0,void 0!==this.pubRequestEtag&&this.sendPublishRequest()},t.prototype.close=function(){this.options.unpublishOnClose?this.unpublish():(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestExpires=0,this.pubRequestEtag=void 0),this.ua.publishers[this.target.toString()+":"+this.event]&&delete this.ua.publishers[this.target.toString()+":"+this.event]},t.prototype.onRequestTimeout=function(){e.prototype.onRequestTimeout.call(this),this.emit("unpublished",void 0,o.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){e.prototype.onTransportError.call(this),this.emit("unpublished",void 0,o.C.causes.CONNECTION_ERROR)},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode||0,n=h.Utils.getReasonPhrase(r);switch(!0){case/^1[0-9]{2}$/.test(r.toString()):this.emit("progress",e,n);break;case/^2[0-9]{2}$/.test(r.toString()):if(e.hasHeader("SIP-ETag")?this.pubRequestEtag=e.getHeader("SIP-ETag"):this.logger.warn("SIP-ETag header missing in a 200-class response to PUBLISH"),e.hasHeader("Expires")){var i=Number(e.getHeader("Expires"));"number"==typeof i&&i>=0&&i<=this.pubRequestExpires?this.pubRequestExpires=i:this.logger.warn("Bad Expires header in a 200-class response to PUBLISH")}else this.logger.warn("Expires header missing in a 200-class response to PUBLISH");0!==this.pubRequestExpires?(this.publishRefreshTimer=setTimeout(function(){return t.refreshRequest()},900*this.pubRequestExpires),this.emit("published",e,n)):this.emit("unpublished",e,n);break;case/^412$/.test(r.toString()):void 0!==this.pubRequestEtag&&0!==this.pubRequestExpires?(this.logger.warn("412 response to PUBLISH, recovering"),this.pubRequestEtag=void 0,this.emit("progress",e,n),this.publish(this.options.body)):(this.logger.warn("412 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n));break;case/^423$/.test(r.toString()):if(0!==this.pubRequestExpires&&e.hasHeader("Min-Expires")){var s=Number(e.getHeader("Min-Expires"));"number"==typeof s||s>this.pubRequestExpires?(this.logger.warn("423 code in response to PUBLISH, adjusting the Expires value and trying to recover"),this.pubRequestExpires=s,this.emit("progress",e,n),this.publish(this.options.body)):(this.logger.warn("Bad 423 response Min-Expires header received for PUBLISH"),this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n))}else this.logger.warn("423 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n);break;default:this.pubRequestExpires=0,this.emit("failed",e,n),this.emit("unpublished",e,n)}0===this.pubRequestExpires&&(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestEtag=void 0)},t.prototype.refreshRequest=function(){if(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,void 0===this.pubRequestEtag)throw new u.Exceptions.MethodParameterError("Publish","Body",void 0);if(0===this.pubRequestExpires)throw new u.Exceptions.MethodParameterError("Publish","Expire",this.pubRequestExpires);this.sendPublishRequest()},t.prototype.sendPublishRequest=function(){var e=Object.create(this.options||Object.prototype);e.extraHeaders=(this.options.extraHeaders||[]).slice(),e.extraHeaders.push("Event: "+this.event),e.extraHeaders.push("Expires: "+this.pubRequestExpires),void 0!==this.pubRequestEtag&&e.extraHeaders.push("SIP-If-Match: "+this.pubRequestEtag),this.request=new c.OutgoingRequest(o.C.PUBLISH,this.target,this.ua,this.options.params,e.extraHeaders),void 0!==this.pubRequestBody&&(this.request.body={},this.request.body.body=this.pubRequestBody,this.request.body.contentType=this.options.contentType),this.send()},t}(s.ClientContext);t.PublishContext=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(1),u=r(0),c=r(5),h=r(4),l=r(2);function p(e){var t={expires:600,extraContactHeaderParams:[],instanceId:void 0,params:{},regId:void 0,registrar:void 0},r={mandatory:{},optional:{expires:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>=0)return t}},extraContactHeaderParams:function(e){if(e instanceof Array)return e.filter(function(e){return"string"==typeof e})},instanceId:function(e){if("string"==typeof e)return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===h.Grammar.parse(e,"uuid")?void 0:e},params:function(e){if("object"==typeof e)return e},regId:function(e){if(l.Utils.isDecimal(e)){var t=Number(e);if(t>=0)return t}},registrar:function(e){if("string"==typeof e){/^sip:/i.test(e)||(e=a.C.SIP+":"+e);var t=h.Grammar.URIParse(e);return t?t.user?void 0:t:void 0}}}};for(var n in r.mandatory){if(!e.hasOwnProperty(n))throw new c.Exceptions.ConfigurationError(n);var i=e[n];if(void 0===(s=r.mandatory[n](i)))throw new c.Exceptions.ConfigurationError(n,i);t[n]=s}for(var n in r.optional)if(e.hasOwnProperty(n)){var s;if((i=e[n])instanceof Array&&0===i.length)continue;if(null===i||""===i||void 0===i||"number"==typeof i&&isNaN(i))continue;if(void 0===(s=r.optional[n](i)))throw new c.Exceptions.ConfigurationError(n,i);t[n]=s}return t}var d=function(e){function t(t,r){void 0===r&&(r={});var n=this,i=p(r);if(i.regId&&!i.instanceId?i.instanceId=l.Utils.newUUID():!i.regId&&i.instanceId&&(i.regId=1),i.params.toUri=i.params.toUri||t.configuration.uri,i.params.toDisplayName=i.params.toDisplayName||t.configuration.displayName,i.params.callId=i.params.callId||l.Utils.createRandomToken(22),i.params.cseq=i.params.cseq||Math.floor(1e4*Math.random()),!i.registrar){var s={};"object"==typeof t.configuration.uri?(s=t.configuration.uri.clone()).user=void 0:s=t.configuration.uri,i.registrar=s}for(var o in(n=e.call(this,t,a.C.REGISTER,i.registrar,i)||this).type=u.TypeStrings.RegisterContext,n.options=i,n.logger=t.getLogger("sip.registercontext"),n.logger.log("configuration parameters for RegisterContext after validation:"),i)i.hasOwnProperty(o)&&n.logger.log(" "+o+": "+JSON.stringify(i[o]));return n.expires=i.expires,n.cseq=i.params.cseq,n.contact=t.contact.toString(),n.registered=!1,t.on("transportCreated",function(e){e.on("disconnected",function(){return n.onTransportDisconnected()})}),n}return i(t,e),t.prototype.register=function(e){var t=this;void 0===e&&(e={}),this.options=s({},this.options,e);var r=(this.options.extraHeaders||[]).slice();r.push("Contact: "+this.generateContactHeader(this.expires)),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.closeHeaders=this.options.closeWithHeaders?(this.options.extraHeaders||[]).slice():[],this.receiveResponse=function(e){if(e.cseq===t.cseq){void 0!==t.registrationTimer&&(clearTimeout(t.registrationTimer),t.registrationTimer=void 0);var r=(e.statusCode||0).toString();switch(!0){case/^1[0-9]{2}$/.test(r):t.emit("progress",e);break;case/^2[0-9]{2}$/.test(r):t.emit("accepted",e);var n=void 0;e.hasHeader("expires")&&(n=Number(e.getHeader("expires"))),void 0!==t.registrationExpiredTimer&&(clearTimeout(t.registrationExpiredTimer),t.registrationExpiredTimer=void 0);var i=e.getHeaders("contact").length;if(!i){t.logger.warn("no Contact header in response to REGISTER, response ignored");break}for(var s=void 0;i--;){if((s=e.parseHeader("contact",i)).uri.user===t.ua.contact.uri.user){n=s.getParam("expires");break}s=void 0}if(!s){t.logger.warn("no Contact header pointing to us, response ignored");break}void 0===n&&(n=t.expires),t.registrationTimer=setTimeout(function(){t.registrationTimer=void 0,t.register(t.options)},1e3*n-3e3),t.registrationExpiredTimer=setTimeout(function(){t.logger.warn("registration expired"),t.registered&&t.unregistered(void 0,a.C.causes.EXPIRES)},1e3*n),s.hasParam("temp-gruu")&&(t.ua.contact.temp_gruu=h.Grammar.URIParse(s.getParam("temp-gruu").replace(/"/g,""))),s.hasParam("pub-gruu")&&(t.ua.contact.pub_gruu=h.Grammar.URIParse(s.getParam("pub-gruu").replace(/"/g,""))),t.registered=!0,t.emit("registered",e||void 0);break;case/^423$/.test(r):e.hasHeader("min-expires")?(t.expires=Number(e.getHeader("min-expires")),t.register(t.options)):(t.logger.warn("423 response received for REGISTER without Min-Expires"),t.registrationFailure(e,a.C.causes.SIP_FAILURE_CODE));break;default:t.registrationFailure(e,l.Utils.sipErrorCause(e.statusCode||0))}}},this.onRequestTimeout=function(){t.registrationFailure(void 0,a.C.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){t.registrationFailure(void 0,a.C.causes.CONNECTION_ERROR)},this.cseq++,this.request&&(this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=r),this.send()},t.prototype.close=function(){var e={all:!1,extraHeaders:this.closeHeaders};this.registeredBefore=this.registered,this.registered&&this.unregister(e)},t.prototype.unregister=function(e){var t=this;void 0===e&&(e={}),this.registered||e.all||this.logger.warn("Already unregistered, but sending an unregister anyways.");var r=(e.extraHeaders||[]).slice();this.registered=!1,void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),e.all?(r.push("Contact: *"),r.push("Expires: 0")):r.push("Contact: "+this.generateContactHeader(0)),this.receiveResponse=function(e){var r=e&&e.statusCode?e.statusCode.toString():"";switch(!0){case/^1[0-9]{2}$/.test(r):t.emit("progress",e);break;case/^2[0-9]{2}$/.test(r):t.emit("accepted",e),void 0!==t.registrationExpiredTimer&&(clearTimeout(t.registrationExpiredTimer),t.registrationExpiredTimer=void 0),t.unregistered(e);break;default:t.unregistered(e,l.Utils.sipErrorCause(e.statusCode||0))}},this.onRequestTimeout=function(){},this.cseq++,this.request&&(this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=r),this.send()},t.prototype.unregistered=function(e,t){this.registered=!1,this.emit("unregistered",e||void 0,t||void 0)},t.prototype.registrationFailure=function(e,t){this.emit("failed",e||void 0,t||void 0)},t.prototype.onTransportDisconnected=function(){this.registeredBefore=this.registered,void 0!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),void 0!==this.registrationExpiredTimer&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0),this.registered&&this.unregistered(void 0,a.C.causes.CONNECTION_ERROR)},t.prototype.generateContactHeader=function(e){void 0===e&&(e=0);var t=this.contact;return this.options.regId&&this.options.instanceId&&(t+=";reg-id="+this.options.regId,t+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(function(e){t+=";"+e}),t+=";expires="+e},t}(o.ClientContext);t.RegisterContext=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),s=r(2);!function(e){function t(e,t,r){for(var n=s.Utils.buildStatusLine(e),i=0,o=t.getHeaders("via");i<o.length;i++){n+="Via: "+o[i]+"\r\n"}var a=t.getHeader("To")||"";t.toTag||(a+=";tag="+s.Utils.newTag()),n+="To: "+a+"\r\n",n+="From: "+t.getHeader("From")+"\r\n",n+="Call-ID: "+t.callId+"\r\n",n+="CSeq: "+t.cseq+" "+t.method+"\r\n",n+="\r\n",r.send(n)}function r(e,r,n){return!(!e.ruri||"sip"!==e.ruri.scheme)||(t(416,e,n),!1)}function o(e,r,n){return!(!e.toTag&&e.callId.substr(0,5)===r.configuration.sipjsId)||(t(482,e,n),!1)}function a(e,r,n){var i=s.Utils.str_utf8_length(e.body),o=e.getHeader("content-length");return!(o&&i<Number(o))||(t(400,e,n),!1)}function u(e,r,i){var s=e.fromTag,o=e.callId,a=e.cseq;if(!e.toTag)if(e.method===n.C.INVITE){if(r.transactions.ist[e.viaBranch])return!0;for(var u in r.transactions.ist){if(r.transactions.ist.hasOwnProperty(u))if((c=r.transactions.ist[u]).request.fromTag===s&&c.request.callId===o&&c.request.cseq===a)return t(482,e,i),!1}}else{if(r.transactions.nist[e.viaBranch])return!0;for(var u in r.transactions.nist){var c;if(r.transactions.nist.hasOwnProperty(u))if((c=r.transactions.nist[u]).request.fromTag===s&&c.request.callId===o&&c.request.cseq===a)return t(482,e,i),!1}}return!0}function c(e,t){return!(e.getHeaders("via").length>1)||(t.getLogger("sip.sanitycheck").warn("More than one Via header field present in the response. Dropping the response"),!1)}function h(e,t){return e.via.host===t.configuration.viaHost&&void 0===e.via.port||(t.getLogger("sip.sanitycheck").warn("Via sent-by in the response does not match UA Via host value. Dropping the response"),!1)}function l(e,t){var r=s.Utils.str_utf8_length(e.body),n=e.getHeader("content-length");return!(n&&r<Number(n))||(t.getLogger("sip.sanitycheck").warn("Message body length is lower than the value in Content-Length header field. Dropping the response"),!1)}function p(e,t){for(var r=0,n=["from","to","call_id","cseq","via"];r<n.length;r++){var i=n[r];if(!e.hasHeader(i))return t.getLogger("sip.sanitycheck").warn("Missing mandatory header field : "+i+". Dropping the response"),!1}return!0}e.reply=t,e.rfc3261_8_2_2_1=r,e.rfc3261_16_3_4=o,e.rfc3261_18_3_request=a,e.rfc3261_8_2_2_2=u,e.rfc3261_8_1_3_3=c,e.rfc3261_18_1_2=h,e.rfc3261_18_3_response=l,e.minimumHeaders=p,e.sanityCheck=function(e,t,n){for(var s=[r,o,a,u],d=[c,h,l],f=0,g=[p];f<g.length;f++)if(!(0,g[f])(e,t,n))return!1;if(e.type===i.TypeStrings.IncomingRequest){for(var v=0,m=s;v<m.length;v++)if(!(0,m[v])(e,t,n))return!1}else if(e.type===i.TypeStrings.IncomingResponse)for(var y=0,T=d;y<T.length;y++)if(!(0,T[y])(e,t,n))return!1;return!0}}(t.SanityCheck||(t.SanityCheck={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(8),a=r(1),u=r(13),c=r(0),h=r(5),l=r(4),p=r(9),d=r(14),f=r(42),g=r(6),v=r(12),m=r(2),y=function(e){function t(r){var n=e.call(this)||this;if(n.data={},n.type=c.TypeStrings.Session,!r)throw new h.Exceptions.SessionDescriptionHandlerError("A session description handler is required for the session to function");return n.status=t.C.STATUS_NULL,n.dialog=void 0,n.pendingReinvite=!1,n.earlyDialogs={},n.sessionDescriptionHandlerFactory=r,n.hasOffer=!1,n.hasAnswer=!1,n.timers={ackTimer:void 0,expiresTimer:void 0,invite2xxTimer:void 0,userNoAnswerTimer:void 0,rel1xxTimer:void 0,prackTimer:void 0},n.startTime=void 0,n.endTime=void 0,n.tones=void 0,n.localHold=!1,n.earlySdp=void 0,n.rel100=a.C.supported.UNSUPPORTED,n.originalReceiveRequest=n.receiveRequest,n}return i(t,e),t.prototype.dtmf=function(e,t){var r=this;if(void 0===t&&(t={}),this.status!==c.SessionStatus.STATUS_CONFIRMED&&this.status!==c.SessionStatus.STATUS_WAITING_FOR_ACK)throw new h.Exceptions.InvalidStateError(this.status);if(!e||!e.toString().match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+e);var n=function(){if(r.status!==c.SessionStatus.STATUS_TERMINATED&&r.tones&&0!==r.tones.length){var e,i=r.tones.shift();","===i.tone?e=2e3:(i.on("failed",function(){r.tones=void 0}),i.send(t),e=i.duration+i.interToneGap),setTimeout(n,e)}else r.tones=void 0};e=e.toString();var i=this.ua.configuration.dtmfType;this.sessionDescriptionHandler&&i===a.C.dtmfType.RTP&&(this.sessionDescriptionHandler.sendDtmf(e,t)||(this.logger.warn("Attempt to use dtmfType 'RTP' has failed, falling back to INFO packet method"),i=a.C.dtmfType.INFO));if(i===a.C.dtmfType.INFO){for(var s=[],o=e.split("");o.length>0;)s.push(new f.DTMF(this,o.shift(),t));if(this.tones)return this.tones=this.tones.concat(s),this;this.tones=s,n()}return this},t.prototype.bye=function(e){if(void 0===e&&(e={}),this.status===c.SessionStatus.STATUS_TERMINATED)return this.logger.error("Error: Attempted to send BYE in a terminated session."),this;this.logger.log("terminating Session");var t=e.statusCode;if(t&&(t<200||t>=700))throw new TypeError("Invalid statusCode: "+t);return e.receiveResponse=function(){},this.sendRequest(a.C.BYE,e).terminated()},t.prototype.refer=function(e,t){if(void 0===t&&(t={}),this.status!==c.SessionStatus.STATUS_CONFIRMED)throw new h.Exceptions.InvalidStateError(this.status);return this.referContext=new S(this.ua,this,e,t),this.emit("referRequested",this.referContext),this.referContext.refer(t),this.referContext},t.prototype.sendRequest=function(e,t){var r=this;if(void 0===t&&(t={}),t=t||{},!this.dialog)throw new Error("sending request without a dialog");var n=new g.OutgoingRequest(e,this.dialog.remoteTarget,this.ua,{cseq:t.cseq||(this.dialog.localSeqnum+=1),callId:this.dialog.id.callId,fromUri:this.dialog.localUri,fromTag:this.dialog.id.localTag,ToUri:this.dialog.remoteUri,toTag:this.dialog.id.remoteTag,routeSet:this.dialog.routeSet,statusCode:t.statusCode,reasonPhrase:t.reasonPhrase},t.extraHeaders||[],t.body);return new p.RequestSender({request:n,onRequestTimeout:function(){return r.onRequestTimeout()},onTransportError:function(){return r.onTransportError()},receiveResponse:function(e){return(t.receiveResponse||r.receiveNonInviteResponse.bind(r))(e)}},this.ua).send(),this.emit(e.toLowerCase(),n),this},t.prototype.close=function(){if(this.status===c.SessionStatus.STATUS_TERMINATED)return this;for(var e in this.logger.log("closing INVITE session "+this.id),this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close(),this.timers)this.timers[e]&&clearTimeout(this.timers[e]);for(var t in this.dialog&&(this.dialog.terminate(),delete this.dialog),this.earlyDialogs)this.earlyDialogs.hasOwnProperty(t)&&(this.earlyDialogs[t].terminate(),delete this.earlyDialogs[t]);return this.status=c.SessionStatus.STATUS_TERMINATED,this.ua.transport&&this.ua.transport.removeListener("transportError",this.errorListener),delete this.ua.sessions[this.id],this},t.prototype.createDialog=function(e,t,r){void 0===r&&(r=!1);var n,i=e["UAS"===t?"toTag":"fromTag"],s=e["UAS"===t?"fromTag":"toTag"],o=e.callId+i+s;if(r)return!!this.earlyDialogs[o]||((n=new u.Dialog(this,e,t,u.Dialog.C.STATUS_EARLY)).error?(this.logger.error(n.error),this.failed(e,a.C.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[o]=n,!0));if(n=this.earlyDialogs[o]){for(var c in n.update(e,t),this.dialog=n,delete this.earlyDialogs[o],this.earlyDialogs)this.earlyDialogs.hasOwnProperty(c)&&(this.earlyDialogs[c].terminate(),delete this.earlyDialogs[c]);return!0}var h=new u.Dialog(this,e,t);return h.error?(this.logger.error(h.error),this.failed(e,a.C.causes.INTERNAL_ERROR),!1):(this.toTag=e.toTag,this.dialog=h,!0)},t.prototype.hold=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=[]),this.status!==c.SessionStatus.STATUS_WAITING_FOR_ACK&&this.status!==c.SessionStatus.STATUS_CONFIRMED)throw new h.Exceptions.InvalidStateError(this.status);this.localHold?this.logger.log("Session is already on hold, cannot put it on hold again"):(e.modifiers=t,this.sessionDescriptionHandler&&e.modifiers.push(this.sessionDescriptionHandler.holdModifier),this.localHold=!0,this.sendReinvite(e))},t.prototype.unhold=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=[]),this.status!==c.SessionStatus.STATUS_WAITING_FOR_ACK&&this.status!==c.SessionStatus.STATUS_CONFIRMED)throw new h.Exceptions.InvalidStateError(this.status);this.localHold?(e.modifiers=t,this.localHold=!1,this.sendReinvite(e)):this.logger.log("Session is not on hold, cannot unhold it")},t.prototype.reinvite=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=[]),e.modifiers=t,this.sendReinvite(e)},t.prototype.receiveRequest=function(e){switch(e.method){case a.C.BYE:e.reply(200),this.status===c.SessionStatus.STATUS_CONFIRMED&&(this.emit("bye",e),this.terminated(e,a.C.BYE));break;case a.C.INVITE:this.status===c.SessionStatus.STATUS_CONFIRMED&&(this.logger.log("re-INVITE received"),this.receiveReinvite(e));break;case a.C.INFO:if(this.status===c.SessionStatus.STATUS_CONFIRMED||this.status===c.SessionStatus.STATUS_WAITING_FOR_ACK){if(this.onInfo)return this.onInfo(e);var t=e.getHeader("content-type");if(t)if(t.match(/^application\/dtmf-relay/i)){if(e.body){var r=e.body.split("\r\n",2);if(2===r.length){var n=void 0,i=void 0,s=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/;s.test(r[0])&&(n=r[0].replace(s,"$2"));var o=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;o.test(r[1])&&(i=parseInt(r[1].replace(o,"$2"),10)),n&&i&&new f.DTMF(this,n,{duration:i}).init_incoming(e)}}}else e.reply(415,void 0,["Accept: application/dtmf-relay"])}break;case a.C.REFER:if(this.status===c.SessionStatus.STATUS_CONFIRMED)if(this.logger.log("REFER received"),this.referContext=new _(this.ua,e),this.listeners("referRequested").length)this.emit("referRequested",this.referContext);else{this.logger.log("No referRequested listeners, automatically accepting and following the refer");var u={followRefer:!0};this.passedOptions&&(u.inviteOptions=this.passedOptions),this.referContext.accept(u,this.modifiers)}break;case a.C.NOTIFY:if(this.referContext&&this.referContext.type===c.TypeStrings.ReferClientContext&&e.hasHeader("event")&&/^refer(;.*)?$/.test(e.getHeader("event")))return void this.referContext.receiveNotify(e);e.reply(200,"OK"),this.emit("notify",e)}},t.prototype.terminate=function(e){return this},t.prototype.onTransportError=function(){this.status!==c.SessionStatus.STATUS_CONFIRMED&&this.status!==c.SessionStatus.STATUS_TERMINATED&&this.failed(void 0,a.C.causes.CONNECTION_ERROR)},t.prototype.onRequestTimeout=function(){this.status===c.SessionStatus.STATUS_CONFIRMED?this.terminated(void 0,a.C.causes.REQUEST_TIMEOUT):this.status!==c.SessionStatus.STATUS_TERMINATED&&(this.failed(void 0,a.C.causes.REQUEST_TIMEOUT),this.terminated(void 0,a.C.causes.REQUEST_TIMEOUT))},t.prototype.onDialogError=function(e){this.status===c.SessionStatus.STATUS_CONFIRMED?this.terminated(e,a.C.causes.DIALOG_ERROR):this.status!==c.SessionStatus.STATUS_TERMINATED&&(this.failed(e,a.C.causes.DIALOG_ERROR),this.terminated(e,a.C.causes.DIALOG_ERROR))},t.prototype.receiveReinvite=function(e){var t,r=this;if(this.emit("reinvite",this,e),e.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=l.Grammar.nameAddrHeaderParse(e.getHeader("P-Asserted-Identity"))),this.sessionDescriptionHandler){if("0"!==e.getHeader("Content-Length")||e.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||""))return e.reply(415),void this.emit("reinviteFailed",this);t=this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler,this.sessionDescriptionHandlerOptions,this.modifiers))}else t=this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions,this.modifiers);this.receiveRequest=function(e){e.method===a.C.ACK&&r.status===c.SessionStatus.STATUS_WAITING_FOR_ACK?r.sessionDescriptionHandler&&r.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")?(r.hasAnswer=!0,r.sessionDescriptionHandler.setDescription(e.body,r.sessionDescriptionHandlerOptions,r.modifiers).then(function(){clearTimeout(r.timers.ackTimer),clearTimeout(r.timers.invite2xxTimer),r.status=c.SessionStatus.STATUS_CONFIRMED,r.emit("confirmed",e)})):(clearTimeout(r.timers.ackTimer),clearTimeout(r.timers.invite2xxTimer),r.status=c.SessionStatus.STATUS_CONFIRMED,r.emit("confirmed",e)):r.originalReceiveRequest(e)},t.catch(function(t){var n;throw t.type===c.TypeStrings.SessionDescriptionHandlerError?n=500:t.type===c.TypeStrings.RenegotiationError?(r.emit("renegotiationError",t),r.logger.warn(t.toString()),n=488):(r.logger.error(t),n=488),e.reply(n),r.emit("reinviteFailed",r),t}).then(function(t){var n=["Contact: "+r.contact];e.reply(200,void 0,n,t,function(){r.status=c.SessionStatus.STATUS_WAITING_FOR_ACK,r.setACKTimer(),r.emit("reinviteAccepted",r)})})}else this.logger.warn("No SessionDescriptionHandler to reinvite")},t.prototype.sendReinvite=function(e){var t=this;if(void 0===e&&(e={}),this.pendingReinvite)this.logger.warn("Reinvite in progress. Please wait until complete, then try again.");else if(this.sessionDescriptionHandler){this.pendingReinvite=!0,e.modifiers=e.modifiers||[];var r=(e.extraHeaders||[]).slice();r.push("Contact: "+this.contact),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).then(function(e){t.sendRequest(a.C.INVITE,{extraHeaders:r,body:e,receiveResponse:function(e){return t.receiveReinviteResponse(e)}})}).catch(function(e){if(e.type===c.TypeStrings.RenegotiationError)throw t.pendingReinvite=!1,t.emit("renegotiationError",e),t.logger.warn("Renegotiation Error"),t.logger.warn(e.toString()),e;throw t.logger.error("sessionDescriptionHandler error"),t.logger.error(e),e})}else this.logger.warn("No SessionDescriptionHandler, can't reinvite..")},t.prototype.receiveReinviteResponse=function(e){var t=this;if(this.status!==c.SessionStatus.STATUS_TERMINATED)if(this.pendingReinvite){var r=e&&e.statusCode?e.statusCode.toString():"";switch(!0){case/^1[0-9]{2}$/.test(r):break;case/^2[0-9]{2}$/.test(r):if(this.status=c.SessionStatus.STATUS_CONFIRMED,this.emit("ack",e.transaction.sendACK()),this.pendingReinvite=!1,clearTimeout(this.timers.invite2xxTimer),!this.sessionDescriptionHandler||!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")){this.logger.error("2XX response received to re-invite but did not have a description"),this.emit("reinviteFailed",this),this.emit("renegotiationError",new h.Exceptions.RenegotiationError("2XX response received to re-invite but did not have a description"));break}this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).catch(function(e){throw t.logger.error("Could not set the description in 2XX response"),t.logger.error(e),t.emit("reinviteFailed",t),t.emit("renegotiationError",e),t.sendRequest(a.C.BYE,{extraHeaders:["Reason: "+m.Utils.getReasonHeaderValue(488,"Not Acceptable Here")]}),t.terminated(void 0,a.C.causes.INCOMPATIBLE_SDP),e}).then(function(){t.emit("reinviteAccepted",t)});break;default:this.pendingReinvite=!1,this.logger.log("Received a non 1XX or 2XX response to a re-invite"),this.emit("reinviteFailed",this),this.emit("renegotiationError",new h.Exceptions.RenegotiationError("Invalid response to a re-invite"))}}else this.logger.error("Received reinvite response, but have no pending reinvite");else this.logger.error("Received reinvite response, but in STATUS_TERMINATED")},t.prototype.acceptAndTerminate=function(e,t,r){var n=[];return t&&n.push("Reason: "+m.Utils.getReasonHeaderValue(t,r)),(this.dialog||this.createDialog(e,"UAC"))&&(this.emit("ack",e.transaction.sendACK()),this.sendRequest(a.C.BYE,{extraHeaders:n})),this},t.prototype.setInvite2xxTimer=function(e,t){var r=this,n=v.Timers.T1,i=function(){if(r.status===c.SessionStatus.STATUS_WAITING_FOR_ACK){r.logger.log("no ACK received, attempting to retransmit OK");var s=["Contact: "+r.contact];e.reply(200,void 0,s,t),n=Math.min(2*n,v.Timers.T2),r.timers.invite2xxTimer=setTimeout(i,n)}};this.timers.invite2xxTimer=setTimeout(i,n)},t.prototype.setACKTimer=function(){var e=this;this.timers.ackTimer=setTimeout(function(){e.status===c.SessionStatus.STATUS_WAITING_FOR_ACK&&(e.logger.log("no ACK received for an extended period of time, terminating the call"),clearTimeout(e.timers.invite2xxTimer),e.sendRequest(a.C.BYE),e.terminated(void 0,a.C.causes.NO_ACK))},v.Timers.TIMER_H)},t.prototype.failed=function(e,t){return this.status===c.SessionStatus.STATUS_TERMINATED?this:(this.emit("failed",e,t),this)},t.prototype.rejected=function(e,t){return this.emit("rejected",e,t),this},t.prototype.canceled=function(){return this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close(),this.emit("cancel"),this},t.prototype.accepted=function(e,t){return e instanceof String||(t=m.Utils.getReasonPhrase(e&&e.statusCode||0,t)),this.startTime=new Date,this.replacee&&(this.replacee.emit("replaced",this),this.replacee.terminate()),this.emit("accepted",e,t),this},t.prototype.terminated=function(e,t){return this.status===c.SessionStatus.STATUS_TERMINATED?this:(this.endTime=new Date,this.close(),this.emit("terminated",e,t),this)},t.prototype.connecting=function(e){return this.emit("connecting",{request:e}),this},t.prototype.receiveNonInviteResponse=function(e){},t.C=c.SessionStatus,t}(s.EventEmitter);t.Session=y;var T=function(e){function t(t,r){var n=this;if(!t.configuration.sessionDescriptionHandlerFactory)throw t.logger.warn("Can't build ISC without SDH Factory"),new Error("ISC Constructor Failed");n=e.call(this,t.configuration.sessionDescriptionHandlerFactory)||this,d.ServerContext.initializer(n,t,r),n.type=c.TypeStrings.InviteServerContext;var i=r.parseHeader("Content-Disposition");i&&"render"===i.type&&(n.renderbody=r.body,n.rendertype=r.getHeader("Content-Type")),n.status=c.SessionStatus.STATUS_INVITE_RECEIVED,n.fromTag=r.fromTag,n.id=r.callId+n.fromTag,n.request=r,n.contact=n.ua.contact.toString(),n.receiveNonInviteResponse=function(){},n.logger=t.getLogger("sip.inviteservercontext",n.id),n.ua.sessions[n.id]=n;var s=function(e,t){r.hasHeader(e)&&r.getHeader(e).toLowerCase().indexOf("100rel")>=0&&(n.rel100=t)};if(s("require",a.C.supported.REQUIRED),s("supported",a.C.supported.SUPPORTED),r.toTag=m.Utils.newTag(),n.createDialog(r,"UAS",!0)){var o={extraHeaders:["Contact: "+n.contact]};if(n.rel100!==a.C.supported.REQUIRED&&n.progress(o),n.status=c.SessionStatus.STATUS_WAITING_FOR_ANSWER,n.timers.userNoAnswerTimer=setTimeout(function(){r.reply(408),n.failed(r,a.C.causes.NO_ANSWER),n.terminated(r,a.C.causes.NO_ANSWER)},n.ua.configuration.noAnswerTimeout||60),r.hasHeader("expires")){var u=1e3*Number(r.getHeader("expires")||0);n.timers.expiresTimer=setTimeout(function(){n.status===c.SessionStatus.STATUS_WAITING_FOR_ANSWER&&(r.reply(487),n.failed(r,a.C.causes.EXPIRES),n.terminated(r,a.C.causes.EXPIRES))},u)}return n.errorListener=n.onTransportError.bind(n),t.transport&&t.transport.on("transportError",n.errorListener),n}r.reply(500,"Missing Contact header field")}return i(t,e),t.prototype.reject=function(e){var t=this;if(void 0===e&&(e={}),this.status===c.SessionStatus.STATUS_TERMINATED)throw new h.Exceptions.InvalidStateError(this.status);this.logger.log("rejecting RTCSession");var r=e.statusCode||480,n=m.Utils.getReasonPhrase(r,e.reasonPhrase),i=e.extraHeaders||[];if(r<300||r>699)throw new TypeError("Invalid statusCode: "+r);var s=this.request.reply(r,n,i,e.body);return["rejected","failed"].forEach(function(e){t.emit(e,s,n)}),this.terminated()},t.prototype.reply=function(e){return void 0===e&&(e={}),this},t.prototype.terminate=function(e){var t=this;void 0===e&&(e={});var r=(e.extraHeaders||[]).slice();if(this.status===c.SessionStatus.STATUS_WAITING_FOR_ACK&&this.request.serverTransaction&&this.request.serverTransaction.state!==c.TransactionStatus.STATUS_TERMINATED){var n=this.dialog;this.receiveRequest=function(e){e.method===a.C.ACK&&(t.sendRequest(a.C.BYE,{extraHeaders:r}),t.dialog&&t.dialog.terminate())},this.request.serverTransaction.on("stateChanged",function(){t.request.serverTransaction&&t.request.serverTransaction.state===c.TransactionStatus.STATUS_TERMINATED&&t.dialog&&(t.bye(),t.dialog.terminate())}),this.emit("bye",this.request),this.terminated(),this.dialog=n,this.dialog&&(this.ua.dialogs[this.dialog.id.toString()]=this.dialog)}else this.status===c.SessionStatus.STATUS_CONFIRMED?this.bye(e):this.reject(e);return this},t.prototype.progress=function(e){var t=this;void 0===e&&(e={});var r=e.statusCode||180,n=(e.extraHeaders||[]).slice();if(r<100||r>199)throw new TypeError("Invalid statusCode: "+r);if(this.status===c.SessionStatus.STATUS_TERMINATED)return this;var i,s=function(){var r=e.statusCode||183;t.status=c.SessionStatus.STATUS_WAITING_FOR_PRACK,n.push("Contact: "+t.contact),n.push("Require: 100rel"),n.push("RSeq: "+Math.floor(1e4*Math.random())),t.sessionDescriptionHandler?t.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).then(function(i){if(t.status!==c.SessionStatus.STATUS_TERMINATED){t.earlySdp=i.body,t[t.hasOffer?"hasAnswer":"hasOffer"]=!0;var s=v.Timers.T1,o=function(){t.request.reply(r,void 0,n,i),s*=2,t.timers.rel1xxTimer=setTimeout(o,s)};t.timers.rel1xxTimer=setTimeout(o,s),t.timers.prackTimer=setTimeout(function(){t.status===c.SessionStatus.STATUS_WAITING_FOR_PRACK&&(t.logger.log("no PRACK received, rejecting the call"),clearTimeout(t.timers.rel1xxTimer),t.request.reply(504),t.terminated(void 0,a.C.causes.NO_PRACK))},64*v.Timers.T1);var u=t.request.reply(r,e.reasonPhrase,n,i);t.emit("progress",u,e.reasonPhrase)}},function(){t.request.reply(480),t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR)}):t.logger.warn("No SessionDescriptionHandler, can't do 100rel")};return 100!==e.statusCode&&(this.rel100===a.C.supported.REQUIRED||this.rel100===a.C.supported.SUPPORTED&&e.rel100||this.rel100===a.C.supported.SUPPORTED&&this.ua.configuration.rel100===a.C.supported.REQUIRED)?(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type")||"")?(this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,e.sessionDescriptionHandlerOptions,e.modifiers).then(s).catch(function(e){throw t.logger.warn("invalid description"),t.logger.warn(e),t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR),e})):s()):(i=t.request.reply(r,e.reasonPhrase,n,e.body),t.emit("progress",i,e.reasonPhrase)),this},t.prototype.accept=function(e){var t=this;void 0===e&&(e={}),this.onInfo=e.onInfo;var r=(e.extraHeaders||[]).slice(),n=function(e){r.push("Contact: "+t.contact),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.hasOffer?t.hasAnswer=!0:t.hasOffer=!0;var n=t.request.reply(200,void 0,r,e,function(){t.status=c.SessionStatus.STATUS_WAITING_FOR_ACK,t.setInvite2xxTimer(t.request,e),t.setACKTimer()},function(){t.failed(void 0,a.C.causes.CONNECTION_ERROR),t.terminated(void 0,a.C.causes.CONNECTION_ERROR)});t.status!==c.SessionStatus.STATUS_TERMINATED&&t.accepted(n,m.Utils.getReasonPhrase(200))},i=function(e){throw e.type===c.TypeStrings.SessionDescriptionHandlerError&&(t.logger.log(e.message),e.error&&t.logger.log(e.error)),t.request.reply(480),t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR),e};if(this.status===c.SessionStatus.STATUS_WAITING_FOR_PRACK)return this.status=c.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK,this;if(this.status===c.SessionStatus.STATUS_WAITING_FOR_ANSWER)this.status=c.SessionStatus.STATUS_ANSWERED;else if(this.status!==c.SessionStatus.STATUS_EARLY_MEDIA)throw new h.Exceptions.InvalidStateError(this.status);if(!this.createDialog(this.request,"UAS"))return this.request.reply(500,"Missing Contact header field"),this;if(clearTimeout(this.timers.userNoAnswerTimer),this.status===c.SessionStatus.STATUS_EARLY_MEDIA)n({});else if(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),"0"!==this.request.getHeader("Content-Length")||this.request.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type")||""))return this.request.reply(415),this;this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,e.sessionDescriptionHandlerOptions,e.modifiers).then(function(){if(!t.sessionDescriptionHandler)throw new Error("No SDH");return t.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers)}).catch(i).then(n)}else this.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).catch(i).then(n);return this},t.prototype.receiveRequest=function(e){var t=this,r=function(){clearTimeout(t.timers.ackTimer),clearTimeout(t.timers.invite2xxTimer),t.status=c.SessionStatus.STATUS_CONFIRMED;var r=e.getHeader("Content-Disposition");r&&"render"===r.type&&(t.renderbody=e.body,t.rendertype=e.getHeader("Content-Type")),t.emit("confirmed",e)};switch(e.method){case a.C.CANCEL:this.status!==c.SessionStatus.STATUS_WAITING_FOR_ANSWER&&this.status!==c.SessionStatus.STATUS_WAITING_FOR_PRACK&&this.status!==c.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK&&this.status!==c.SessionStatus.STATUS_EARLY_MEDIA&&this.status!==c.SessionStatus.STATUS_ANSWERED||(this.status=c.SessionStatus.STATUS_CANCELED,this.request.reply(487),this.canceled(),this.rejected(e,a.C.causes.CANCELED),this.failed(e,a.C.causes.CANCELED),this.terminated(e,a.C.causes.CANCELED));break;case a.C.ACK:this.status===c.SessionStatus.STATUS_WAITING_FOR_ACK&&(this.status=c.SessionStatus.STATUS_CONFIRMED,this.sessionDescriptionHandler&&this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).catch(function(r){throw t.logger.warn(r),t.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION),t.terminated(e,a.C.causes.BAD_MEDIA_DESCRIPTION),r}).then(function(){return r()})):r());break;case a.C.PRACK:this.status===c.SessionStatus.STATUS_WAITING_FOR_PRACK||this.status===c.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK?this.hasAnswer?(clearTimeout(this.timers.rel1xxTimer),clearTimeout(this.timers.prackTimer),e.reply(200),this.status===c.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=c.SessionStatus.STATUS_EARLY_MEDIA,this.accept()),this.status=c.SessionStatus.STATUS_EARLY_MEDIA):(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){clearTimeout(t.timers.rel1xxTimer),clearTimeout(t.timers.prackTimer),e.reply(200),t.status===c.SessionStatus.STATUS_ANSWERED_WAITING_FOR_PRACK&&(t.status=c.SessionStatus.STATUS_EARLY_MEDIA,t.accept()),t.status=c.SessionStatus.STATUS_EARLY_MEDIA},function(r){t.logger.warn(r),t.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION),t.terminated(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})):(this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(e,a.C.causes.BAD_MEDIA_DESCRIPTION))):this.status===c.SessionStatus.STATUS_EARLY_MEDIA&&e.reply(200);break;default:y.prototype.receiveRequest.apply(this,[e])}},t.prototype.setupSessionDescriptionHandler=function(){return this.sessionDescriptionHandler?this.sessionDescriptionHandler:this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions)},t}(y);t.InviteServerContext=T;var b=function(e){function t(t,r,n,i){void 0===n&&(n={}),void 0===i&&(i=[]);var s=this;if(!t.configuration.sessionDescriptionHandlerFactory)throw t.logger.warn("Can't build ISC without SDH Factory"),new Error("ICC Constructor Failed");n.params=n.params||{};var u=n.anonymous||!1,l=m.Utils.newTag();n.params.fromTag=l;var p=t.contact.toString({anonymous:u,outbound:u?!t.contact.temp_gruu:!t.contact.pub_gruu}),d=(n.extraHeaders||[]).slice();if(u&&t.configuration.uri&&(n.params.from_displayName="Anonymous",n.params.from_uri="sip:anonymous@anonymous.invalid",d.push("P-Preferred-Identity: "+t.configuration.uri.toString()),d.push("Privacy: id")),d.push("Contact: "+p),d.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.configuration.rel100===a.C.supported.REQUIRED&&d.push("Require: 100rel"),t.configuration.replaces===a.C.supported.REQUIRED&&d.push("Require: replaces"),n.extraHeaders=d,s=e.call(this,t.configuration.sessionDescriptionHandlerFactory)||this,o.ClientContext.initializer(s,t,a.C.INVITE,r,n),s.type=c.TypeStrings.InviteClientContext,s.passedOptions=n,s.sessionDescriptionHandlerOptions=n.sessionDescriptionHandlerOptions||{},s.modifiers=i,s.inviteWithoutSdp=n.inviteWithoutSdp||!1,s.anonymous=n.anonymous||!1,s.renderbody=n.renderbody||void 0,s.rendertype=n.rendertype||"text/plain",s.fromTag=l,s.contact=p,s.status!==c.SessionStatus.STATUS_NULL)throw new h.Exceptions.InvalidStateError(s.status);return s.isCanceled=!1,s.received100=!1,s.method=a.C.INVITE,s.logger=t.getLogger("sip.inviteclientcontext"),t.applicants[s.toString()]=s,s.id=s.request.callId+s.fromTag,s.onInfo=n.onInfo,s.errorListener=s.onTransportError.bind(s),t.transport&&t.transport.on("transportError",s.errorListener),s}return i(t,e),t.prototype.receiveNonInviteResponse=function(e){this.receiveInviteResponse(e)},t.prototype.receiveResponse=function(e){this.receiveInviteResponse(e)},t.prototype.send=function(){return new p.RequestSender(this,this.ua).send(),this},t.prototype.invite=function(){var e=this;return this.ua.sessions[this.id]=this,Promise.resolve().then(function(){e.inviteWithoutSdp?(e.request.body=e.renderbody,e.status=c.SessionStatus.STATUS_INVITE_SENT,e.send()):(e.sessionDescriptionHandler=e.sessionDescriptionHandlerFactory(e,e.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),e.emit("SessionDescriptionHandler-created",e.sessionDescriptionHandler),e.sessionDescriptionHandler.getDescription(e.sessionDescriptionHandlerOptions,e.modifiers).then(function(t){e.isCanceled||e.status===c.SessionStatus.STATUS_TERMINATED||(e.hasOffer=!0,e.request.body=t,e.status=c.SessionStatus.STATUS_INVITE_SENT,e.send())},function(t){t.type===c.TypeStrings.SessionDescriptionHandlerError&&(e.logger.log(t.message),t.error&&e.logger.log(t.error)),e.status!==c.SessionStatus.STATUS_TERMINATED&&(e.failed(void 0,a.C.causes.WEBRTC_ERROR),e.terminated(void 0,a.C.causes.WEBRTC_ERROR))}))}),this},t.prototype.receiveInviteResponse=function(e){var t=this;if(this.status!==c.SessionStatus.STATUS_TERMINATED&&e.method===a.C.INVITE){var r=e.callId+e.fromTag+e.toTag,n=[];if(this.dialog&&e.statusCode&&e.statusCode>=200&&e.statusCode<=299){if(r!==this.dialog.id.toString()){if(!this.createDialog(e,"UAC",!0))return;return this.emit("ack",e.transaction.sendACK({body:m.Utils.generateFakeSDP(e.body)})),this.earlyDialogs[r].sendRequest(this,a.C.BYE),void(this.status!==c.SessionStatus.STATUS_CONFIRMED&&(this.failed(e,a.C.causes.WEBRTC_ERROR),this.terminated(e,a.C.causes.WEBRTC_ERROR)))}if(this.status===c.SessionStatus.STATUS_CONFIRMED)return void this.emit("ack",e.transaction.sendACK());if(!this.hasAnswer)return}var i=e&&e.statusCode;if(this.dialog&&i&&i<200){var s=e.getHeader("rseq");if(s&&(-1!==this.dialog.pracked.indexOf(s)||Number(this.dialog.pracked[this.dialog.pracked.length-1])>=Number(s)&&this.dialog.pracked.length>0))return;if(!this.earlyDialogs[r]&&!this.createDialog(e,"UAC",!0))return;if(-1!==this.earlyDialogs[r].pracked.indexOf(e.getHeader("rseq"))||this.earlyDialogs[r].pracked[this.earlyDialogs[r].pracked.length-1]>=Number(s)&&this.earlyDialogs[r].pracked.length>0)return;return n.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),this.earlyDialogs[r].pracked.push(e.getHeader("rseq")),void this.earlyDialogs[r].sendRequest(this,a.C.PRACK,{extraHeaders:n,body:m.Utils.generateFakeSDP(e.body)})}if(this.isCanceled){if(i&&i>=100&&i<200)this.request.cancel(this.cancelReason,n),this.canceled();else if(i&&i>=200&&i<299)this.acceptAndTerminate(e),this.emit("bye",this.request);else if(i&&i>=300){var o=a.C.REASON_PHRASE[e.statusCode||0]||a.C.causes.CANCELED;this.rejected(e,o),this.failed(e,o),this.terminated(e,o)}}else{var u=i?i.toString():"";switch(!0){case/^100$/.test(u):this.received100=!0,this.emit("progress",e);break;case/^1[0-9]{2}$/.test(u):if(!e.toTag){this.logger.warn("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this.createDialog(e,"UAC",!0))break;if(this.status=c.SessionStatus.STATUS_1XX_RECEIVED,e.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=l.Grammar.nameAddrHeaderParse(e.getHeader("P-Asserted-Identity"))),e.hasHeader("require")&&-1!==e.getHeader("require").indexOf("100rel")){if(this.dialog||!this.earlyDialogs[r])break;var h=e.getHeader("rseq");if(-1!==this.earlyDialogs[r].pracked.indexOf(h)||this.earlyDialogs[r].pracked[this.earlyDialogs[r].pracked.length-1]>=Number(h)&&this.earlyDialogs[r].pracked.length>0)return;if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||""))if(this.hasOffer){if(!this.createDialog(e,"UAC"))break;this.hasAnswer=!0,void 0!==this.dialog&&h&&this.dialog.pracked.push(h),this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){n.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),t.sendRequest(a.C.PRACK,{extraHeaders:n,receiveResponse:function(){}}),t.status=c.SessionStatus.STATUS_EARLY_MEDIA,t.emit("progress",e)},function(r){t.logger.warn(r),t.acceptAndTerminate(e,488,"Not Acceptable Here"),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})}else{var p=this.earlyDialogs[r];p.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),this.emit("SessionDescriptionHandler-created",p.sessionDescriptionHandler),h&&p.pracked.push(h),p.sessionDescriptionHandler&&p.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){return p.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers)}).then(function(r){n.push("RAck: "+h+" "+e.getHeader("cseq")),p.sendRequest(t,a.C.PRACK,{extraHeaders:n,body:r}),t.status=c.SessionStatus.STATUS_EARLY_MEDIA,t.emit("progress",e)}).catch(function(e){if(h&&e.type===c.TypeStrings.SessionDescriptionHandlerError){if(p.pracked.push(h),t.status===c.SessionStatus.STATUS_TERMINATED)return;t.failed(void 0,a.C.causes.WEBRTC_ERROR),t.terminated(void 0,a.C.causes.WEBRTC_ERROR)}else h&&p.pracked.splice(p.pracked.indexOf(h),1),t.logger.warn("invalid description"),t.logger.warn(e)})}else n.push("RAck: "+e.getHeader("rseq")+" "+e.getHeader("cseq")),this.earlyDialogs[r].pracked.push(e.getHeader("rseq")),this.earlyDialogs[r].sendRequest(this,a.C.PRACK,{extraHeaders:n}),this.emit("progress",e)}else this.emit("progress",e);break;case/^2[0-9]{2}$/.test(u):if(this.request.cseq+" "+this.request.method!==e.getHeader("cseq"))break;if(e.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=l.Grammar.nameAddrHeaderParse(e.getHeader("P-Asserted-Identity"))),this.status===c.SessionStatus.STATUS_EARLY_MEDIA&&this.dialog){this.status=c.SessionStatus.STATUS_CONFIRMED;var d={};this.renderbody&&(n.push("Content-Type: "+this.rendertype),d.extraHeaders=n,d.body=this.renderbody),this.emit("ack",e.transaction.sendACK(d)),this.accepted(e);break}if(this.dialog)break;if(this.hasOffer)if(this.hasAnswer){d={};this.renderbody&&(n.push("Content-Type: "+this.rendertype),d.extraHeaders=n,d.body=this.renderbody),this.emit("ack",e.transaction.sendACK(d))}else{if(!this.sessionDescriptionHandler||!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")){this.acceptAndTerminate(e,400,"Missing session description"),this.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(e,"UAC"))break;this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){var r={};t.status=c.SessionStatus.STATUS_CONFIRMED,t.renderbody&&(n.push("Content-Type: "+t.rendertype),r.extraHeaders=n,r.body=t.renderbody),t.emit("ack",e.transaction.sendACK(r)),t.accepted(e)},function(r){t.logger.warn(r),t.acceptAndTerminate(e,488,"Not Acceptable Here"),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION)})}else if(this.earlyDialogs[r]&&this.earlyDialogs[r].sessionDescriptionHandler){if(this.hasOffer=!0,this.hasAnswer=!0,this.sessionDescriptionHandler=this.earlyDialogs[r].sessionDescriptionHandler,!this.createDialog(e,"UAC"))break;this.status=c.SessionStatus.STATUS_CONFIRMED,this.emit("ack",e.transaction.sendACK()),this.accepted(e)}else{if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions||{}),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),!this.sessionDescriptionHandler.hasDescription(e.getHeader("Content-Type")||"")){this.acceptAndTerminate(e,400,"Missing session description"),this.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(e,"UAC"))break;this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(e.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){return t.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers)}).then(function(r){t.isCanceled||t.status===c.SessionStatus.STATUS_TERMINATED||(t.status=c.SessionStatus.STATUS_CONFIRMED,t.hasAnswer=!0,t.emit("ack",e.transaction.sendACK({body:r})),t.accepted(e))}).catch(function(r){r.type===c.TypeStrings.SessionDescriptionHandlerError&&(t.logger.warn("invalid description"),t.logger.warn(r.toString()),t.acceptAndTerminate(e,488,"Invalid session description"),t.failed(e,a.C.causes.BAD_MEDIA_DESCRIPTION))})}break;default:o=m.Utils.sipErrorCause(i||0);this.rejected(e,o),this.failed(e,o),this.terminated(e,o)}}}},t.prototype.cancel=function(e){if(void 0===e&&(e={}),e.extraHeaders=(e.extraHeaders||[]).slice(),this.isCanceled)throw new h.Exceptions.InvalidStateError(c.SessionStatus.STATUS_CANCELED);if(this.status===c.SessionStatus.STATUS_TERMINATED||this.status===c.SessionStatus.STATUS_CONFIRMED)throw new h.Exceptions.InvalidStateError(this.status);this.logger.log("canceling RTCSession"),this.isCanceled=!0;var t=m.Utils.getCancelReason(e.statusCode,e.reasonPhrase);return this.status===c.SessionStatus.STATUS_NULL||this.status===c.SessionStatus.STATUS_INVITE_SENT&&!this.received100?this.cancelReason=t:this.status!==c.SessionStatus.STATUS_INVITE_SENT&&this.status!==c.SessionStatus.STATUS_1XX_RECEIVED&&this.status!==c.SessionStatus.STATUS_EARLY_MEDIA||this.request.cancel(t,e.extraHeaders),this.canceled()},t.prototype.terminate=function(e){return this.status===c.SessionStatus.STATUS_TERMINATED?this:(this.status===c.SessionStatus.STATUS_WAITING_FOR_ACK||this.status===c.SessionStatus.STATUS_CONFIRMED?this.bye(e):this.cancel(e),this)},t.prototype.receiveRequest=function(t){return t.method,a.C.CANCEL,t.method===a.C.ACK&&this.status===c.SessionStatus.STATUS_WAITING_FOR_ACK&&(clearTimeout(this.timers.ackTimer),clearTimeout(this.timers.invite2xxTimer),this.status=c.SessionStatus.STATUS_CONFIRMED,this.accepted()),e.prototype.receiveRequest.call(this,t)},t}(y);t.InviteClientContext=b;var S=function(e){function t(t,r,n,i){void 0===i&&(i={});var s=this;if(void 0===t||void 0===r||void 0===n)throw new TypeError("Not enough arguments");if((s=e.call(this,t,a.C.REFER,r.remoteIdentity.uri.toString(),i)||this).type=c.TypeStrings.ReferClientContext,s.options=i,s.extraHeaders=(s.options.extraHeaders||[]).slice(),s.applicant=r,"string"==typeof n||n.type!==c.TypeStrings.InviteServerContext&&n.type!==c.TypeStrings.InviteClientContext){var o=l.Grammar.parse(n,"Refer_To");s.target=o&&o.uri?o.uri:n;var u=s.ua.normalizeTarget(s.target);if(!u)throw new TypeError("Invalid target: "+n);s.target=u}else{var h=n.dialog;if(!h)throw new TypeError("Invalid target due to no dialog: "+n);s.target='"'+n.remoteIdentity.friendlyName+'" <'+h.remoteTarget.toString()+"?Replaces="+h.id.callId+"%3Bto-tag%3D"+h.id.remoteTag+"%3Bfrom-tag%3D"+h.id.localTag+">"}return s.ua&&s.extraHeaders.push("Referred-By: <"+s.ua.configuration.uri+">"),s.extraHeaders.push("Contact: "+r.contact),s.extraHeaders.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),s.extraHeaders.push("Refer-To: "+s.target),s.errorListener=s.onTransportError.bind(s),t.transport&&t.transport.on("transportError",s.errorListener),s}return i(t,e),t.prototype.refer=function(e){var t=this;void 0===e&&(e={});var r=(this.extraHeaders||[]).slice();return e.extraHeaders&&r.concat(e.extraHeaders),this.applicant.sendRequest(a.C.REFER,{extraHeaders:this.extraHeaders,receiveResponse:function(r){var n=r&&r.statusCode?r.statusCode.toString():"";/^1[0-9]{2}$/.test(n)?t.emit("referRequestProgress",t):/^2[0-9]{2}$/.test(n)?t.emit("referRequestAccepted",t):/^[4-6][0-9]{2}$/.test(n)&&t.emit("referRequestRejected",t),e.receiveResponse&&e.receiveResponse(r)}}),this},t.prototype.receiveNotify=function(e){var t=e.hasHeader("Content-Type")?e.getHeader("Content-Type"):void 0;if(t&&-1!==t.search(/^message\/sipfrag/)){var r=l.Grammar.parse(e.body,"sipfrag");if(-1===r)return void e.reply(489,"Bad Event");switch(!0){case/^1[0-9]{2}$/.test(r.statusCode):this.emit("referProgress",this);break;case/^2[0-9]{2}$/.test(r.statusCode):this.emit("referAccepted",this),!this.options.activeAfterTransfer&&this.applicant.terminate&&this.applicant.terminate();break;default:this.emit("referRejected",this)}return e.reply(200),void this.emit("notify",e)}e.reply(489,"Bad Event")},t}(o.ClientContext);t.ReferClientContext=S;var _=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type=c.TypeStrings.ReferServerContext,n.ua=t,n.status=c.SessionStatus.STATUS_INVITE_RECEIVED,n.fromTag=r.fromTag,n.id=r.callId+n.fromTag,n.request=r,n.contact=n.ua.contact.toString(),n.logger=t.getLogger("sip.referservercontext",n.id),n.cseq=Math.floor(1e4*Math.random()),n.callId=n.request.callId,n.fromUri=n.request.to.uri,n.fromTag=n.request.to.parameters.tag,n.remoteTarget=n.request.headers.Contact[0].parsed.uri,n.toUri=n.request.from.uri,n.toTag=n.request.fromTag,n.routeSet=n.request.getHeaders("record-route"),n.request.hasHeader("refer-to")?(n.referTo=n.request.parseHeader("refer-to"),n.referredSession=n.ua.findSession(r),n.request.hasHeader("referred-by")&&(n.referredBy=n.request.getHeader("referred-by")),n.referTo.uri.hasHeader("replaces")&&(n.replaces=n.referTo.uri.getHeader("replaces")),n.errorListener=n.onTransportError.bind(n),t.transport&&t.transport.on("transportError",n.errorListener),n.status=c.SessionStatus.STATUS_WAITING_FOR_ANSWER,n):(n.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting refer."),n.reject(),n)}return i(t,e),t.prototype.receiveNonInviteResponse=function(e){},t.prototype.progress=function(){if(this.status!==c.SessionStatus.STATUS_WAITING_FOR_ANSWER)throw new h.Exceptions.InvalidStateError(this.status);this.request.reply(100)},t.prototype.reject=function(t){if(void 0===t&&(t={}),this.status===c.SessionStatus.STATUS_TERMINATED)throw new h.Exceptions.InvalidStateError(this.status);this.logger.log("Rejecting refer"),this.status=c.SessionStatus.STATUS_TERMINATED,e.prototype.reject.call(this,t),this.emit("referRequestRejected",this)},t.prototype.accept=function(e,t){var r=this;if(void 0===e&&(e={}),this.status!==c.SessionStatus.STATUS_WAITING_FOR_ANSWER)throw new h.Exceptions.InvalidStateError(this.status);if(this.status=c.SessionStatus.STATUS_ANSWERED,this.request.reply(202,"Accepted"),this.emit("referRequestAccepted",this),e.followRefer){this.logger.log("Accepted refer, attempting to automatically follow it");var n=this.referTo.uri;if(!n.scheme||!n.scheme.match("^sips?$"))return this.logger.error("SIP.js can only automatically follow SIP refer target"),void this.reject();var i=e.inviteOptions||{},s=(i.extraHeaders||[]).slice();if(this.replaces&&s.push("Replaces: "+decodeURIComponent(this.replaces)),this.referredBy&&s.push("Referred-By: "+this.referredBy),i.extraHeaders=s,n.clearHeaders(),this.targetSession=this.ua.invite(n.toString(),i,t),this.emit("referInviteSent",this),this.targetSession){this.targetSession.once("progress",function(e){var t=e.statusCode||100,n=e.reasonPhrase;r.sendNotify(("SIP/2.0 "+t+" "+n).trim()),r.emit("referProgress",r),r.referredSession&&r.referredSession.emit("referProgress",r)}),this.targetSession.once("accepted",function(){r.logger.log("Successfully followed the refer"),r.sendNotify("SIP/2.0 200 OK"),r.emit("referAccepted",r),r.referredSession&&r.referredSession.emit("referAccepted",r)});var o=function(e){if(r.status!==c.SessionStatus.STATUS_TERMINATED){if(r.logger.log("Refer was not successful. Resuming session"),e&&429===e.statusCode)return r.logger.log("Alerting referrer that identity is required."),void r.sendNotify("SIP/2.0 429 Provide Referrer Identity");r.sendNotify("SIP/2.0 603 Declined"),r.status=c.SessionStatus.STATUS_TERMINATED,r.emit("referRejected",r),r.referredSession&&r.referredSession.emit("referRejected")}};this.targetSession.once("rejected",o),this.targetSession.once("failed",o)}}else this.logger.log("Accepted refer, but did not automatically follow it"),this.sendNotify("SIP/2.0 200 OK"),this.emit("referAccepted",this),this.referredSession&&this.referredSession.emit("referAccepted",this)},t.prototype.sendNotify=function(e){if(this.status!==c.SessionStatus.STATUS_ANSWERED)throw new h.Exceptions.InvalidStateError(this.status);if(-1===l.Grammar.parse(e,"sipfrag"))throw new Error("sipfrag body is required to send notify for refer");var t=new g.OutgoingRequest(a.C.NOTIFY,this.remoteTarget,this.ua,{cseq:this.cseq+=1,callId:this.callId,fromUri:this.fromUri,fromTag:this.fromTag,toUri:this.toUri,toTag:this.toTag,routeSet:this.routeSet},["Event: refer","Subscription-State: terminated","Content-Type: message/sipfrag"],e);new p.RequestSender({request:t,onRequestTimeout:function(){},onTransportError:function(){},receiveResponse:function(){}},this.ua).send()},t}(d.ServerContext);t.ReferServerContext=_},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(8),o=r(1),a=r(13),u=r(0),c=r(12),h=r(2),l=function(e){function t(t,r,n,i){void 0===i&&(i={});var s,a=this;if(!n)throw new TypeError("Event necessary to create a subscription.");return i.extraHeaders=(i.extraHeaders||[]).slice(),"number"!=typeof i.expires?(t.logger.warn("expires must be a number. Using default of 3600."),s=3600):s=i.expires,i.extraHeaders.push("Event: "+n),i.extraHeaders.push("Expires: "+s),i.extraHeaders.push("Contact: "+t.contact.toString()),i.extraHeaders.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),(a=e.call(this,t,o.C.SUBSCRIBE,r,i)||this).type=u.TypeStrings.Subscription,a.event=n,a.requestedExpires=s,a.state="init",a.contact=t.contact.toString(),a.extraHeaders=i.extraHeaders,a.logger=t.getLogger("sip.subscription"),a.expires=s,a.timers={N:void 0,subDuration:void 0},a.errorCodes=[404,405,410,416,480,481,482,483,484,485,489,501,604],a}return i(t,e),t.prototype.subscribe=function(){var e=this;return"active"===this.state?(this.refresh(),this):"notify_wait"===this.state?this:(clearTimeout(this.timers.subDuration),clearTimeout(this.timers.N),this.timers.N=setTimeout(function(){return e.timer_fire()},c.Timers.TIMER_N),this.request&&this.request.from&&(this.ua.earlySubscriptions[this.request.callId+this.request.from.parameters.tag+this.event]=this),this.send(),this.state="notify_wait",this)},t.prototype.refresh=function(){"terminated"!==this.state&&"pending"!==this.state&&"notify_wait"!==this.state&&this.dialog&&this.dialog.sendRequest(this,o.C.SUBSCRIBE,{extraHeaders:this.extraHeaders,body:this.body})},t.prototype.receiveResponse=function(e){var t=this,r=e.statusCode?e.statusCode:0,n=h.Utils.getReasonPhrase(r);if("notify_wait"===this.state&&r>=300||"notify_wait"!==this.state&&-1!==this.errorCodes.indexOf(r))this.failed(e,void 0);else if(/^2[0-9]{2}$/.test(r.toString())){this.emit("accepted",e,n);var i=e.getHeader("Expires");i&&Number(i)<=this.requestedExpires?(this.expires=Number(i),this.timers.subDuration=setTimeout(function(){return t.refresh()},900*Number(i))):i?(this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),this.failed(e,"Invalid Expires Header")):(this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE"),this.failed(e,"Expires Header Missing"))}else r>300&&(this.emit("failed",e,n),this.emit("rejected",e,n))},t.prototype.unsubscribe=function(){var e=this,t=[];this.state="terminated",t.push("Event: "+this.event),t.push("Expires: 0"),t.push("Contact: "+this.contact),t.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.receiveResponse=function(){},this.dialog&&this.dialog.sendRequest(this,o.C.SUBSCRIBE,{extraHeaders:t,body:this.body}),clearTimeout(this.timers.subDuration),clearTimeout(this.timers.N),this.timers.N=setTimeout(function(){return e.timer_fire()},c.Timers.TIMER_N),this.emit("terminated")},t.prototype.receiveRequest=function(e){var t,r=this,n=function(){t.expires&&(clearTimeout(r.timers.subDuration),t.expires=Math.min(r.expires,Math.max(t.expires,0)),r.timers.subDuration=setTimeout(function(){return r.refresh()},900*t.expires))};if(this.matchEvent(e))if(this.dialog||this.createConfirmedDialog(e,"UAS")&&this.dialog&&(this.id=this.dialog.id.toString(),this.request&&this.request.from&&(delete this.ua.earlySubscriptions[this.request.callId+this.request.from.parameters.tag+this.event],this.ua.subscriptions[this.id||""]=this)),t=e.parseHeader("Subscription-State"),e.reply(200),clearTimeout(this.timers.N),this.emit("notify",{request:e}),"terminated"!==this.state)switch(t.state){case"active":this.state="active",n();break;case"pending":"notify_wait"===this.state&&n(),this.state="pending";break;case"terminated":if(clearTimeout(this.timers.subDuration),t.reason)switch(this.logger.log("terminating subscription with reason "+t.reason),t.reason){case"deactivated":case"timeout":return void this.subscribe();case"probation":case"giveup":return void(t.params&&t.params["retry-after"]?this.timers.subDuration=setTimeout(function(){return r.subscribe()},t.params["retry-after"]):this.subscribe())}this.close()}else"terminated"===t.state&&(this.terminateDialog(),clearTimeout(this.timers.N),clearTimeout(this.timers.subDuration),delete this.ua.subscriptions[this.id||""]);else e.reply(489)},t.prototype.close=function(){"notify_wait"===this.state?(this.state="terminated",clearTimeout(this.timers.N),clearTimeout(this.timers.subDuration),this.receiveResponse=function(){},this.request&&this.request.from&&delete this.ua.earlySubscriptions[this.request.callId+this.request.from.parameters.tag+this.event],this.emit("terminated")):"terminated"!==this.state&&this.unsubscribe()},t.prototype.onDialogError=function(e){this.failed(e,o.C.causes.DIALOG_ERROR)},t.prototype.timer_fire=function(){"terminated"===this.state?(this.terminateDialog(),clearTimeout(this.timers.N),clearTimeout(this.timers.subDuration),delete this.ua.subscriptions[this.id||""]):"notify_wait"===this.state||"pending"===this.state?this.close():this.refresh()},t.prototype.createConfirmedDialog=function(e,t){this.terminateDialog();var r=new a.Dialog(this,e,t);return this.request&&(r.inviteSeqnum=this.request.cseq,r.localSeqnum=this.request.cseq),!r.error&&(this.dialog=r,!0)},t.prototype.terminateDialog=function(){this.dialog&&(delete this.ua.subscriptions[this.id||""],this.dialog.terminate(),delete this.dialog)},t.prototype.failed=function(e,t){return this.close(),this.emit("failed",e,t),this.emit("rejected",e,t),this},t.prototype.matchEvent=function(e){if(!e.hasHeader("Event"))return this.logger.warn("missing Event header"),!1;if(!e.hasHeader("Subscription-State"))return this.logger.warn("missing Subscription-State header"),!1;var t=e.parseHeader("event").event;return this.event===t||(this.logger.warn("event match failed"),e.reply(481,"Event Match Failed"),!1)},t}(s.ClientContext);t.Subscription=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(0),a=function(e){function t(t,r){var n=e.call(this)||this;return n.type=o.TypeStrings.Transport,n.logger=t,n}return i(t,e),t.prototype.connect=function(e){var t=this;return void 0===e&&(e={}),this.connectPromise(e).then(function(e){e.overrideEvent||t.emit("connected")})},t.prototype.send=function(e,t){var r=this;return void 0===t&&(t={}),this.sendPromise(e).then(function(e){e.overrideEvent||r.emit("messageSent",e.msg)})},t.prototype.disconnect=function(e){var t=this;return void 0===e&&(e={}),this.disconnectPromise(e).then(function(e){e.overrideEvent||t.emit("disconnected")})},t.prototype.afterConnected=function(e){this.isConnected()?e():this.once("connected",e)},t.prototype.waitForConnected=function(){var e=this;return console.warn("DEPRECATION WARNING Transport.waitForConnected(): use afterConnected() instead"),new Promise(function(t){e.afterConnected(t)})},t}(s.EventEmitter);t.Transport=a},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(8),a=r(1),u=r(18),c=r(0),h=r(5),l=r(4),p=r(19),d=r(20),f=r(21),g=r(22),v=r(23),m=r(14),y=r(24),T=r(25),b=r(10),S=r(11),_=r(2),C=r(28),E=r(29),w=e.window||e,A=function(t){function r(e){var n=t.call(this)||this;n.type=c.TypeStrings.UA,n.log=new p.LoggerFactory,n.logger=n.getLogger("sip.ua"),n.cache={credentials:{}},n.configuration={},n.dialogs={},n.applicants={},n.data={},n.sessions={},n.subscriptions={},n.earlySubscriptions={},n.publishers={},n.status=c.UAStatus.STATUS_INIT,n.transactions={nist:{},nict:{},ist:{},ict:{}},void 0===e?e={}:("string"==typeof e||e instanceof String)&&(e={uri:e}),e.log&&(e.log.hasOwnProperty("builtinEnabled")&&(n.log.builtinEnabled=e.log.builtinEnabled),e.log.hasOwnProperty("level")&&(n.log.level=e.log.level),e.log.hasOwnProperty("connector")&&(n.log.connector=e.log.connector));try{n.loadConfig(e)}catch(e){throw n.status=c.UAStatus.STATUS_NOT_READY,n.error=r.C.CONFIGURATION_ERROR,e}return n.registerContext=new g.RegisterContext(n,e.registerOptions),n.registerContext.on("failed",n.emit.bind(n,"registrationFailed")),n.registerContext.on("registered",n.emit.bind(n,"registered")),n.registerContext.on("unregistered",n.emit.bind(n,"unregistered")),n.configuration.autostart&&n.start(),n}return i(r,t),Object.defineProperty(r.prototype,"transactionsCount",{get:function(){for(var e=0,t=0,r=["nist","nict","ist","ict"];t<r.length;t++){var n=r[t];e+=Object.keys(this.transactions[n]).length}return e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nictTransactionsCount",{get:function(){return Object.keys(this.transactions.nict).length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nistTransactionsCount",{get:function(){return Object.keys(this.transactions.nist).length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ictTransactionsCount",{get:function(){return Object.keys(this.transactions.ict).length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"istTransactionsCount",{get:function(){return Object.keys(this.transactions.ist).length},enumerable:!0,configurable:!0}),r.prototype.register=function(e){return void 0===e&&(e={}),e.register&&(this.configuration.register=!0),this.registerContext.register(e),this},r.prototype.unregister=function(e){var t=this;return this.configuration.register=!1,this.transport&&this.transport.afterConnected(function(){t.registerContext.unregister(e)}),this},r.prototype.isRegistered=function(){return this.registerContext.registered},r.prototype.invite=function(e,t,r){var n=this,i=new y.InviteClientContext(this,e,t,r);return this.transport&&this.transport.afterConnected(function(){i.invite(),n.emit("inviteSent",i)}),i},r.prototype.subscribe=function(e,t,r){var n=new T.Subscription(this,e,t,r);return this.transport&&this.transport.afterConnected(function(){return n.subscribe()}),n},r.prototype.publish=function(e,t,r,n){var i=new f.PublishContext(this,e,t,n);return this.transport&&this.transport.afterConnected(function(){i.publish(r)}),i},r.prototype.message=function(e,t,r){if(void 0===r&&(r={}),void 0===t)throw new TypeError("Not enough arguments");return r.contentType=r.contentType||"text/plain",r.body=t,this.request(a.C.MESSAGE,e,r)},r.prototype.request=function(e,t,r){var n=new o.ClientContext(this,e,t,r);return this.transport&&this.transport.afterConnected(function(){return n.send()}),n},r.prototype.stop=function(){var t=this;if(this.logger.log("user requested closure..."),this.status===c.UAStatus.STATUS_USER_CLOSED)return this.logger.warn("UA already closed"),this;for(var r in this.logger.log("closing registerContext"),this.registerContext.close(),this.sessions)this.sessions[r]&&(this.logger.log("closing session "+r),this.sessions[r].terminate());for(var n in this.subscriptions)this.subscriptions[n]&&(this.logger.log("unsubscribing from subscription "+n),this.subscriptions[n].close());for(var i in this.earlySubscriptions)this.earlySubscriptions[i]&&(this.logger.log("unsubscribing from early subscription "+i),this.earlySubscriptions[i].close());for(var s in this.publishers)this.publishers[s]&&(this.logger.log("unpublish "+s),this.publishers[s].close());for(var o in this.applicants)this.applicants[o]&&this.applicants[o].close();if(this.status=c.UAStatus.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount&&this.transport)this.transport.disconnect();else{var a=function(){0===t.nistTransactionsCount&&0===t.nictTransactionsCount&&(t.removeListener("transactionDestroyed",a),t.transport&&t.transport.disconnect())};this.on("transactionDestroyed",a)}return"function"==typeof w.removeEventListener&&(e.chrome&&e.chrome.app&&e.chrome.app.runtime||w.removeEventListener("unload",this.environListener)),this},r.prototype.start=function(){var t=this;if(this.logger.log("user requested startup..."),this.status===c.UAStatus.STATUS_INIT){if(this.status=c.UAStatus.STATUS_STARTING,!this.configuration.transportConstructor)throw new h.Exceptions.TransportError("Transport constructor not set");this.transport=new this.configuration.transportConstructor(this.getLogger("sip.transport"),this.configuration.transportOptions),this.setTransportListeners(),this.emit("transportCreated",this.transport),this.transport.connect()}else this.status===c.UAStatus.STATUS_USER_CLOSED?(this.logger.log("resuming"),this.status=c.UAStatus.STATUS_READY,this.transport&&this.transport.connect()):this.status===c.UAStatus.STATUS_STARTING?this.logger.log("UA is in STARTING status, not opening new connection"):this.status===c.UAStatus.STATUS_READY?this.logger.log("UA is in READY status, not resuming"):this.logger.error("Connection is down. Auto-Recovery system is trying to connect");return this.configuration.autostop&&"function"==typeof w.addEventListener&&(e.chrome&&e.chrome.app&&e.chrome.app.runtime||(this.environListener=this.stop,w.addEventListener("unload",function(){return t.environListener()}))),this},r.prototype.normalizeTarget=function(e){return _.Utils.normalizeTarget(e,this.configuration.hostportParams)},r.prototype.getLogger=function(e,t){return this.log.getLogger(e,t)},r.prototype.newTransaction=function(e){this.transactions[e.kind][e.id]=e,this.emit("newTransaction",{transaction:e})},r.prototype.destroyTransaction=function(e){delete this.transactions[e.kind][e.id],this.emit("transactionDestroyed",{transaction:e})},r.prototype.findSession=function(e){return this.sessions[e.callId+e.fromTag]||this.sessions[e.callId+e.toTag]||void 0},r.prototype.saveCredentials=function(e){return this.cache.credentials[e.realm]=this.cache.credentials[e.realm]||{},this.cache.credentials[e.realm][e.uri]=e,this},r.prototype.getCredentials=function(e){var t=e.ruri.type===c.TypeStrings.URI?e.ruri.host:"";if(t&&this.cache.credentials[t]&&this.cache.credentials[t][e.ruri.toString()]){var r=this.cache.credentials[t][e.ruri.toString()];return r.method=e.method,r}},r.prototype.onTransportError=function(){this.status!==c.UAStatus.STATUS_USER_CLOSED&&(this.error&&this.error===r.C.NETWORK_ERROR||(this.status=c.UAStatus.STATUS_NOT_READY,this.error=r.C.NETWORK_ERROR))},r.prototype.setTransportListeners=function(){var e=this;this.transport&&(this.transport.on("connected",function(){return e.onTransportConnected()}),this.transport.on("message",function(t){return e.onTransportReceiveMsg(t)}),this.transport.on("transportError",function(){return e.onTransportError()}))},r.prototype.onTransportConnected=function(){var e=this;this.configuration.register&&Promise.resolve().then(function(){return e.registerContext.register()})},r.prototype.onTransportReceiveMsg=function(e){var t=d.Parser.parseMessage(e,this);if(this.status===c.UAStatus.STATUS_USER_CLOSED&&t&&t.type===c.TypeStrings.IncomingRequest)this.logger.warn("UA received message when status = USER_CLOSED - aborting");else if(t&&this.transport&&v.SanityCheck.sanityCheck(t,this,this.transport))if(t.type===c.TypeStrings.IncomingRequest)t.transport=this.transport,this.receiveRequest(t);else if(t.type===c.TypeStrings.IncomingResponse)switch(t.method){case a.C.INVITE:var r=this.transactions.ict[t.viaBranch];r&&r.receiveResponse(t);break;case a.C.ACK:break;default:var n=this.transactions.nict[t.viaBranch];n&&n.receiveResponse(t)}},r.prototype.receiveRequest=function(e){var t=function(t){return!!t&&!!e.ruri&&t.user===e.ruri.user};if(this.configuration.uri.type===c.TypeStrings.URI&&!(t(this.configuration.uri)||this.contact&&(t(this.contact.uri)||t(this.contact.pubGruu)||t(this.contact.tempGruu))))return this.logger.warn("Request-URI does not point to us"),void(e.method!==a.C.ACK&&e.reply_sl(404));if(e.ruri&&e.ruri.scheme===a.C.SIPS)e.reply_sl(416);else if(!this.checkTransaction(e)){var n,i=e.method;if(i===a.C.OPTIONS){new b.NonInviteServerTransaction(e,this);e.reply(200,void 0,["Allow: "+r.C.ALLOWED_METHODS.toString(),"Accept: "+r.C.ACCEPTED_BODY_TYPES.toString()])}else i===a.C.MESSAGE?((n=new m.ServerContext(this,e)).body=e.body,n.contentType=e.getHeader("Content-Type")||"text/plain",e.reply(200,void 0),this.emit("message",n)):i!==a.C.INVITE&&i!==a.C.ACK&&(n=new m.ServerContext(this,e));if(e.toTag){var s=this.findDialog(e);if(s){if(i===a.C.INVITE)new b.InviteServerTransaction(e,this);s.receiveRequest(e)}else if(i===a.C.NOTIFY){p=this.findSession(e);var o=this.findEarlySubscription(e);p?p.receiveRequest(e):o?o.receiveRequest(e):(this.logger.warn("received NOTIFY request for a non existent session or subscription"),e.reply(481,"Subscription does not exist"))}else i!==a.C.ACK&&e.reply(481)}else switch(i){case a.C.INVITE:var u=this.configuration.replaces!==a.C.supported.UNSUPPORTED&&e.parseHeader("replaces"),h=void 0;if(u){if(!(h=this.dialogs[u.callId+u.replacesToTag+u.replacesFromTag]))return void e.reply_sl(481,void 0);if(h.owner.type!==c.TypeStrings.Subscription&&h.owner.status===c.SessionStatus.STATUS_TERMINATED)return void e.reply_sl(603,void 0);if(h.state===c.DialogStatus.STATUS_CONFIRMED&&u.earlyOnly)return void e.reply_sl(486,void 0)}var l=new y.InviteServerContext(this,e);h&&h.owner.type!==c.TypeStrings.Subscription&&(l.replacee=h&&h.owner),this.emit("invite",l);break;case a.C.BYE:e.reply(481);break;case a.C.CANCEL:var p;(p=this.findSession(e))?p.receiveRequest(e):this.logger.warn("received CANCEL request for a non existent session");break;case a.C.ACK:break;case a.C.NOTIFY:this.configuration.allowLegacyNotifications&&this.listeners("notify").length>0?(e.reply(200,void 0),this.emit("notify",{request:e})):e.reply(481,"Subscription does not exist");break;case a.C.REFER:if(this.logger.log("Received an out of dialog refer"),this.configuration.allowOutOfDialogRefers){this.logger.log("Allow out of dialog refers is enabled on the UA");var d=new y.ReferServerContext(this,e);this.listeners("outOfDialogReferRequested").length?this.emit("outOfDialogReferRequested",d):(this.logger.log("No outOfDialogReferRequest listeners, automatically accepting and following the out of dialog refer"),d.accept({followRefer:!0}));break}e.reply(405);break;default:e.reply(405)}}},r.prototype.checkTransaction=function(e){return b.checkTransaction(this,e)},r.prototype.findDialog=function(e){return this.dialogs[e.callId+e.fromTag+e.toTag]||this.dialogs[e.callId+e.toTag+e.fromTag]||void 0},r.prototype.findEarlySubscription=function(e){return this.earlySubscriptions[e.callId+e.toTag+e.getHeader("event")]||void 0},r.prototype.checkAuthenticationFactory=function(e){if(e instanceof Function)return e.initialize||(e.initialize=function(){return Promise.resolve()}),e},r.prototype.loadConfig=function(e){var t=this,r={viaHost:_.Utils.createRandomToken(12)+".invalid",uri:new S.URI("sip","anonymous."+_.Utils.createRandomToken(6),"anonymous.invalid",void 0,void 0),custom:{},displayName:"",password:void 0,register:!0,registerOptions:{},transportConstructor:E.Transport,transportOptions:{},userAgentString:a.C.USER_AGENT,noAnswerTimeout:60,hackViaTcp:!1,hackIpInContact:!1,hackWssInTransport:!1,hackAllowUnregisteredOptionTags:!1,sessionDescriptionHandlerFactoryOptions:{constraints:{},peerConnectionOptions:{}},extraSupported:[],contactName:_.Utils.createRandomToken(8),contactTransport:"ws",forceRport:!1,autostart:!0,autostop:!0,rel100:a.C.supported.UNSUPPORTED,dtmfType:a.C.dtmfType.INFO,replaces:a.C.supported.UNSUPPORTED,sessionDescriptionHandlerFactory:C.SessionDescriptionHandler.defaultFactory,authenticationFactory:this.checkAuthenticationFactory(function(e){return new u.DigestAuthentication(e)}),allowLegacyNotifications:!1,allowOutOfDialogRefers:!1},n=this.getConfigurationCheck();for(var i in n.mandatory){if(!e.hasOwnProperty(i))throw new h.Exceptions.ConfigurationError(i);var s=e[i];if(void 0===(o=n.mandatory[i](s)))throw new h.Exceptions.ConfigurationError(i,s);r[i]=o}for(var i in n.optional)if(e.hasOwnProperty(i)){var o;if((s=e[i])instanceof Array&&0===s.length||null===s||""===s||void 0===s||"number"==typeof s&&isNaN(s))continue;if(void 0===(o=n.optional[i](s)))throw new h.Exceptions.ConfigurationError(i,s);r[i]=o}0===r.displayName&&(r.displayName="0"),r.sipjsId=_.Utils.createRandomToken(5);var c=r.uri.clone();if(c.user=void 0,r.hostportParams=c.toRaw().replace(/^sip:/i,""),r.authorizationUser||(r.authorizationUser=r.uri.user),r.noAnswerTimeout=1e3*r.noAnswerTimeout,r.hackIpInContact)if("boolean"==typeof r.hackIpInContact){var l=Math.floor(254*Math.random()+1);r.viaHost="192.0.2."+l}else"string"==typeof r.hackIpInContact&&(r.viaHost=r.hackIpInContact);r.hackWssInTransport&&(r.contactTransport="wss"),this.contact={pubGruu:void 0,tempGruu:void 0,uri:new S.URI("sip",r.contactName,r.viaHost,void 0,{transport:r.contactTransport}),toString:function(e){void 0===e&&(e={});var n=e.anonymous||!1,i=e.outbound||!1,s="<";return s+=n?(t.contact.tempGruu||"sip:anonymous@anonymous.invalid;transport="+r.contactTransport).toString():(t.contact.pubGruu||t.contact.uri).toString(),i&&(s+=";ob"),s+=">"}};var p={};for(var i in r)r.hasOwnProperty(i)&&(p[i]=r[i]);for(var i in Object.assign(this.configuration,p),this.logger.log("configuration parameters after validation:"),r)if(r.hasOwnProperty(i))switch(i){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log(" "+i+": "+r[i]);break;case"password":this.logger.log(" "+i+": NOT SHOWN");break;case"transportConstructor":this.logger.log(" "+i+": "+r[i].name);break;default:this.logger.log(" "+i+": "+JSON.stringify(r[i]))}},r.prototype.getConfigurationCheck=function(){return{mandatory:{},optional:{uri:function(e){/^sip:/i.test(e)||(e=a.C.SIP+":"+e);var t=l.Grammar.URIParse(e);return t&&t.user?t:void 0},transportConstructor:function(e){if(e instanceof Function)return e},transportOptions:function(e){if("object"==typeof e)return e},authorizationUser:function(e){return-1===l.Grammar.parse('"'+e+'"',"quoted_string")?void 0:e},displayName:function(e){return-1===l.Grammar.parse('"'+e+'"',"displayName")?void 0:e},dtmfType:function(e){switch(e){case a.C.dtmfType.RTP:return a.C.dtmfType.RTP;case a.C.dtmfType.INFO:default:return a.C.dtmfType.INFO}},hackViaTcp:function(e){if("boolean"==typeof e)return e},hackIpInContact:function(e){return"boolean"==typeof e?e:"string"==typeof e&&-1!==l.Grammar.parse(e,"host")?e:void 0},hackWssInTransport:function(e){if("boolean"==typeof e)return e},hackAllowUnregisteredOptionTags:function(e){if("boolean"==typeof e)return e},contactTransport:function(e){if("string"==typeof e)return e},extraSupported:function(e){if(e instanceof Array){for(var t=0,r=e;t<r.length;t++){if("string"!=typeof r[t])return}return e}},forceRport:function(e){if("boolean"==typeof e)return e},noAnswerTimeout:function(e){if(_.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},password:function(e){return String(e)},rel100:function(e){return e===a.C.supported.REQUIRED?a.C.supported.REQUIRED:e===a.C.supported.SUPPORTED?a.C.supported.SUPPORTED:a.C.supported.UNSUPPORTED},replaces:function(e){return e===a.C.supported.REQUIRED?a.C.supported.REQUIRED:e===a.C.supported.SUPPORTED?a.C.supported.SUPPORTED:a.C.supported.UNSUPPORTED},register:function(e){if("boolean"==typeof e)return e},registerOptions:function(e){if("object"==typeof e)return e},userAgentString:function(e){if("string"==typeof e)return e},autostart:function(e){if("boolean"==typeof e)return e},autostop:function(e){if("boolean"==typeof e)return e},sessionDescriptionHandlerFactory:function(e){if(e instanceof Function)return e},sessionDescriptionHandlerFactoryOptions:function(e){if("object"==typeof e)return e},authenticationFactory:this.checkAuthenticationFactory,allowLegacyNotifications:function(e){if("boolean"==typeof e)return e},custom:function(e){if("object"==typeof e)return e},contactName:function(e){if("string"==typeof e)return e}}}},r.C={STATUS_INIT:0,STATUS_STARTING:1,STATUS_READY:2,STATUS_USER_CLOSED:3,STATUS_NOT_READY:4,CONFIGURATION_ERROR:1,NETWORK_ERROR:2,ALLOWED_METHODS:["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"],ACCEPTED_BODY_TYPES:["application/sdp","application/dtmf-relay"],MAX_FORWARDS:70,TAG_LENGTH:10},r}(s.EventEmitter);t.UA=A}).call(this,r(7))},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(0),a=r(5),u=r(2),c=r(15),h=r(43),l=function(t){function r(r,n,i){var s=t.call(this)||this;s.type=o.TypeStrings.SessionDescriptionHandler,s.options=i||{},s.logger=r,s.observer=n,s.dtmfSender=void 0,s.shouldAcquireMedia=!0,s.CONTENT_TYPE="application/sdp",s.C={DIRECTION:{NULL:null,SENDRECV:"sendrecv",SENDONLY:"sendonly",RECVONLY:"recvonly",INACTIVE:"inactive"}},s.logger.log("SessionDescriptionHandlerOptions: "+JSON.stringify(s.options)),s.direction=s.C.DIRECTION.NULL,s.modifiers=s.options.modifiers||[],Array.isArray(s.modifiers)||(s.modifiers=[s.modifiers]);var a=e.window||e;return s.WebRTC={MediaStream:a.MediaStream,getUserMedia:a.navigator.mediaDevices.getUserMedia.bind(a.navigator.mediaDevices),RTCPeerConnection:a.RTCPeerConnection},s.iceGatheringTimeout=!1,s.initPeerConnection(s.options.peerConnectionOptions),s.constraints=s.checkAndDefaultConstraints(s.options.constraints),s}return i(r,t),r.defaultFactory=function(e,t){return new r(e.ua.getLogger("sip.invitecontext.sessionDescriptionHandler",e.id),new h.SessionDescriptionHandlerObserver(e,t),t)},r.prototype.close=function(){this.logger.log("closing PeerConnection"),this.peerConnection&&"closed"!==this.peerConnection.signalingState&&(this.peerConnection.getSenders?this.peerConnection.getSenders().forEach(function(e){e.track&&e.track.stop()}):(this.logger.warn("Using getLocalStreams which is deprecated"),this.peerConnection.getLocalStreams().forEach(function(e){e.getTracks().forEach(function(e){e.stop()})})),this.peerConnection.getReceivers?this.peerConnection.getReceivers().forEach(function(e){e.track&&e.track.stop()}):(this.logger.warn("Using getRemoteStreams which is deprecated"),this.peerConnection.getRemoteStreams().forEach(function(e){e.getTracks().forEach(function(e){e.stop()})})),this.resetIceGatheringComplete(),this.peerConnection.close())},r.prototype.getDescription=function(e,t){var r=this;void 0===e&&(e={}),void 0===t&&(t=[]),e.peerConnectionOptions&&this.initPeerConnection(e.peerConnectionOptions);var n=Object.assign({},this.constraints,e.constraints);return n=this.checkAndDefaultConstraints(n),JSON.stringify(n)!==JSON.stringify(this.constraints)&&(this.constraints=n,this.shouldAcquireMedia=!0),Array.isArray(t)||(t=[t]),t=t.concat(this.modifiers),Promise.resolve().then(function(){if(r.shouldAcquireMedia)return r.acquire(r.constraints).then(function(){r.shouldAcquireMedia=!1})}).then(function(){return r.createOfferOrAnswer(e.RTCOfferOptions,t)}).then(function(e){return r.emit("getDescription",e),{body:e.sdp,contentType:r.CONTENT_TYPE}})},r.prototype.hasDescription=function(e){return e===this.CONTENT_TYPE},r.prototype.holdModifier=function(e){return e.sdp?(/a=(sendrecv|sendonly|recvonly|inactive)/.test(e.sdp)?(e.sdp=e.sdp.replace(/a=sendrecv\r\n/g,"a=sendonly\r\n"),e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")):e.sdp=e.sdp.replace(/(m=[^\r]*\r\n)/g,"$1a=sendonly\r\n"),Promise.resolve(e)):Promise.resolve(e)},r.prototype.setDescription=function(e,t,r){var n=this;void 0===t&&(t={}),void 0===r&&(r=[]),t.peerConnectionOptions&&this.initPeerConnection(t.peerConnectionOptions),Array.isArray(r)||(r=[r]),r=r.concat(this.modifiers);var i={type:this.hasOffer("local")?"answer":"offer",sdp:e};return Promise.resolve().then(function(){if(n.shouldAcquireMedia&&n.options.alwaysAcquireMediaFirst)return n.acquire(n.constraints).then(function(){n.shouldAcquireMedia=!1})}).then(function(){return u.Utils.reducePromises(r,i)}).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("setDescription",e,"The modifiers did not resolve successfully");throw n.logger.error(t.message),n.emit("peerConnection-setRemoteDescriptionFailed",t),t}).then(function(e){return n.emit("setDescription",e),n.peerConnection.setRemoteDescription(e)}).catch(function(i){if(i.type===o.TypeStrings.SessionDescriptionHandlerError)throw i;if(/^m=video.+$/gm.test(e)&&!t.disableAudioFallback)return t.disableAudioFallback=!0,n.setDescription(e,t,[c.stripVideo].concat(r));var s=new a.Exceptions.SessionDescriptionHandlerError("setDescription",i);throw s.error&&n.logger.error(s.error),n.emit("peerConnection-setRemoteDescriptionFailed",s),s}).then(function(){n.peerConnection.getReceivers?n.emit("setRemoteDescription",n.peerConnection.getReceivers()):n.emit("setRemoteDescription",n.peerConnection.getRemoteStreams()),n.emit("confirmed",n)})},r.prototype.sendDtmf=function(e,t){if(void 0===t&&(t={}),!this.dtmfSender&&this.hasBrowserGetSenderSupport()){var r=this.peerConnection.getSenders();r.length>0&&(this.dtmfSender=r[0].dtmf)}if(!this.dtmfSender&&this.hasBrowserTrackSupport()){var n=this.peerConnection.getLocalStreams();if(n.length>0){var i=n[0].getAudioTracks();i.length>0&&(this.dtmfSender=this.peerConnection.createDTMFSender(i[0]))}}if(!this.dtmfSender)return!1;try{this.dtmfSender.insertDTMF(e,t.duration,t.interToneGap)}catch(e){if("InvalidStateError"===e.type||"InvalidCharacterError"===e.type)return this.logger.error(e),!1;throw e}return this.logger.log("DTMF sent via RTP: "+e.toString()),!0},r.prototype.getDirection=function(){return this.direction},r.prototype.createOfferOrAnswer=function(e,t){var r=this;void 0===e&&(e={}),void 0===t&&(t=[]);var n=this.hasOffer("remote")?"createAnswer":"createOffer",i=this.peerConnection;return this.logger.log(n),i[n](e).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",e,"peerConnection-"+n+"Failed");throw r.emit("peerConnection-"+n+"Failed",t),t}).then(function(e){return u.Utils.reducePromises(t,r.createRTCSessionDescriptionInit(e))}).then(function(e){return r.resetIceGatheringComplete(),r.logger.log("Setting local sdp."),r.logger.log("sdp is "+e.sdp||!1),i.setLocalDescription(e)}).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",e,"peerConnection-SetLocalDescriptionFailed");throw r.emit("peerConnection-SetLocalDescriptionFailed",t),t}).then(function(){return r.waitForIceGatheringComplete()}).then(function(){var e=r.createRTCSessionDescriptionInit(r.peerConnection.localDescription);return u.Utils.reducePromises(t,e)}).then(function(e){return r.setDirection(e.sdp||""),e}).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var t=new a.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",e);throw r.logger.error(t.toString()),t})},r.prototype.createRTCSessionDescriptionInit=function(e){return{type:e.type,sdp:e.sdp}},r.prototype.addDefaultIceCheckingTimeout=function(e){return void 0===e.iceCheckingTimeout&&(e.iceCheckingTimeout=5e3),e},r.prototype.addDefaultIceServers=function(e){return e.iceServers||(e.iceServers=[{urls:"stun:stun.l.google.com:19302"}]),e},r.prototype.checkAndDefaultConstraints=function(e){var t={audio:!0,video:!this.options.alwaysAcquireMediaFirst};return e=e||t,0===Object.keys(e).length&&e.constructor===Object?t:e},r.prototype.hasBrowserTrackSupport=function(){return Boolean(this.peerConnection.addTrack)},r.prototype.hasBrowserGetSenderSupport=function(){return Boolean(this.peerConnection.getSenders)},r.prototype.initPeerConnection=function(e){var t=this;void 0===e&&(e={}),(e=this.addDefaultIceCheckingTimeout(e)).rtcConfiguration=e.rtcConfiguration||{},e.rtcConfiguration=this.addDefaultIceServers(e.rtcConfiguration),this.logger.log("initPeerConnection"),this.peerConnection&&(this.logger.log("Already have a peer connection for this session. Tearing down."),this.resetIceGatheringComplete(),this.peerConnection.close()),this.peerConnection=new this.WebRTC.RTCPeerConnection(e.rtcConfiguration),this.logger.log("New peer connection created"),"ontrack"in this.peerConnection?this.peerConnection.addEventListener("track",function(e){t.logger.log("track added"),t.observer.trackAdded(),t.emit("addTrack",e)}):(this.logger.warn("Using onaddstream which is deprecated"),this.peerConnection.onaddstream=function(e){t.logger.log("stream added"),t.emit("addStream",e)}),this.peerConnection.onicecandidate=function(e){t.emit("iceCandidate",e),e.candidate?t.logger.log("ICE candidate received: "+(null===e.candidate.candidate?null:e.candidate.candidate.trim())):null===e.candidate&&(t.logger.log("ICE candidate gathering complete"),t.triggerIceGatheringComplete())},this.peerConnection.onicegatheringstatechange=function(){switch(t.logger.log("RTCIceGatheringState changed: "+t.peerConnection.iceGatheringState),t.peerConnection.iceGatheringState){case"gathering":t.emit("iceGathering",t),!t.iceGatheringTimer&&e.iceCheckingTimeout&&(t.iceGatheringTimeout=!1,t.iceGatheringTimer=setTimeout(function(){t.logger.log("RTCIceChecking Timeout Triggered after "+e.iceCheckingTimeout+" milliseconds"),t.iceGatheringTimeout=!0,t.triggerIceGatheringComplete()},e.iceCheckingTimeout));break;case"complete":t.triggerIceGatheringComplete()}},this.peerConnection.oniceconnectionstatechange=function(){var e;switch(t.peerConnection.iceConnectionState){case"new":e="iceConnection";break;case"checking":e="iceConnectionChecking";break;case"connected":e="iceConnectionConnected";break;case"completed":e="iceConnectionCompleted";break;case"failed":e="iceConnectionFailed";break;case"disconnected":e="iceConnectionDisconnected";break;case"closed":e="iceConnectionClosed";break;default:return void t.logger.warn("Unknown iceConnection state: "+t.peerConnection.iceConnectionState)}t.logger.log("ICE Connection State changed to "+e),t.emit(e,t)}},r.prototype.acquire=function(e){var t=this;return e=this.checkAndDefaultConstraints(e),new Promise(function(r,n){t.logger.log("acquiring local media"),t.emit("userMediaRequest",e),e.audio||e.video?t.WebRTC.getUserMedia(e).then(function(e){t.observer.trackAdded(),t.emit("userMedia",e),r(e)}).catch(function(e){t.emit("userMediaFailed",e),n(e)}):r([])}).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var r=new a.Exceptions.SessionDescriptionHandlerError("acquire",e,"unable to acquire streams");throw t.logger.error(r.message),r.error&&t.logger.error(r.error),r}).then(function(e){t.logger.log("acquired local media streams");try{return t.peerConnection.removeTrack&&t.peerConnection.getSenders().forEach(function(e){t.peerConnection.removeTrack(e)}),e}catch(e){return Promise.reject(e)}}).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var r=new a.Exceptions.SessionDescriptionHandlerError("acquire",e,"error removing streams");throw t.logger.error(r.message),r.error&&t.logger.error(r.error),r}).then(function(e){try{(e=[].concat(e)).forEach(function(e){t.peerConnection.addTrack?e.getTracks().forEach(function(r){t.peerConnection.addTrack(r,e)}):t.peerConnection.addStream(e)})}catch(e){return Promise.reject(e)}return Promise.resolve()}).catch(function(e){if(e.type===o.TypeStrings.SessionDescriptionHandlerError)throw e;var r=new a.Exceptions.SessionDescriptionHandlerError("acquire",e,"error adding stream");throw t.logger.error(r.message),r.error&&t.logger.error(r.error),r})},r.prototype.hasOffer=function(e){var t="have-"+e+"-offer";return this.peerConnection.signalingState===t},r.prototype.isIceGatheringComplete=function(){return"complete"===this.peerConnection.iceGatheringState||this.iceGatheringTimeout},r.prototype.resetIceGatheringComplete=function(){this.iceGatheringTimeout=!1,this.logger.log("resetIceGatheringComplete"),this.iceGatheringTimer&&(clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=void 0),this.iceGatheringDeferred&&(this.iceGatheringDeferred.reject(),this.iceGatheringDeferred=void 0)},r.prototype.setDirection=function(e){var t=e.match(/a=(sendrecv|sendonly|recvonly|inactive)/);if(null===t)return this.direction=this.C.DIRECTION.NULL,void this.observer.directionChanged();var r=t[1];switch(r){case this.C.DIRECTION.SENDRECV:case this.C.DIRECTION.SENDONLY:case this.C.DIRECTION.RECVONLY:case this.C.DIRECTION.INACTIVE:this.direction=r;break;default:this.direction=this.C.DIRECTION.NULL}this.observer.directionChanged()},r.prototype.triggerIceGatheringComplete=function(){this.isIceGatheringComplete()&&(this.emit("iceGatheringComplete",this),this.iceGatheringTimer&&(clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=void 0),this.iceGatheringDeferred&&(this.iceGatheringDeferred.resolve(),this.iceGatheringDeferred=void 0))},r.prototype.waitForIceGatheringComplete=function(){return this.logger.log("waitForIceGatheringComplete"),this.isIceGatheringComplete()?(this.logger.log("ICE is already complete. Return resolved."),Promise.resolve()):(this.iceGatheringDeferred||(this.iceGatheringDeferred=u.Utils.defer()),this.logger.log("ICE is not complete. Returning promise"),this.iceGatheringDeferred?this.iceGatheringDeferred.promise:Promise.resolve())},r}(s.EventEmitter);t.SessionDescriptionHandler=l}).call(this,r(7))},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s,o=r(0),a=r(5),u=r(4),c=r(26),h=r(2);!function(e){e[e.STATUS_CONNECTING=0]="STATUS_CONNECTING",e[e.STATUS_OPEN=1]="STATUS_OPEN",e[e.STATUS_CLOSING=2]="STATUS_CLOSING",e[e.STATUS_CLOSED=3]="STATUS_CLOSED"}(s=t.TransportStatus||(t.TransportStatus={}));var l=function(t){function r(r,n){void 0===n&&(n={});var i=t.call(this,r,n)||this;return i.WebSocket=(e.window||e).WebSocket,i.type=o.TypeStrings.Transport,i.reconnectionAttempts=0,i.status=s.STATUS_CONNECTING,i.configuration={},i.loadConfig(n),i}return i(r,t),r.prototype.isConnected=function(){return this.status===s.STATUS_OPEN},r.prototype.sendPromise=function(e,t){if(void 0===t&&(t={}),!this.statusAssert(s.STATUS_OPEN,t.force))return this.onError("unable to send message - WebSocket not open"),Promise.reject();var r=e.toString();return this.ws?(!0===this.configuration.traceSip&&this.logger.log("sending WebSocket message:\n\n"+r+"\n"),this.ws.send(r),Promise.resolve({msg:r})):(this.onError("unable to send message - WebSocket does not exist"),Promise.reject())},r.prototype.disconnectPromise=function(e){var t=this;return void 0===e&&(e={}),this.disconnectionPromise?this.disconnectionPromise:(e.code=e.code||1e3,this.statusTransition(s.STATUS_CLOSING,e.force)?(this.emit("disconnecting"),this.disconnectionPromise=new Promise(function(r,n){t.disconnectDeferredResolve=r,t.reconnectTimer&&(clearTimeout(t.reconnectTimer),t.reconnectTimer=void 0),t.ws?(t.stopSendingKeepAlives(),t.logger.log("closing WebSocket "+t.server.wsUri),t.ws.close(e.code,e.reason)):n("Attempted to disconnect but the websocket doesn't exist")}),this.disconnectionPromise):this.status===s.STATUS_CLOSED?Promise.resolve({overrideEvent:!0}):this.connectionPromise?this.connectionPromise.then(function(){return Promise.reject("The websocket did not disconnect")}).catch(function(){return Promise.resolve({overrideEvent:!0})}):Promise.reject("The websocket did not disconnect"))},r.prototype.connectPromise=function(e){var t=this;return void 0===e&&(e={}),this.status!==s.STATUS_CLOSING||e.force?this.connectionPromise?this.connectionPromise:(this.server=this.server||this.getNextWsServer(e.force),this.connectionPromise=new Promise(function(r,n){if((t.status===s.STATUS_OPEN||t.status===s.STATUS_CLOSING)&&!e.force)return t.logger.warn("WebSocket "+t.server.wsUri+" is already connected"),void n("Failed status check - attempted to open a connection but already open/closing");t.connectDeferredResolve=r,t.status=s.STATUS_CONNECTING,t.emit("connecting"),t.logger.log("connecting to WebSocket "+t.server.wsUri),t.disposeWs();try{t.ws=new WebSocket(t.server.wsUri,"sip")}catch(e){return t.ws=null,t.status=s.STATUS_CLOSED,t.onError("error connecting to WebSocket "+t.server.wsUri+":"+e),void n("Failed to create a websocket")}t.ws?(t.connectionTimeout=setTimeout(function(){t.statusTransition(s.STATUS_CLOSED),t.logger.warn("took too long to connect - exceeded time set in configuration.connectionTimeout: "+t.configuration.connectionTimeout+"s"),t.emit("disconnected",{code:1e3}),t.connectionPromise=void 0,n("Connection timeout")},1e3*t.configuration.connectionTimeout),t.boundOnOpen=t.onOpen.bind(t),t.boundOnMessage=t.onMessage.bind(t),t.boundOnClose=t.onClose.bind(t),t.boundOnError=t.onWebsocketError.bind(t),t.ws.addEventListener("open",t.boundOnOpen),t.ws.addEventListener("message",t.boundOnMessage),t.ws.addEventListener("close",t.boundOnClose),t.ws.addEventListener("error",t.boundOnError)):n("Unexpected instance websocket not set")}),this.connectionPromise):Promise.reject("WebSocket "+this.server.wsUri+" is closing")},r.prototype.onMessage=function(e){var t,r=e.data;if(/^(\r\n)+$/.test(r))return this.clearKeepAliveTimeout(),void(!0===this.configuration.traceSip&&this.logger.log("received WebSocket message with CRLF Keep Alive response"));if(r){if("string"!=typeof r){try{t=String.fromCharCode.apply(null,new Uint8Array(r))}catch(e){return void this.logger.warn("received WebSocket binary message failed to be converted into string, message discarded")}!0===this.configuration.traceSip&&this.logger.log("received WebSocket binary message:\n\n"+r+"\n")}else!0===this.configuration.traceSip&&this.logger.log("received WebSocket text message:\n\n"+r+"\n"),t=r;this.emit("message",t)}else this.logger.warn("received empty message, message discarded")},r.prototype.onOpen=function(){if(this.status===s.STATUS_CLOSED){var e=this.ws;return this.disposeWs(),void e.close(1e3)}this.status=s.STATUS_OPEN,this.emit("connected"),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0),this.logger.log("WebSocket "+this.server.wsUri+" connected"),void 0!==this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=void 0),this.reconnectionAttempts=0,this.disconnectionPromise=void 0,this.disconnectDeferredResolve=void 0,this.startSendingKeepAlives(),this.connectDeferredResolve?this.connectDeferredResolve({overrideEvent:!0}):this.logger.warn("Unexpected websocket.onOpen with no connectDeferredResolve")},r.prototype.onClose=function(e){if(this.logger.log("WebSocket disconnected (code: "+e.code+(e.reason?"| reason: "+e.reason:"")+")"),this.status!==s.STATUS_CLOSING&&(this.logger.warn("WebSocket closed without SIP.js requesting it"),this.emit("transportError")),this.stopSendingKeepAlives(),this.connectionTimeout&&clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0,this.connectionPromise=void 0,this.connectDeferredResolve=void 0,this.disconnectDeferredResolve)return this.disconnectDeferredResolve({overrideEvent:!0}),this.statusTransition(s.STATUS_CLOSED),void(this.disconnectDeferredResolve=void 0);this.status=s.STATUS_CLOSED,this.emit("disconnected",{code:e.code,reason:e.reason}),this.reconnect()},r.prototype.disposeWs=function(){this.ws&&(this.ws.removeEventListener("open",this.boundOnOpen),this.ws.removeEventListener("message",this.boundOnMessage),this.ws.removeEventListener("close",this.boundOnClose),this.ws.removeEventListener("error",this.boundOnError),this.ws=void 0)},r.prototype.onError=function(e){this.logger.warn("Transport error: "+e),this.emit("transportError")},r.prototype.onWebsocketError=function(){this.onError("The Websocket had an error")},r.prototype.reconnect=function(){var e=this;if(this.reconnectionAttempts>0&&this.logger.log("Reconnection attempt "+this.reconnectionAttempts+" failed"),this.noAvailableServers())return this.logger.warn("no available ws servers left - going to closed state"),this.status=s.STATUS_CLOSED,this.emit("closed"),void this.resetServerErrorStatus();this.isConnected()&&(this.logger.warn("attempted to reconnect while connected - forcing disconnect"),this.disconnect({force:!0})),this.reconnectionAttempts+=1,this.reconnectionAttempts>this.configuration.maxReconnectionAttempts?(this.logger.warn("maximum reconnection attempts for WebSocket "+this.server.wsUri),this.logger.log("transport "+this.server.wsUri+" failed | connection state set to 'error'"),this.server.isError=!0,this.emit("transportError"),this.server=this.getNextWsServer(),this.reconnectionAttempts=0,this.reconnect()):(this.logger.log("trying to reconnect to WebSocket "+this.server.wsUri+" (reconnection attempt "+this.reconnectionAttempts+")"),this.reconnectTimer=setTimeout(function(){e.connect(),e.reconnectTimer=void 0},1===this.reconnectionAttempts?0:1e3*this.configuration.reconnectionTimeout))},r.prototype.resetServerErrorStatus=function(){for(var e=0,t=this.configuration.wsServers;e<t.length;e++){t[e].isError=!1}},r.prototype.getNextWsServer=function(e){if(void 0===e&&(e=!1),!this.noAvailableServers()){for(var t=[],r=0,n=this.configuration.wsServers;r<n.length;r++){var i=n[r];i.isError&&!e||(0===t.length?t.push(i):i.weight>t[0].weight?t=[i]:i.weight===t[0].weight&&t.push(i))}return t[Math.floor(Math.random()*t.length)]}this.logger.warn("attempted to get next ws server but there are no available ws servers left")},r.prototype.noAvailableServers=function(){for(var e=0,t=this.configuration.wsServers;e<t.length;e++){if(!t[e].isError)return!1}return!0},r.prototype.sendKeepAlive=function(){var e=this;if(!this.keepAliveDebounceTimeout)return this.keepAliveDebounceTimeout=setTimeout(function(){e.emit("keepAliveDebounceTimeout"),e.clearKeepAliveTimeout()},1e3*this.configuration.keepAliveDebounce),this.send("\r\n\r\n")},r.prototype.clearKeepAliveTimeout=function(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0},r.prototype.startSendingKeepAlives=function(){var e,t,r=this;this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(function(){r.sendKeepAlive(),r.startSendingKeepAlives()},(e=this.configuration.keepAliveInterval,t=.8*e,1e3*(Math.random()*(e-t)+t))))},r.prototype.stopSendingKeepAlives=function(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0},r.prototype.statusAssert=function(e,t){return e===this.status||(t?(this.logger.warn("Attempted to assert "+Object.keys(s)[this.status]+" as "+Object.keys(s)[e]+"- continuing with option: 'force'"),!0):(this.logger.warn("Tried to assert "+Object.keys(s)[e]+" but is currently "+Object.keys(s)[this.status]),!1))},r.prototype.statusTransition=function(e,t){return void 0===t&&(t=!1),this.logger.log("Attempting to transition status from "+Object.keys(s)[this.status]+" to "+Object.keys(s)[e]),e===s.STATUS_CONNECTING&&this.statusAssert(s.STATUS_CLOSED,t)||e===s.STATUS_OPEN&&this.statusAssert(s.STATUS_CONNECTING,t)||e===s.STATUS_CLOSING&&this.statusAssert(s.STATUS_OPEN,t)||e===s.STATUS_CLOSED?(this.status=e,!0):(this.logger.warn("Status transition failed - result: no-op - reason: either gave an nonexistent status or attempted illegal transition"),!1)},r.prototype.loadConfig=function(e){var t={wsServers:[{scheme:"WSS",sipUri:"<sip:edge.sip.onsip.com;transport=ws;lr>",weight:0,wsUri:"wss://edge.sip.onsip.com",isError:!1}],connectionTimeout:5,maxReconnectionAttempts:3,reconnectionTimeout:4,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!1},r=this.getConfigurationCheck();for(var n in r.mandatory){if(!e.hasOwnProperty(n))throw new a.Exceptions.ConfigurationError(n);var i=e[n];if(void 0===(s=r.mandatory[n](i)))throw new a.Exceptions.ConfigurationError(n,i);t[n]=s}for(var n in r.optional)if(e.hasOwnProperty(n)){var s;if((i=e[n])instanceof Array&&0===i.length||null===i||""===i||void 0===i||"number"==typeof i&&isNaN(i))continue;if(void 0===(s=r.optional[n](i)))throw new a.Exceptions.ConfigurationError(n,i);t[n]=s}var o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]={value:t[n]});for(var n in Object.defineProperties(this.configuration,o),this.logger.log("configuration parameters after validation:"),t)t.hasOwnProperty(n)&&this.logger.log(" "+n+": "+JSON.stringify(t[n]))},r.prototype.getConfigurationCheck=function(){return{mandatory:{},optional:{wsServers:function(e){if("string"==typeof e)e=[{wsUri:e}];else{if(!(e instanceof Array))return;for(var t=0;t<e.length;t++)"string"==typeof e[t]&&(e[t]={wsUri:e[t]})}if(0===e.length)return!1;for(var r=0,n=e;r<n.length;r++){var i=n[r];if(!i.wsUri)return;if(i.weight&&!Number(i.weight))return;var s=u.Grammar.parse(i.wsUri,"absoluteURI");if(-1===s)return;if(["wss","ws","udp"].indexOf(s.scheme)<0)return;i.sipUri="<sip:"+s.host+(s.port?":"+s.port:"")+";transport="+s.scheme.replace(/^wss$/i,"ws")+";lr>",i.weight||(i.weight=0),i.isError=!1,i.scheme=s.scheme.toUpperCase()}return e},keepAliveInterval:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},keepAliveDebounce:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},traceSip:function(e){if("boolean"==typeof e)return e},connectionTimeout:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}},maxReconnectionAttempts:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>=0)return t}},reconnectionTimeout:function(e){if(h.Utils.isDecimal(e)){var t=Number(e);if(t>0)return t}}}}},r.C=s,r}(c.Transport);t.Transport=l}).call(this,r(7))},function(e,t,r){var n=r(31),i=r(60),s=r(61),o=r(66),a=r(70),u=r(36),c=r(77),h=r(35);function l(e){this._externals=new o(e),this._cache=new i({externals:this._externals,prefix:e.cachePrefix}),this._client=new s(this._externals),this._platform=new a(n({},e,{externals:this._externals,client:this._client,cache:this._cache}))}l.version=h.version,l.server={sandbox:"https://platform.devtest.ringcentral.com",production:"https://platform.ringcentral.com"},l.prototype.platform=function(){return this._platform},l.prototype.cache=function(){return this._cache},l.prototype.createSubscription=function(e){return new u(n({},e,{externals:this._externals,platform:this._platform}))},l.prototype.createCachedSubscription=function(e){return e="string"==typeof arguments[0]?{cacheKey:arguments[0].toString()}:e||{},new c(n({},e,{externals:this._externals,platform:this._platform,cache:this._cache}))},l.handleLoginRedirect=function(e,t){var r=(t=t||window).location.hash?t.location.hash:t.location.search,n={};n[h.authResponseProperty]=r,t.opener.postMessage(n,e||t.location.origin)},e.exports=l},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in r=Object(arguments[u]))i.call(r,c)&&(a[c]=r[c]);if(n){o=n(r);for(var h=0;h<o.length;h++)s.call(r,o[h])&&(a[o[h]]=r[o[h]])}}return a}},function(e,t){function r(e){this._externals=e.externals,this._request=e.request,this._response=e.response,this._text=e.responseText||"",this._json=null,this._multipart=[]}r._contentType="Content-Type",r._jsonContentType="application/json",r._multipartContentType="multipart/mixed",r._urlencodedContentType="application/x-www-form-urlencoded",r._headerSeparator=":",r._bodySeparator="\n\n",r._boundarySeparator="--",r._unauthorizedStatus=401,r._rateLimitStatus=429,r.prototype.receiveResponse=function(e){return this._response=e,new this._externals.Promise(function(e){return this._isMultipart()||this._isJson()?e(this.response().text()):e("")}.bind(this)).then(function(e){return this._text=e,e}.bind(this))},r.prototype.response=function(){return this._response},r.prototype.request=function(){return this._request},r.prototype.ok=function(){return this._response&&this._response.ok},r.prototype.text=function(){if(!this._isJson()&&!this._isMultipart())throw new Error("Response is not text");return this._text},r.prototype.json=function(){if(!this._isJson())throw new Error("Response is not JSON");return this._json||(this._json=this._text?JSON.parse(this._text):null),this._json},r.prototype.error=function(e){if(this.ok()&&!e)return null;var t=(this._response&&this._response.status?this._response.status+" ":"")+(this._response&&this._response.statusText?this._response.statusText:"");try{this.json().message&&(t=this.json().message),this.json().error_description&&(t=this.json().error_description),this.json().description&&(t=this.json().description)}catch(e){}return t},r.prototype.toMultipart=function(){return this._isMultipart()?this.multipart():[this]},r.prototype.multipart=function(){if(!this._isMultipart())throw new Error("Response is not multipart");if(!this._multipart.length){var e,t=this.text();if(!t)throw new Error("No response body");try{e=this._getContentType().match(/boundary=([^;]+)/i)[1]}catch(e){throw new Error("Cannot find boundary")}if(!e)throw new Error("Cannot find boundary");var n=t.toString().split(r._boundarySeparator+e);if(""===n[0].trim()&&n.shift(),n[n.length-1].trim()==r._boundarySeparator&&n.pop(),n.length<1)throw new Error("No parts in body");var i=this._create(n.shift(),this._response.status,this._response.statusText).json();this._multipart=n.map(function(e,t){var r=i.response[t].status;return this._create(e,r)}.bind(this))}return this._multipart},r.prototype._isContentType=function(e){return this._getContentType().indexOf(e)>-1},r.prototype._getContentType=function(){return this._response.headers.get(r._contentType)||""},r.prototype._isMultipart=function(){return this._isContentType(r._multipartContentType)},r.prototype._isJson=function(){return this._isContentType(r._jsonContentType)},r.prototype._create=function(e,t,n){t=t||200,n=n||"OK",e=(e=e||"").replace(/\r/g,"");var i=new this._externals.Headers,s=e.split(r._bodySeparator),o=s.length>1?s.shift():"";e=s.length>0?s.join(r._bodySeparator):null,(o||"").split("\n").forEach(function(e){var t=e.trim().split(r._headerSeparator),n=t.shift().trim(),s=t.join(r._headerSeparator).trim();n&&i.append(n,s)});var a=new this._externals.Response(e,{headers:i,status:t,statusText:n});return new r({externals:this._externals,request:null,response:a,responseText:e})},e.exports=r},function(e,t,r){"use strict";t.decode=t.parse=r(64),t.encode=t.stringify=r(65)},function(e,t){var r,n,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,c=[],h=!1,l=-1;function p(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!h){var e=a(p);h=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||h||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){(function(t){var n=t.env.RCSDK_VERSION;t.env.RCSDK_VERSION||(n=r(76).version),e.exports={version:n,authResponseProperty:"RCAuthorizationResponse"}}).call(this,r(34))},function(e,t,r){var n=r(3).EventEmitter,i=/(\+[\d]{2}):?([\d]{2})?$/;function s(e,t,r){return t+":"+(r||"00")}function o(e){return"string"==typeof(e=e||0)?Date.parse(e.replace(i,s)):e}function a(e){n.call(this),e=e||{},this.events={notification:"notification",removeSuccess:"removeSuccess",removeError:"removeError",renewSuccess:"renewSuccess",renewError:"renewError",subscribeSuccess:"subscribeSuccess",subscribeError:"subscribeError",automaticRenewSuccess:"automaticRenewSuccess",automaticRenewError:"automaticRenewError"},this._externals=e.externals,this._platform=e.platform,this._pollInterval=e.pollInterval||1e4,this._renewHandicapMs=e.renewHandicapMs||12e4,this._pubnub=null,this._pubnubLastChannel=null,this._pubnubLastSubscribeKey=null,this._timeout=null,this._subscription=null}a.prototype=Object.create(n.prototype),a.prototype.subscribed=function(){var e=this.subscription();return!!(e.id&&e.deliveryMode&&e.deliveryMode.subscriberKey&&e.deliveryMode.address)},a.prototype.alive=function(){return this.subscribed()&&Date.now()<this.expirationTime()},a.prototype.expired=function(){return!this.subscribed()||(!this.subscribed()||Date.now()>o(this.subscription().expirationTime))},a.prototype.expirationTime=function(){return o(this.subscription().expirationTime)-this._renewHandicapMs},a.prototype.setSubscription=function(e){return e=e||{},this._clearTimeout(),this._setSubscription(e),this._subscribeAtPubnub(),this._setTimeout(),this},a.prototype.subscription=function(){return this._subscription||{}},a.prototype.register=function(){return this.alive()?this.renew():this.subscribe()},a.prototype.eventFilters=function(){return this.subscription().eventFilters||[]},a.prototype.addEventFilters=function(e){return this.setEventFilters(this.eventFilters().concat(e)),this},a.prototype.setEventFilters=function(e){var t=this.subscription();return t.eventFilters=e,this._setSubscription(t),this},a.prototype.subscribe=function(){return new this._externals.Promise(function(e){if(this._clearTimeout(),!this.eventFilters().length)throw new Error("Events are undefined");e(this._platform.post("/subscription",{eventFilters:this._getFullEventFilters(),deliveryMode:{transportType:"PubNub"}}))}.bind(this)).then(function(e){var t=e.json();return this.setSubscription(t).emit(this.events.subscribeSuccess,e),e}.bind(this)).catch(function(e){throw e=this._platform.client().makeError(e),this.reset().emit(this.events.subscribeError,e),e}.bind(this))},a.prototype.renew=function(){return new this._externals.Promise(function(e){if(this._clearTimeout(),!this.subscribed())throw new Error("No subscription");if(!this.eventFilters().length)throw new Error("Events are undefined");e(this._platform.put("/subscription/"+this.subscription().id,{eventFilters:this._getFullEventFilters()}))}.bind(this)).then(function(e){var t=e.json();return this.setSubscription(t).emit(this.events.renewSuccess,e),e}.bind(this)).catch(function(e){throw e=this._platform.client().makeError(e),this.reset().emit(this.events.renewError,e),e}.bind(this))},a.prototype.remove=function(){return new this._externals.Promise(function(e){if(!this.subscribed())throw new Error("No subscription");e(this._platform.delete("/subscription/"+this.subscription().id))}.bind(this)).then(function(e){return this.reset().emit(this.events.removeSuccess,e),e}.bind(this)).catch(function(e){throw e=this._platform.client().makeError(e),this.emit(this.events.removeError,e),e}.bind(this))},a.prototype.resubscribe=function(){var e=this.eventFilters();return this.reset().setEventFilters(e).subscribe()},a.prototype.reset=function(){return this._clearTimeout(),this._unsubscribeAtPubnub(),this._setSubscription(null),this},a.prototype._setSubscription=function(e){this._subscription=e},a.prototype._getFullEventFilters=function(){return this.eventFilters().map(function(e){return this._platform.createUrl(e)}.bind(this))},a.prototype._setTimeout=function(){if(this._clearTimeout(),!this.alive())throw new Error("Subscription is not alive");return this._timeout=setInterval(function(){this.alive()||(this._clearTimeout(),new this._externals.Promise(function(e){this.expired()?e(this.subscribe()):e(this.renew())}.bind(this)).then(function(e){this.emit(this.events.automaticRenewSuccess,e)}.bind(this)).catch(function(e){this.emit(this.events.automaticRenewError,e)}.bind(this)))}.bind(this),this._pollInterval),this},a.prototype._clearTimeout=function(){return clearInterval(this._timeout),this},a.prototype._decrypt=function(e){if(!this.subscribed())throw new Error("No subscription");return this.subscription().deliveryMode.encryptionKey&&(e=this._pubnub.decrypt(e,this.subscription().deliveryMode.encryptionKey,{encryptKey:!1,keyEncoding:"base64",keyLength:128,mode:"ecb"})),e},a.prototype._notify=function(e){return this.emit(this.events.notification,this._decrypt(e)),this},a.prototype._subscribeAtPubnub=function(){if(!this.alive())throw new Error("Subscription is not alive");var e=this.subscription().deliveryMode;if(this._pubnub){if(this._pubnubLastChannel===e.address)return this;this._pubnubLastSubscribeKey&&this._pubnubLastSubscribeKey!==e.subscriberKey?this._unsubscribeAtPubnub():this._pubnubLastChannel&&this._pubnub.unsubscribeAll()}if(!this._pubnub){this._pubnubLastSubscribeKey=e.subscriberKey;var t=this._externals.PubNub;this._pubnub=new t({ssl:!0,restore:!0,subscribeKey:e.subscriberKey}),this._pubnub.addListener({status:function(e){},message:function(e){this._notify(e.message)}.bind(this)})}return this._pubnubLastChannel=e.address,this._pubnub.subscribe({channels:[e.address]}),this},a.prototype._unsubscribeAtPubnub=function(){return this.subscribed()&&this._pubnub?(this._pubnub.removeAllListeners(),this._pubnub.destroy(),this._pubnubLastSubscribeKey=null,this._pubnubLastChannel=null,this._pubnub=null,this):this},e.exports=a},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);t.ClientContext=n.ClientContext;var i=r(1);t.C=i.C;var s=r(13);t.Dialog=s.Dialog;var o=r(18);t.DigestAuthentication=o.DigestAuthentication;var a=r(0);t.DialogStatus=a.DialogStatus,t.SessionStatus=a.SessionStatus,t.TransactionStatus=a.TransactionStatus,t.TypeStrings=a.TypeStrings,t.UAStatus=a.UAStatus;var u=r(5);t.Exceptions=u.Exceptions;var c=r(4);t.Grammar=c.Grammar;var h=r(19);t.LoggerFactory=h.LoggerFactory;var l=r(17);t.NameAddrHeader=l.NameAddrHeader;var p=r(20);t.Parser=p.Parser;var d=r(21);t.PublishContext=d.PublishContext;var f=r(22);t.RegisterContext=f.RegisterContext;var g=r(9);t.RequestSender=g.RequestSender;var v=r(23).SanityCheck.sanityCheck;t.sanityCheck=v;var m=r(14);t.ServerContext=m.ServerContext;var y=r(24);t.InviteClientContext=y.InviteClientContext,t.InviteServerContext=y.InviteServerContext,t.ReferClientContext=y.ReferClientContext,t.ReferServerContext=y.ReferServerContext,t.Session=y.Session;var T=r(6);t.IncomingRequest=T.IncomingRequest,t.IncomingResponse=T.IncomingResponse,t.OutgoingRequest=T.OutgoingRequest;var b=r(25);t.Subscription=b.Subscription;var S=r(12);t.Timers=S.Timers;var _=r(10),C={AckClientTransaction:_.AckClientTransaction,checkTransaction:_.checkTransaction,InviteClientTransaction:_.InviteClientTransaction,InviteServerTransaction:_.InviteServerTransaction,NonInviteClientTransaction:_.NonInviteClientTransaction,NonInviteServerTransaction:_.NonInviteServerTransaction};t.Transactions=C;var E=r(26);t.Transport=E.Transport;var w=r(27);t.UA=w.UA;var A=r(11);t.URI=A.URI;var R=r(2);t.Utils=R.Utils;var x=r(44);t.Web=x;var I=r(16),O=I.title;t.name=O;var D=I.version;t.version=D},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(17),o=r(11),a=function(e){function t(r,n,i,s){var o=e.call(this)||this;return o.message=r,o.expected=n,o.found=i,o.location=s,o.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return i(t,e),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function s(e){switch(e.type){case"literal":return'"'+n(e.text)+'"';case"class":var t=e.parts.map(function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)});return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,r,n=e.map(s);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+((o=t)?'"'+n(o)+'"':"end of input")+" found.";var o},t}(Error);t.SyntaxError=a,t.parse=function(e,t){t=void 0!==t?t:{};var r,n={},i={Contact:Ba,Name_Addr_Header:function(){var e,t,r,i,s,o,a;for(e=mo,t=[],r=$a();r!==n;)t.push(r),r=$a();if(t!==n)if((r=ra())!==n)if(pa()!==n)if(ta()!==n){for(i=[],s=mo,(o=ia())!==n&&(a=Va())!==n?s=o=[o,a]:(mo=s,s=n);s!==n;)i.push(s),s=mo,(o=ia())!==n&&(a=Va())!==n?s=o=[o,a]:(mo=s,s=n);i!==n?(yo=e,t=Gn(),e=t):(mo=e,e=n)}else mo=e,e=n;else mo=e,e=n;else mo=e,e=n;else mo=e,e=n;return e},Record_Route:function(){var e,t,r,i,s,o;if(e=mo,(t=ou())!==n){for(r=[],i=mo,(s=na())!==n&&(o=ou())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=na())!==n&&(o=ou())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=wi(),e=t):(mo=e,e=n)}else mo=e,e=n;return e},Request_Response:Da,SIP_URI:pa,Subscription_State:function(){var t,r,i,s,o,a;if(t=mo,(r=function(){var t,r;return t=mo,e.substr(mo,6).toLowerCase()===Bi?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(Gi)),r===n&&(e.substr(mo,7).toLowerCase()===Ki?(r=e.substr(mo,7),mo+=7):(r=n,0===_o&&Io($i)),r===n&&(e.substr(mo,10).toLowerCase()===Wi?(r=e.substr(mo,10),mo+=10):(r=n,0===_o&&Io(zi)),r===n&&(r=Xo()))),r!==n&&(yo=t,r=Vi()),t=r}())!==n){for(i=[],s=mo,(o=ia())!==n&&(a=uu())!==n?s=o=[o,a]:(mo=s,s=n);s!==n;)i.push(s),s=mo,(o=ia())!==n&&(a=uu())!==n?s=o=[o,a]:(mo=s,s=n);i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t},Supported:function(){var e,t,r,i,s,o,a;if(e=mo,t=mo,(r=Xo())!==n){for(i=[],s=mo,(o=na())!==n&&(a=Xo())!==n?(yo=s,o=qi(r,a),s=o):(mo=s,s=n);s!==n;)i.push(s),s=mo,(o=na())!==n&&(a=Xo())!==n?(yo=s,o=qi(r,a),s=o):(mo=s,s=n);i!==n?(yo=t,r=ji(r,i),t=r):(mo=t,t=n)}else mo=t,t=n;return t===n&&(t=null),t!==n&&(yo=e,t=vs(t)),e=t},Require:function(){var e,t,r,i,s,o,a;if(e=mo,t=mo,(r=Xo())!==n){for(i=[],s=mo,(o=na())!==n&&(a=Xo())!==n?(yo=s,o=qi(r,a),s=o):(mo=s,s=n);s!==n;)i.push(s),s=mo,(o=na())!==n&&(a=Xo())!==n?(yo=s,o=qi(r,a),s=o):(mo=s,s=n);i!==n?(yo=t,r=ji(r,i),t=r):(mo=t,t=n)}else mo=t,t=n;return t===n&&(t=null),t!==n&&(yo=e,t=Fi(t)),e=t},Via:function(){var e,t,r,i,s,o;if(e=mo,(t=hu())!==n){for(r=[],i=mo,(s=na())!==n&&(o=hu())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=na())!==n&&(o=hu())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?e=t=[t,r]:(mo=e,e=n)}else mo=e,e=n;return e},absoluteURI:Na,Call_ID:Fa,Content_Disposition:function(){var t,r,i,s,o,a;if(t=mo,(r=function(){var t,r;return t=mo,e.substr(mo,6).toLowerCase()===rn?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(nn)),r===n&&(e.substr(mo,7).toLowerCase()===sn?(r=e.substr(mo,7),mo+=7):(r=n,0===_o&&Io(on)),r===n&&(e.substr(mo,4).toLowerCase()===an?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(un)),r===n&&(e.substr(mo,5).toLowerCase()===cn?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(hn)),r===n&&(r=Xo())))),r!==n&&(yo=t,r=ln()),t=r}())!==n){for(i=[],s=mo,(o=ia())!==n&&(a=Ya())!==n?s=o=[o,a]:(mo=s,s=n);s!==n;)i.push(s),s=mo,(o=ia())!==n&&(a=Ya())!==n?s=o=[o,a]:(mo=s,s=n);i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t},Content_Length:function(){var e,t,r;if(e=mo,t=[],(r=No())!==n)for(;r!==n;)t.push(r),r=No();else t=n;return t!==n&&(yo=e,t=yn(t)),e=t},Content_Type:function(){var t,r;return t=mo,(r=function(){var t,r,i,s,o,a,u,c;if(t=mo,(r=function(){var t;return(t=function(){var t;return e.substr(mo,4).toLowerCase()===bn?(t=e.substr(mo,4),mo+=4):(t=n,0===_o&&Io(Sn)),t===n&&(e.substr(mo,5).toLowerCase()===_n?(t=e.substr(mo,5),mo+=5):(t=n,0===_o&&Io(Cn)),t===n&&(e.substr(mo,5).toLowerCase()===En?(t=e.substr(mo,5),mo+=5):(t=n,0===_o&&Io(wn)),t===n&&(e.substr(mo,5).toLowerCase()===An?(t=e.substr(mo,5),mo+=5):(t=n,0===_o&&Io(Rn)),t===n&&(e.substr(mo,11).toLowerCase()===xn?(t=e.substr(mo,11),mo+=11):(t=n,0===_o&&Io(In)),t===n&&(t=Xa()))))),t}())===n&&(t=function(){var t;return e.substr(mo,7).toLowerCase()===On?(t=e.substr(mo,7),mo+=7):(t=n,0===_o&&Io(Dn)),t===n&&(e.substr(mo,9).toLowerCase()===Nn?(t=e.substr(mo,9),mo+=9):(t=n,0===_o&&Io(Pn)),t===n&&(t=Xa())),t}()),t}())!==n)if((i=Zo())!==n)if((s=function(){var e;return(e=Xa())===n&&(e=Xo()),e}())!==n){for(o=[],a=mo,(u=ia())!==n&&(c=Ja())!==n?a=u=[u,c]:(mo=a,a=n);a!==n;)o.push(a),a=mo,(u=ia())!==n&&(c=Ja())!==n?a=u=[u,c]:(mo=a,a=n);o!==n?t=r=[r,i,s,o]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;return t}())!==n&&(yo=t,r=Tn()),t=r},CSeq:function(){var e,t,r,i;return e=mo,(t=function(){var e,t,r;if(e=mo,t=[],(r=No())!==n)for(;r!==n;)t.push(r),r=No();else t=n;return t!==n&&(yo=e,t=Ln(t)),e=t}())!==n&&(r=$o())!==n&&(i=ja())!==n?e=t=[t,r,i]:(mo=e,e=n),e},displayName:$a,Event:function(){var e,t,r,i,s,o;if(e=mo,(t=Qa())!==n){for(r=[],i=mo,(s=ia())!==n&&(o=Va())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=Va())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=Mn(t),e=t):(mo=e,e=n)}else mo=e,e=n;return e},From:function(){var e,t,r,i,s,o;if(e=mo,(t=la())===n&&(t=Ka()),t!==n){for(r=[],i=mo,(s=ia())!==n&&(o=Za())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=Za())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=Hn(),e=t):(mo=e,e=n)}else mo=e,e=n;return e},host:ma,Max_Forwards:function(){var e,t,r;if(e=mo,t=[],(r=No())!==n)for(;r!==n;)t.push(r),r=No();else t=n;return t!==n&&(yo=e,t=Bn(t)),e=t},Min_SE:function(){var e,t,r,i,s,o;if(e=mo,(t=za())!==n){for(r=[],i=mo,(s=ia())!==n&&(o=Va())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=Va())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=Xs(t),e=t):(mo=e,e=n)}else mo=e,e=n;return e},Proxy_Authenticate:function(){return tu()},quoted_string:aa,Refer_To:function(){var e,t,r,i,s,o;if(e=mo,(t=la())===n&&(t=Ka())===n&&(t=mo,(r=ra())===n&&(r=null),r!==n&&(i=Na())!==n?((s=ta())===n&&(s=null),s!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n)),t!==n){for(r=[],i=mo,(s=ia())!==n&&(o=Va())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=Va())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=Ri(),e=t):(mo=e,e=n)}else mo=e,e=n;return e},Replaces:function(){var e,t,r,i,s,o;if(e=mo,(t=function(){var e,t;return e=mo,(t=Fa())!==n&&(yo=e,t=Ii()),e=t}())!==n){for(r=[],i=mo,(s=ia())!==n&&(o=au())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=au())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=xi(),e=t):(mo=e,e=n)}else mo=e,e=n;return e},Session_Expires:function(){var e,t,r,i,s,o;if(e=mo,(t=za())!==n){for(r=[],i=mo,(s=ia())!==n&&(o=fu())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=fu())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=Bs(t),e=t):(mo=e,e=n)}else mo=e,e=n;return e},stun_URI:function(){var t,r,i,s;return t=mo,(r=function(){var t,r;return t=mo,e.substr(mo,5).toLowerCase()===Js?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(Qs)),r===n&&(e.substr(mo,4).toLowerCase()===Zs?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(eo))),r!==n&&(yo=t,r=to(r)),t=r}())!==n?(58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i!==n&&(s=gu())!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n),t},To:function(){var e,t,r,i,s,o;if(e=mo,(t=la())===n&&(t=Ka()),t!==n){for(r=[],i=mo,(s=ia())!==n&&(o=cu())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=cu())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,t=ms(),e=t):(mo=e,e=n)}else mo=e,e=n;return e},turn_URI:function(){var t,r,i,s,o,a,u;return t=mo,(r=function(){var t,r;return t=mo,e.substr(mo,5).toLowerCase()===so?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(oo)),r===n&&(e.substr(mo,4).toLowerCase()===ao?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(uo))),r!==n&&(yo=t,r=to(r)),t=r}())!==n?(58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i!==n&&(s=gu())!==n?(o=mo,e.substr(mo,11)===no?(a=no,mo+=11):(a=n,0===_o&&Io(io)),a!==n&&(u=pu())!==n?o=a=[a,u]:(mo=o,o=n),o===n&&(o=null),o!==n?t=r=[r,i,s,o]:(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t},uuid:function(){var t,r,i,s,o,a;return t=mo,(r=function(){var e,t,r;return e=mo,(t=vu())!==n&&(r=vu())!==n?e=t=[t,r]:(mo=e,e=n),e}())!==n?(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i!==n&&vu()!==n?(45===e.charCodeAt(mo)?(s=z,mo++):(s=n,0===_o&&Io(V)),s!==n&&vu()!==n?(45===e.charCodeAt(mo)?(o=z,mo++):(o=n,0===_o&&Io(V)),o!==n&&vu()!==n?(45===e.charCodeAt(mo)?(a=z,mo++):(a=n,0===_o&&Io(V)),a!==n&&function(){var e,t,r,i;return e=mo,(t=vu())!==n&&(r=vu())!==n&&(i=vu())!==n?e=t=[t,r,i]:(mo=e,e=n),e}()!==n?(yo=t,r=co(),t=r):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t},WWW_Authenticate:function(){return tu()},challenge:tu,sipfrag:function(){var e,t,r,i,s,o;if(e=mo,(t=Da())!==n){for(r=[],i=Ia();i!==n;)r.push(i),i=Ia();r!==n?(i=mo,(s=Do())!==n&&(o=function(){var e,t;for(e=[],t=Lo();t!==n;)e.push(t),t=Lo();return e}())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?e=t=[t,r,i]:(mo=e,e=n)):(mo=e,e=n)}else mo=e,e=n;return e},Referred_By:function(){var t,r,i,s,o,a,u,c;if(t=mo,e.substr(mo,11)===ho?(r=ho,mo+=11):(r=n,0===_o&&Io(lo)),r===n&&(98===e.charCodeAt(mo)?(r=po,mo++):(r=n,0===_o&&Io(fo))),r!==n)if((i=zo())!==n)if((s=function(){var e;return(e=Ka())===n&&(e=la()),e}())!==n){for(o=[],a=mo,(u=ia())!==n?((c=mu())===n&&(c=Va()),c!==n?a=u=[u,c]:(mo=a,a=n)):(mo=a,a=n);a!==n;)o.push(a),a=mo,(u=ia())!==n?((c=mu())===n&&(c=Va()),c!==n?a=u=[u,c]:(mo=a,a=n)):(mo=a,a=n);o!==n?t=r=[r,i,s,o]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;return t}},u=Ba,c="\r\n",h=wo("\r\n",!1),l=/^[0-9]/,p=Ao([["0","9"]],!1,!1),d=/^[a-zA-Z]/,f=Ao([["a","z"],["A","Z"]],!1,!1),g=/^[0-9a-fA-F]/,v=Ao([["0","9"],["a","f"],["A","F"]],!1,!1),m=/^[\0-\xFF]/,y=Ao([["\0",""]],!1,!1),T=/^["]/,b=Ao(['"'],!1,!1),S=" ",_=wo(" ",!1),C="\t",E=wo("\t",!1),w=/^[a-zA-Z0-9]/,A=Ao([["a","z"],["A","Z"],["0","9"]],!1,!1),R=";",x=wo(";",!1),I="/",O=wo("/",!1),D="?",N=wo("?",!1),P=":",k=wo(":",!1),U="@",L=wo("@",!1),M="&",H=wo("&",!1),q="=",j=wo("=",!1),F="+",B=wo("+",!1),G="$",K=wo("$",!1),$=",",W=wo(",",!1),z="-",V=wo("-",!1),Y="_",X=wo("_",!1),J=".",Q=wo(".",!1),Z="!",ee=wo("!",!1),te="~",re=wo("~",!1),ne="*",ie=wo("*",!1),se="'",oe=wo("'",!1),ae="(",ue=wo("(",!1),ce=")",he=wo(")",!1),le="%",pe=wo("%",!1),de=function(){return" "},fe=function(){return":"},ge=(Ao([["!","~"]],!1,!1),/^[\x80-\uFFFF]/),ve=Ao([["",""]],!1,!1),me=/^[\x80-\xBF]/,ye=Ao([["",""]],!1,!1),Te=(Ao([["a","f"]],!1,!1),"`"),be=wo("`",!1),Se="<",_e=wo("<",!1),Ce=">",Ee=wo(">",!1),we="\\",Ae=wo("\\",!1),Re="[",xe=wo("[",!1),Ie="]",Oe=wo("]",!1),De="{",Ne=wo("{",!1),Pe="}",ke=wo("}",!1),Ue=function(){return"*"},Le=function(){return"/"},Me=function(){return"="},He=function(){return">"},qe=function(){return"<"},je=function(){return","},Fe=function(){return";"},Be=function(){return":"},Ge=function(){return'"'},Ke=(Ao([["!","'"]],!1,!1),Ao([["*","["]],!1,!1),/^[\]-~]/),$e=Ao([["]","~"]],!1,!1),We=function(e){return e},ze=/^[#-[]/,Ve=Ao([["#","["]],!1,!1),Ye=/^[\0-\t]/,Xe=Ao([["\0","\t"]],!1,!1),Je=/^[\x0B-\f]/,Qe=Ao([["\v","\f"]],!1,!1),Ze=/^[\x0E-\x7F]/,et=Ao([["",""]],!1,!1),tt=function(){(t=t||{data:{}}).data.uri=new o.URI(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},rt=function(){(t=t||{data:{}}).data.uri=new o.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,"SIP_URI"===t.startRule&&(t.data=t.data.uri)},nt="sips",it=wo("sips",!0),st="sip",ot=wo("sip",!0),at=function(e){(t=t||{data:{}}).data.scheme=e},ut=function(){(t=t||{data:{}}).data.user=decodeURIComponent(Co().slice(0,-1))},ct=function(){(t=t||{data:{}}).data.password=Co()},ht=function(){return(t=t||{data:{}}).data.host=Co(),t.data.host},lt=function(){return(t=t||{data:{}}).data.host_type="domain",Co()},pt=/^[a-zA-Z0-9_\-]/,dt=Ao([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),ft=/^[a-zA-Z0-9\-]/,gt=Ao([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),vt=function(){return(t=t||{data:{}}).data.host_type="IPv6",Co()},mt="::",yt=wo("::",!1),Tt=function(){return(t=t||{data:{}}).data.host_type="IPv6",Co()},bt=function(){return(t=t||{data:{}}).data.host_type="IPv4",Co()},St="25",_t=wo("25",!1),Ct=/^[0-5]/,Et=Ao([["0","5"]],!1,!1),wt="2",At=wo("2",!1),Rt=/^[0-4]/,xt=Ao([["0","4"]],!1,!1),It="1",Ot=wo("1",!1),Dt=/^[1-9]/,Nt=Ao([["1","9"]],!1,!1),Pt=function(e){return t=t||{data:{}},e=parseInt(e.join("")),t.data.port=e,e},kt="transport=",Ut=wo("transport=",!0),Lt="udp",Mt=wo("udp",!0),Ht="tcp",qt=wo("tcp",!0),jt="sctp",Ft=wo("sctp",!0),Bt="tls",Gt=wo("tls",!0),Kt=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=e.toLowerCase()},$t="user=",Wt=wo("user=",!0),zt="phone",Vt=wo("phone",!0),Yt="ip",Xt=wo("ip",!0),Jt=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=e.toLowerCase()},Qt="method=",Zt=wo("method=",!0),er=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=e},tr="ttl=",rr=wo("ttl=",!0),nr=function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.ttl=e},ir="maddr=",sr=wo("maddr=",!0),or=function(e){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=e},ar="lr",ur=wo("lr",!0),cr=function(){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},hr=function(e,r){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),r=null===r?void 0:r[1],t.data.uri_params[e.toLowerCase()]=r},lr=function(e,r){e=e.join("").toLowerCase(),r=r.join(""),(t=t||{data:{}}).data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[e]?t.data.uri_headers[e].push(r):t.data.uri_headers[e]=[r]},pr=function(){"Refer_To"===(t=t||{data:{}}).startRule&&(t.data.uri=new o.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},dr="//",fr=wo("//",!1),gr=function(){(t=t||{data:{}}).data.scheme=Co()},vr=wo("SIP",!0),mr=function(){(t=t||{data:{}}).data.sip_version=Co()},yr="INVITE",Tr=wo("INVITE",!1),br="ACK",Sr=wo("ACK",!1),_r=(wo("VXACH",!1),"OPTIONS"),Cr=wo("OPTIONS",!1),Er="BYE",wr=wo("BYE",!1),Ar="CANCEL",Rr=wo("CANCEL",!1),xr="REGISTER",Ir=wo("REGISTER",!1),Or="SUBSCRIBE",Dr=wo("SUBSCRIBE",!1),Nr="NOTIFY",Pr=wo("NOTIFY",!1),kr="REFER",Ur=wo("REFER",!1),Lr="PUBLISH",Mr=wo("PUBLISH",!1),Hr=function(){return(t=t||{data:{}}).data.method=Co(),t.data.method},qr=function(e){(t=t||{data:{}}).data.status_code=parseInt(e.join(""))},jr=function(){(t=t||{data:{}}).data.reason_phrase=Co()},Fr=function(){(t=t||{data:{}}).data=Co()},Br=function(){var e,r;for(r=(t=t||{data:{}}).data.multi_header.length,e=0;e<r;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},Gr=function(){var e;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{e=new s.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:mo,offset:Eo().start.offset,parsed:e})},Kr=function(e){'"'===(e=Co().trim())[0]&&(e=e.substring(1,e.length-1)),(t=t||{data:{}}).data.displayName=e},$r="q",Wr=wo("q",!0),zr=function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.q=e},Vr="expires",Yr=wo("expires",!0),Xr=function(e){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.expires=e},Jr=function(e){return parseInt(e.join(""))},Qr="0",Zr=wo("0",!1),en=function(){return parseFloat(Co())},tn=function(e,r){(t=t||{data:{}}).data.params||(t.data.params={}),r=null===r?void 0:r[1],t.data.params[e.toLowerCase()]=r},rn="render",nn=wo("render",!0),sn="session",on=wo("session",!0),an="icon",un=wo("icon",!0),cn="alert",hn=wo("alert",!0),ln=function(){"Content_Disposition"===(t=t||{data:{}}).startRule&&(t.data.type=Co().toLowerCase())},pn="handling",dn=wo("handling",!0),fn="optional",gn=wo("optional",!0),vn="required",mn=wo("required",!0),yn=function(e){(t=t||{data:{}}).data=parseInt(e.join(""))},Tn=function(){(t=t||{data:{}}).data=Co()},bn="text",Sn=wo("text",!0),_n="image",Cn=wo("image",!0),En="audio",wn=wo("audio",!0),An="video",Rn=wo("video",!0),xn="application",In=wo("application",!0),On="message",Dn=wo("message",!0),Nn="multipart",Pn=wo("multipart",!0),kn="x-",Un=wo("x-",!0),Ln=function(e){(t=t||{data:{}}).data.value=parseInt(e.join(""))},Mn=function(e){(t=t||{data:{}}).data.event=e.toLowerCase()},Hn=function(){var e=(t=t||{data:{}}).data.tag;t.data=new s.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},qn="tag",jn=wo("tag",!0),Fn=function(e){(t=t||{data:{}}).data.tag=e},Bn=function(e){(t=t||{data:{}}).data=parseInt(e.join(""))},Gn=function(){(t=t||{data:{}}).data=new s.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},Kn="digest",$n=wo("Digest",!0),Wn="realm",zn=wo("realm",!0),Vn=function(e){(t=t||{data:{}}).data.realm=e},Yn="domain",Xn=wo("domain",!0),Jn="nonce",Qn=wo("nonce",!0),Zn=function(e){(t=t||{data:{}}).data.nonce=e},ei="opaque",ti=wo("opaque",!0),ri=function(e){(t=t||{data:{}}).data.opaque=e},ni="stale",ii=wo("stale",!0),si="true",oi=wo("true",!0),ai=function(){(t=t||{data:{}}).data.stale=!0},ui="false",ci=wo("false",!0),hi=function(){(t=t||{data:{}}).data.stale=!1},li="algorithm",pi=wo("algorithm",!0),di="md5",fi=wo("MD5",!0),gi="md5-sess",vi=wo("MD5-sess",!0),mi=function(e){(t=t||{data:{}}).data.algorithm=e.toUpperCase()},yi="qop",Ti=wo("qop",!0),bi="auth-int",Si=wo("auth-int",!0),_i="auth",Ci=wo("auth",!0),Ei=function(e){(t=t||{data:{}}).data.qop||(t.data.qop=[]),t.data.qop.push(e.toLowerCase())},wi=function(){var e,r;for(r=(t=t||{data:{}}).data.multi_header.length,e=0;e<r;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},Ai=function(){var e;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{e=new s.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:mo,offset:Eo().start.offset,parsed:e})},Ri=function(){(t=t||{data:{}}).data=new s.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},xi=function(){(t=t||{data:{}}).data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},Ii=function(){(t=t||{data:{}}).data={call_id:t.data}},Oi="from-tag",Di=wo("from-tag",!0),Ni=function(e){(t=t||{data:{}}).data.replaces_from_tag=e},Pi="to-tag",ki=wo("to-tag",!0),Ui=function(e){(t=t||{data:{}}).data.replaces_to_tag=e},Li="early-only",Mi=wo("early-only",!0),Hi=function(){(t=t||{data:{}}).data.early_only=!0},qi=function(e,t){return t},ji=function(e,t){return function(e,t){return[e].concat(t)}(e,t)},Fi=function(e){"Require"===(t=t||{data:{}}).startRule&&(t.data=e||[])},Bi="active",Gi=wo("active",!0),Ki="pending",$i=wo("pending",!0),Wi="terminated",zi=wo("terminated",!0),Vi=function(){(t=t||{data:{}}).data.state=Co()},Yi="reason",Xi=wo("reason",!0),Ji=function(e){t=t||{data:{}},void 0!==e&&(t.data.reason=e)},Qi=function(e){t=t||{data:{}},void 0!==e&&(t.data.expires=e)},Zi="retry_after",es=wo("retry_after",!0),ts=function(e){t=t||{data:{}},void 0!==e&&(t.data.retry_after=e)},rs="deactivated",ns=wo("deactivated",!0),is="probation",ss=wo("probation",!0),os="rejected",as=wo("rejected",!0),us="timeout",cs=wo("timeout",!0),hs="giveup",ls=wo("giveup",!0),ps="noresource",ds=wo("noresource",!0),fs="invariant",gs=wo("invariant",!0),vs=function(e){"Supported"===(t=t||{data:{}}).startRule&&(t.data=e||[])},ms=function(){var e=(t=t||{data:{}}).data.tag;t.data=new s.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},ys="ttl",Ts=wo("ttl",!0),bs=function(e){(t=t||{data:{}}).data.ttl=e},Ss="maddr",_s=wo("maddr",!0),Cs=function(e){(t=t||{data:{}}).data.maddr=e},Es="received",ws=wo("received",!0),As=function(e){(t=t||{data:{}}).data.received=e},Rs="branch",xs=wo("branch",!0),Is=function(e){(t=t||{data:{}}).data.branch=e},Os="rport",Ds=wo("rport",!0),Ns=function(e){t=t||{data:{}},void 0!==e&&(t.data.rport=e.join(""))},Ps=function(e){(t=t||{data:{}}).data.protocol=e},ks=wo("UDP",!0),Us=wo("TCP",!0),Ls=wo("TLS",!0),Ms=wo("SCTP",!0),Hs=function(e){(t=t||{data:{}}).data.transport=e},qs=function(){(t=t||{data:{}}).data.host=Co()},js=function(e){(t=t||{data:{}}).data.port=parseInt(e.join(""))},Fs=function(e){return parseInt(e.join(""))},Bs=function(e){"Session_Expires"===(t=t||{data:{}}).startRule&&(t.data.deltaSeconds=e)},Gs="refresher",Ks=wo("refresher",!1),$s="uas",Ws=wo("uas",!1),zs="uac",Vs=wo("uac",!1),Ys=function(e){"Session_Expires"===(t=t||{data:{}}).startRule&&(t.data.refresher=e)},Xs=function(e){"Min_SE"===(t=t||{data:{}}).startRule&&(t.data=e)},Js="stuns",Qs=wo("stuns",!0),Zs="stun",eo=wo("stun",!0),to=function(e){(t=t||{data:{}}).data.scheme=e},ro=function(e){(t=t||{data:{}}).data.host=e},no="?transport=",io=wo("?transport=",!1),so="turns",oo=wo("turns",!0),ao="turn",uo=wo("turn",!0),co=function(){(t=t||{data:{}}).data=Co()},ho="Referred-By",lo=wo("Referred-By",!1),po="b",fo=wo("b",!1),go="cid",vo=wo("cid",!1),mo=0,yo=0,To=[{line:1,column:1}],bo=0,So=[],_o=0;if(void 0!==t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');u=i[t.startRule]}function Co(){return e.substring(yo,mo)}function Eo(){return xo(yo,mo)}function wo(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ao(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Ro(t){var r,n=To[t];if(n)return n;for(r=t-1;!To[r];)r--;for(n={line:(n=To[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return To[t]=n,n}function xo(e,t){var r=Ro(e),n=Ro(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function Io(e){mo<bo||(mo>bo&&(bo=mo,So=[]),So.push(e))}function Oo(e,t,r){return new a(a.buildMessage(e,t),e,t,r)}function Do(){var t;return e.substr(mo,2)===c?(t=c,mo+=2):(t=n,0===_o&&Io(h)),t}function No(){var t;return l.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(p)),t}function Po(){var t;return d.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(f)),t}function ko(){var t;return g.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(v)),t}function Uo(){var e;return(e=Ho())===n&&(e=qo()),e}function Lo(){var t;return m.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(y)),t}function Mo(){var t;return T.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(b)),t}function Ho(){var t;return 32===e.charCodeAt(mo)?(t=S,mo++):(t=n,0===_o&&Io(_)),t}function qo(){var t;return 9===e.charCodeAt(mo)?(t=C,mo++):(t=n,0===_o&&Io(E)),t}function jo(){var t;return w.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(A)),t}function Fo(){var t;return 59===e.charCodeAt(mo)?(t=R,mo++):(t=n,0===_o&&Io(x)),t===n&&(47===e.charCodeAt(mo)?(t=I,mo++):(t=n,0===_o&&Io(O)),t===n&&(63===e.charCodeAt(mo)?(t=D,mo++):(t=n,0===_o&&Io(N)),t===n&&(58===e.charCodeAt(mo)?(t=P,mo++):(t=n,0===_o&&Io(k)),t===n&&(64===e.charCodeAt(mo)?(t=U,mo++):(t=n,0===_o&&Io(L)),t===n&&(38===e.charCodeAt(mo)?(t=M,mo++):(t=n,0===_o&&Io(H)),t===n&&(61===e.charCodeAt(mo)?(t=q,mo++):(t=n,0===_o&&Io(j)),t===n&&(43===e.charCodeAt(mo)?(t=F,mo++):(t=n,0===_o&&Io(B)),t===n&&(36===e.charCodeAt(mo)?(t=G,mo++):(t=n,0===_o&&Io(K)),t===n&&(44===e.charCodeAt(mo)?(t=$,mo++):(t=n,0===_o&&Io(W))))))))))),t}function Bo(){var e;return(e=jo())===n&&(e=Go()),e}function Go(){var t;return 45===e.charCodeAt(mo)?(t=z,mo++):(t=n,0===_o&&Io(V)),t===n&&(95===e.charCodeAt(mo)?(t=Y,mo++):(t=n,0===_o&&Io(X)),t===n&&(46===e.charCodeAt(mo)?(t=J,mo++):(t=n,0===_o&&Io(Q)),t===n&&(33===e.charCodeAt(mo)?(t=Z,mo++):(t=n,0===_o&&Io(ee)),t===n&&(126===e.charCodeAt(mo)?(t=te,mo++):(t=n,0===_o&&Io(re)),t===n&&(42===e.charCodeAt(mo)?(t=ne,mo++):(t=n,0===_o&&Io(ie)),t===n&&(39===e.charCodeAt(mo)?(t=se,mo++):(t=n,0===_o&&Io(oe)),t===n&&(40===e.charCodeAt(mo)?(t=ae,mo++):(t=n,0===_o&&Io(ue)),t===n&&(41===e.charCodeAt(mo)?(t=ce,mo++):(t=n,0===_o&&Io(he)))))))))),t}function Ko(){var t,r,i,s,o;return t=mo,r=mo,37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i!==n&&(s=ko())!==n&&(o=ko())!==n?r=i=[i,s,o]:(mo=r,r=n),t=r!==n?e.substring(t,mo):r}function $o(){var e,t,r,i;for(e=mo,t=mo,r=[],i=Uo();i!==n;)r.push(i),i=Uo();if(r!==n&&(i=Do())!==n?t=r=[r,i]:(mo=t,t=n),t===n&&(t=null),t!==n){if(r=[],(i=Uo())!==n)for(;i!==n;)r.push(i),i=Uo();else r=n;r!==n?(yo=e,e=t=de()):(mo=e,e=n)}else mo=e,e=n;return e}function Wo(){var e;return(e=$o())===n&&(e=null),e}function zo(){var t,r,i;for(t=mo,r=[],(i=Ho())===n&&(i=qo());i!==n;)r.push(i),(i=Ho())===n&&(i=qo());return r!==n?(58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i!==n&&Wo()!==n?(yo=t,t=r=fe()):(mo=t,t=n)):(mo=t,t=n),t}function Vo(){var t;return ge.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(ve)),t}function Yo(){var t;return me.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(ye)),t}function Xo(){var t,r,i;if(t=mo,r=[],(i=jo())===n&&(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i===n&&(46===e.charCodeAt(mo)?(i=J,mo++):(i=n,0===_o&&Io(Q)),i===n&&(33===e.charCodeAt(mo)?(i=Z,mo++):(i=n,0===_o&&Io(ee)),i===n&&(37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i===n&&(42===e.charCodeAt(mo)?(i=ne,mo++):(i=n,0===_o&&Io(ie)),i===n&&(95===e.charCodeAt(mo)?(i=Y,mo++):(i=n,0===_o&&Io(X)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(96===e.charCodeAt(mo)?(i=Te,mo++):(i=n,0===_o&&Io(be)),i===n&&(39===e.charCodeAt(mo)?(i=se,mo++):(i=n,0===_o&&Io(oe)),i===n&&(126===e.charCodeAt(mo)?(i=te,mo++):(i=n,0===_o&&Io(re)))))))))))),i!==n)for(;i!==n;)r.push(i),(i=jo())===n&&(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i===n&&(46===e.charCodeAt(mo)?(i=J,mo++):(i=n,0===_o&&Io(Q)),i===n&&(33===e.charCodeAt(mo)?(i=Z,mo++):(i=n,0===_o&&Io(ee)),i===n&&(37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i===n&&(42===e.charCodeAt(mo)?(i=ne,mo++):(i=n,0===_o&&Io(ie)),i===n&&(95===e.charCodeAt(mo)?(i=Y,mo++):(i=n,0===_o&&Io(X)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(96===e.charCodeAt(mo)?(i=Te,mo++):(i=n,0===_o&&Io(be)),i===n&&(39===e.charCodeAt(mo)?(i=se,mo++):(i=n,0===_o&&Io(oe)),i===n&&(126===e.charCodeAt(mo)?(i=te,mo++):(i=n,0===_o&&Io(re))))))))))));else r=n;return t=r!==n?e.substring(t,mo):r}function Jo(){var t,r,i;if(t=mo,r=[],(i=jo())===n&&(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i===n&&(33===e.charCodeAt(mo)?(i=Z,mo++):(i=n,0===_o&&Io(ee)),i===n&&(37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i===n&&(42===e.charCodeAt(mo)?(i=ne,mo++):(i=n,0===_o&&Io(ie)),i===n&&(95===e.charCodeAt(mo)?(i=Y,mo++):(i=n,0===_o&&Io(X)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(96===e.charCodeAt(mo)?(i=Te,mo++):(i=n,0===_o&&Io(be)),i===n&&(39===e.charCodeAt(mo)?(i=se,mo++):(i=n,0===_o&&Io(oe)),i===n&&(126===e.charCodeAt(mo)?(i=te,mo++):(i=n,0===_o&&Io(re))))))))))),i!==n)for(;i!==n;)r.push(i),(i=jo())===n&&(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i===n&&(33===e.charCodeAt(mo)?(i=Z,mo++):(i=n,0===_o&&Io(ee)),i===n&&(37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i===n&&(42===e.charCodeAt(mo)?(i=ne,mo++):(i=n,0===_o&&Io(ie)),i===n&&(95===e.charCodeAt(mo)?(i=Y,mo++):(i=n,0===_o&&Io(X)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(96===e.charCodeAt(mo)?(i=Te,mo++):(i=n,0===_o&&Io(be)),i===n&&(39===e.charCodeAt(mo)?(i=se,mo++):(i=n,0===_o&&Io(oe)),i===n&&(126===e.charCodeAt(mo)?(i=te,mo++):(i=n,0===_o&&Io(re)))))))))));else r=n;return t=r!==n?e.substring(t,mo):r}function Qo(){var t,r,i;if(t=mo,r=[],(i=jo())===n&&(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i===n&&(46===e.charCodeAt(mo)?(i=J,mo++):(i=n,0===_o&&Io(Q)),i===n&&(33===e.charCodeAt(mo)?(i=Z,mo++):(i=n,0===_o&&Io(ee)),i===n&&(37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i===n&&(42===e.charCodeAt(mo)?(i=ne,mo++):(i=n,0===_o&&Io(ie)),i===n&&(95===e.charCodeAt(mo)?(i=Y,mo++):(i=n,0===_o&&Io(X)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(96===e.charCodeAt(mo)?(i=Te,mo++):(i=n,0===_o&&Io(be)),i===n&&(39===e.charCodeAt(mo)?(i=se,mo++):(i=n,0===_o&&Io(oe)),i===n&&(126===e.charCodeAt(mo)?(i=te,mo++):(i=n,0===_o&&Io(re)),i===n&&(40===e.charCodeAt(mo)?(i=ae,mo++):(i=n,0===_o&&Io(ue)),i===n&&(41===e.charCodeAt(mo)?(i=ce,mo++):(i=n,0===_o&&Io(he)),i===n&&(60===e.charCodeAt(mo)?(i=Se,mo++):(i=n,0===_o&&Io(_e)),i===n&&(62===e.charCodeAt(mo)?(i=Ce,mo++):(i=n,0===_o&&Io(Ee)),i===n&&(58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i===n&&(92===e.charCodeAt(mo)?(i=we,mo++):(i=n,0===_o&&Io(Ae)),i===n&&(i=Mo())===n&&(47===e.charCodeAt(mo)?(i=I,mo++):(i=n,0===_o&&Io(O)),i===n&&(91===e.charCodeAt(mo)?(i=Re,mo++):(i=n,0===_o&&Io(xe)),i===n&&(93===e.charCodeAt(mo)?(i=Ie,mo++):(i=n,0===_o&&Io(Oe)),i===n&&(63===e.charCodeAt(mo)?(i=D,mo++):(i=n,0===_o&&Io(N)),i===n&&(123===e.charCodeAt(mo)?(i=De,mo++):(i=n,0===_o&&Io(Ne)),i===n&&(125===e.charCodeAt(mo)?(i=Pe,mo++):(i=n,0===_o&&Io(ke)))))))))))))))))))))))),i!==n)for(;i!==n;)r.push(i),(i=jo())===n&&(45===e.charCodeAt(mo)?(i=z,mo++):(i=n,0===_o&&Io(V)),i===n&&(46===e.charCodeAt(mo)?(i=J,mo++):(i=n,0===_o&&Io(Q)),i===n&&(33===e.charCodeAt(mo)?(i=Z,mo++):(i=n,0===_o&&Io(ee)),i===n&&(37===e.charCodeAt(mo)?(i=le,mo++):(i=n,0===_o&&Io(pe)),i===n&&(42===e.charCodeAt(mo)?(i=ne,mo++):(i=n,0===_o&&Io(ie)),i===n&&(95===e.charCodeAt(mo)?(i=Y,mo++):(i=n,0===_o&&Io(X)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(96===e.charCodeAt(mo)?(i=Te,mo++):(i=n,0===_o&&Io(be)),i===n&&(39===e.charCodeAt(mo)?(i=se,mo++):(i=n,0===_o&&Io(oe)),i===n&&(126===e.charCodeAt(mo)?(i=te,mo++):(i=n,0===_o&&Io(re)),i===n&&(40===e.charCodeAt(mo)?(i=ae,mo++):(i=n,0===_o&&Io(ue)),i===n&&(41===e.charCodeAt(mo)?(i=ce,mo++):(i=n,0===_o&&Io(he)),i===n&&(60===e.charCodeAt(mo)?(i=Se,mo++):(i=n,0===_o&&Io(_e)),i===n&&(62===e.charCodeAt(mo)?(i=Ce,mo++):(i=n,0===_o&&Io(Ee)),i===n&&(58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i===n&&(92===e.charCodeAt(mo)?(i=we,mo++):(i=n,0===_o&&Io(Ae)),i===n&&(i=Mo())===n&&(47===e.charCodeAt(mo)?(i=I,mo++):(i=n,0===_o&&Io(O)),i===n&&(91===e.charCodeAt(mo)?(i=Re,mo++):(i=n,0===_o&&Io(xe)),i===n&&(93===e.charCodeAt(mo)?(i=Ie,mo++):(i=n,0===_o&&Io(Oe)),i===n&&(63===e.charCodeAt(mo)?(i=D,mo++):(i=n,0===_o&&Io(N)),i===n&&(123===e.charCodeAt(mo)?(i=De,mo++):(i=n,0===_o&&Io(Ne)),i===n&&(125===e.charCodeAt(mo)?(i=Pe,mo++):(i=n,0===_o&&Io(ke))))))))))))))))))))))));else r=n;return t=r!==n?e.substring(t,mo):r}function Zo(){var t,r;return t=mo,Wo()!==n?(47===e.charCodeAt(mo)?(r=I,mo++):(r=n,0===_o&&Io(O)),r!==n&&Wo()!==n?(yo=t,t=Le()):(mo=t,t=n)):(mo=t,t=n),t}function ea(){var t,r;return t=mo,Wo()!==n?(61===e.charCodeAt(mo)?(r=q,mo++):(r=n,0===_o&&Io(j)),r!==n&&Wo()!==n?(yo=t,t=Me()):(mo=t,t=n)):(mo=t,t=n),t}function ta(){var t,r;return t=mo,62===e.charCodeAt(mo)?(r=Ce,mo++):(r=n,0===_o&&Io(Ee)),r!==n&&Wo()!==n?(yo=t,t=r=He()):(mo=t,t=n),t}function ra(){var t,r;return t=mo,Wo()!==n?(60===e.charCodeAt(mo)?(r=Se,mo++):(r=n,0===_o&&Io(_e)),r!==n?(yo=t,t=qe()):(mo=t,t=n)):(mo=t,t=n),t}function na(){var t,r;return t=mo,Wo()!==n?(44===e.charCodeAt(mo)?(r=$,mo++):(r=n,0===_o&&Io(W)),r!==n&&Wo()!==n?(yo=t,t=je()):(mo=t,t=n)):(mo=t,t=n),t}function ia(){var t,r;return t=mo,Wo()!==n?(59===e.charCodeAt(mo)?(r=R,mo++):(r=n,0===_o&&Io(x)),r!==n&&Wo()!==n?(yo=t,t=Fe()):(mo=t,t=n)):(mo=t,t=n),t}function sa(){var e;return e=mo,Wo()!==n&&Mo()!==n?(yo=e,e=Ge()):(mo=e,e=n),e}function oa(){var e;return e=mo,Mo()!==n&&Wo()!==n?(yo=e,e=Ge()):(mo=e,e=n),e}function aa(){var t,r,i,s,o,a;if(t=mo,r=mo,(i=Wo())!==n)if((s=Mo())!==n){for(o=[],(a=ca())===n&&(a=ha());a!==n;)o.push(a),(a=ca())===n&&(a=ha());o!==n&&(a=Mo())!==n?r=i=[i,s,o,a]:(mo=r,r=n)}else mo=r,r=n;else mo=r,r=n;return t=r!==n?e.substring(t,mo):r}function ua(){var t,r,i,s;if(t=mo,Wo()!==n)if(Mo()!==n){for(r=mo,i=[],(s=ca())===n&&(s=ha());s!==n;)i.push(s),(s=ca())===n&&(s=ha());(r=i!==n?e.substring(r,mo):i)!==n&&(i=Mo())!==n?(yo=t,t=We(r)):(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;return t}function ca(){var t;return(t=$o())===n&&(33===e.charCodeAt(mo)?(t=Z,mo++):(t=n,0===_o&&Io(ee)),t===n&&(ze.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io(Ve)),t===n&&(Ke.test(e.charAt(mo))?(t=e.charAt(mo),mo++):(t=n,0===_o&&Io($e)),t===n&&(t=Vo())))),t}function ha(){var t,r,i;return t=mo,92===e.charCodeAt(mo)?(r=we,mo++):(r=n,0===_o&&Io(Ae)),r!==n?(Ye.test(e.charAt(mo))?(i=e.charAt(mo),mo++):(i=n,0===_o&&Io(Xe)),i===n&&(Je.test(e.charAt(mo))?(i=e.charAt(mo),mo++):(i=n,0===_o&&Io(Qe)),i===n&&(Ze.test(e.charAt(mo))?(i=e.charAt(mo),mo++):(i=n,0===_o&&Io(et)))),i!==n?t=r=[r,i]:(mo=t,t=n)):(mo=t,t=n),t}function la(){var t,r,i;return t=mo,da()!==n?(58===e.charCodeAt(mo)?(r=P,mo++):(r=n,0===_o&&Io(k)),r!==n?((i=fa())===n&&(i=null),i!==n&&va()!==n?(yo=t,t=tt()):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t}function pa(){var t,r,i,s;return t=mo,da()!==n?(58===e.charCodeAt(mo)?(r=P,mo++):(r=n,0===_o&&Io(k)),r!==n?((i=fa())===n&&(i=null),i!==n&&va()!==n&&function(){var t,r,i,s;for(t=[],r=mo,59===e.charCodeAt(mo)?(i=R,mo++):(i=n,0===_o&&Io(x)),i!==n&&(s=Ra())!==n?r=i=[i,s]:(mo=r,r=n);r!==n;)t.push(r),r=mo,59===e.charCodeAt(mo)?(i=R,mo++):(i=n,0===_o&&Io(x)),i!==n&&(s=Ra())!==n?r=i=[i,s]:(mo=r,r=n);return t}()!==n?((s=function(){var t,r,i,s,o,a,u;if(t=mo,63===e.charCodeAt(mo)?(r=D,mo++):(r=n,0===_o&&Io(N)),r!==n)if((i=Ia())!==n){for(s=[],o=mo,38===e.charCodeAt(mo)?(a=M,mo++):(a=n,0===_o&&Io(H)),a!==n&&(u=Ia())!==n?o=a=[a,u]:(mo=o,o=n);o!==n;)s.push(o),o=mo,38===e.charCodeAt(mo)?(a=M,mo++):(a=n,0===_o&&Io(H)),a!==n&&(u=Ia())!==n?o=a=[a,u]:(mo=o,o=n);s!==n?t=r=[r,i,s]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;return t}())===n&&(s=null),s!==n?(yo=t,t=rt()):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t}function da(){var t,r;return t=mo,e.substr(mo,4).toLowerCase()===nt?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(it)),r===n&&(e.substr(mo,3).toLowerCase()===st?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(ot))),r!==n&&(yo=t,r=at(r)),t=r}function fa(){var t,r,i,s;return t=mo,function(){var e,t;if(e=[],(t=Bo())===n&&(t=Ko())===n&&(t=ga()),t!==n)for(;t!==n;)e.push(t),(t=Bo())===n&&(t=Ko())===n&&(t=ga());else e=n;return e}()!==n?(r=mo,58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i!==n&&(s=function(){var t,r,i;for(t=mo,r=[],(i=Bo())===n&&(i=Ko())===n&&(38===e.charCodeAt(mo)?(i=M,mo++):(i=n,0===_o&&Io(H)),i===n&&(61===e.charCodeAt(mo)?(i=q,mo++):(i=n,0===_o&&Io(j)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(36===e.charCodeAt(mo)?(i=G,mo++):(i=n,0===_o&&Io(K)),i===n&&(44===e.charCodeAt(mo)?(i=$,mo++):(i=n,0===_o&&Io(W)))))));i!==n;)r.push(i),(i=Bo())===n&&(i=Ko())===n&&(38===e.charCodeAt(mo)?(i=M,mo++):(i=n,0===_o&&Io(H)),i===n&&(61===e.charCodeAt(mo)?(i=q,mo++):(i=n,0===_o&&Io(j)),i===n&&(43===e.charCodeAt(mo)?(i=F,mo++):(i=n,0===_o&&Io(B)),i===n&&(36===e.charCodeAt(mo)?(i=G,mo++):(i=n,0===_o&&Io(K)),i===n&&(44===e.charCodeAt(mo)?(i=$,mo++):(i=n,0===_o&&Io(W)))))));return r!==n&&(yo=t,r=ct()),t=r}())!==n?r=i=[i,s]:(mo=r,r=n),r===n&&(r=null),r!==n?(64===e.charCodeAt(mo)?(i=U,mo++):(i=n,0===_o&&Io(L)),i!==n?(yo=t,t=ut()):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t}function ga(){var t;return 38===e.charCodeAt(mo)?(t=M,mo++):(t=n,0===_o&&Io(H)),t===n&&(61===e.charCodeAt(mo)?(t=q,mo++):(t=n,0===_o&&Io(j)),t===n&&(43===e.charCodeAt(mo)?(t=F,mo++):(t=n,0===_o&&Io(B)),t===n&&(36===e.charCodeAt(mo)?(t=G,mo++):(t=n,0===_o&&Io(K)),t===n&&(44===e.charCodeAt(mo)?(t=$,mo++):(t=n,0===_o&&Io(W)),t===n&&(59===e.charCodeAt(mo)?(t=R,mo++):(t=n,0===_o&&Io(x)),t===n&&(63===e.charCodeAt(mo)?(t=D,mo++):(t=n,0===_o&&Io(N)),t===n&&(47===e.charCodeAt(mo)?(t=I,mo++):(t=n,0===_o&&Io(O))))))))),t}function va(){var t,r,i,s,o;return t=mo,(r=ma())!==n?(i=mo,58===e.charCodeAt(mo)?(s=P,mo++):(s=n,0===_o&&Io(k)),s!==n&&(o=Aa())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(mo=t,t=n)):(mo=t,t=n),t}function ma(){var e,t;return e=mo,(t=ya())===n&&(t=Ea())===n&&(t=ba()),t!==n&&(yo=e,t=ht()),e=t}function ya(){var t,r,i,s,o;for(t=mo,r=[],i=mo,(s=Ta())!==n?(46===e.charCodeAt(mo)?(o=J,mo++):(o=n,0===_o&&Io(Q)),o!==n?i=s=[s,o]:(mo=i,i=n)):(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=Ta())!==n?(46===e.charCodeAt(mo)?(o=J,mo++):(o=n,0===_o&&Io(Q)),o!==n?i=s=[s,o]:(mo=i,i=n)):(mo=i,i=n);return r!==n&&(i=function(){var t,r,i,s;if(t=mo,d.test(e.charAt(mo))?(r=e.charAt(mo),mo++):(r=n,0===_o&&Io(f)),r!==n){for(i=[],ft.test(e.charAt(mo))?(s=e.charAt(mo),mo++):(s=n,0===_o&&Io(gt));s!==n;)i.push(s),ft.test(e.charAt(mo))?(s=e.charAt(mo),mo++):(s=n,0===_o&&Io(gt));i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t}())!==n?(46===e.charCodeAt(mo)?(s=J,mo++):(s=n,0===_o&&Io(Q)),s===n&&(s=null),s!==n?(yo=t,t=r=lt()):(mo=t,t=n)):(mo=t,t=n),t}function Ta(){var t,r;if(t=[],pt.test(e.charAt(mo))?(r=e.charAt(mo),mo++):(r=n,0===_o&&Io(dt)),r!==n)for(;r!==n;)t.push(r),pt.test(e.charAt(mo))?(r=e.charAt(mo),mo++):(r=n,0===_o&&Io(dt));else t=n;return t}function ba(){var t,r,i;return t=mo,91===e.charCodeAt(mo)?(r=Re,mo++):(r=n,0===_o&&Io(xe)),r!==n&&Sa()!==n?(93===e.charCodeAt(mo)?(i=Ie,mo++):(i=n,0===_o&&Io(Oe)),i!==n?(yo=t,t=r=vt()):(mo=t,t=n)):(mo=t,t=n),t}function Sa(){var t,r,i,s,o,a,u,c,h,l,p,d,f,g,v;return t=mo,r=mo,(i=_a())!==n?(58===e.charCodeAt(mo)?(s=P,mo++):(s=n,0===_o&&Io(k)),s!==n&&(o=_a())!==n?(58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?(58===e.charCodeAt(mo)?(c=P,mo++):(c=n,0===_o&&Io(k)),c!==n&&(h=_a())!==n?(58===e.charCodeAt(mo)?(l=P,mo++):(l=n,0===_o&&Io(k)),l!==n&&(p=_a())!==n?(58===e.charCodeAt(mo)?(d=P,mo++):(d=n,0===_o&&Io(k)),d!==n&&(f=_a())!==n?(58===e.charCodeAt(mo)?(g=P,mo++):(g=n,0===_o&&Io(k)),g!==n&&(v=Ca())!==n?r=i=[i,s,o,a,u,c,h,l,p,d,f,g,v]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=_a())!==n?(58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?(58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?(58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=_a())!==n?(58===e.charCodeAt(mo)?(p=P,mo++):(p=n,0===_o&&Io(k)),p!==n&&(d=_a())!==n?(58===e.charCodeAt(mo)?(f=P,mo++):(f=n,0===_o&&Io(k)),f!==n&&(g=Ca())!==n?r=i=[i,s,o,a,u,c,h,l,p,d,f,g]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=_a())!==n?(58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?(58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?(58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=_a())!==n?(58===e.charCodeAt(mo)?(p=P,mo++):(p=n,0===_o&&Io(k)),p!==n&&(d=Ca())!==n?r=i=[i,s,o,a,u,c,h,l,p,d]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=_a())!==n?(58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?(58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?(58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=Ca())!==n?r=i=[i,s,o,a,u,c,h,l]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=_a())!==n?(58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?(58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=Ca())!==n?r=i=[i,s,o,a,u,c]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=_a())!==n?(58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=Ca())!==n?r=i=[i,s,o,a]:(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=Ca())!==n?r=i=[i,s]:(mo=r,r=n),r===n&&(r=mo,e.substr(mo,2)===mt?(i=mt,mo+=2):(i=n,0===_o&&Io(yt)),i!==n&&(s=_a())!==n?r=i=[i,s]:(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(e.substr(mo,2)===mt?(s=mt,mo+=2):(s=n,0===_o&&Io(yt)),s!==n&&(o=_a())!==n?(58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?(58===e.charCodeAt(mo)?(c=P,mo++):(c=n,0===_o&&Io(k)),c!==n&&(h=_a())!==n?(58===e.charCodeAt(mo)?(l=P,mo++):(l=n,0===_o&&Io(k)),l!==n&&(p=_a())!==n?(58===e.charCodeAt(mo)?(d=P,mo++):(d=n,0===_o&&Io(k)),d!==n&&(f=Ca())!==n?r=i=[i,s,o,a,u,c,h,l,p,d,f]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(s=mo,58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?s=o=[o,a]:(mo=s,s=n),s===n&&(s=null),s!==n?(e.substr(mo,2)===mt?(o=mt,mo+=2):(o=n,0===_o&&Io(yt)),o!==n&&(a=_a())!==n?(58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?(58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=_a())!==n?(58===e.charCodeAt(mo)?(p=P,mo++):(p=n,0===_o&&Io(k)),p!==n&&(d=Ca())!==n?r=i=[i,s,o,a,u,c,h,l,p,d]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(s=mo,58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?s=o=[o,a]:(mo=s,s=n),s===n&&(s=null),s!==n?(o=mo,58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?o=a=[a,u]:(mo=o,o=n),o===n&&(o=null),o!==n?(e.substr(mo,2)===mt?(a=mt,mo+=2):(a=n,0===_o&&Io(yt)),a!==n&&(u=_a())!==n?(58===e.charCodeAt(mo)?(c=P,mo++):(c=n,0===_o&&Io(k)),c!==n&&(h=_a())!==n?(58===e.charCodeAt(mo)?(l=P,mo++):(l=n,0===_o&&Io(k)),l!==n&&(p=Ca())!==n?r=i=[i,s,o,a,u,c,h,l,p]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(s=mo,58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?s=o=[o,a]:(mo=s,s=n),s===n&&(s=null),s!==n?(o=mo,58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?o=a=[a,u]:(mo=o,o=n),o===n&&(o=null),o!==n?(a=mo,58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?a=u=[u,c]:(mo=a,a=n),a===n&&(a=null),a!==n?(e.substr(mo,2)===mt?(u=mt,mo+=2):(u=n,0===_o&&Io(yt)),u!==n&&(c=_a())!==n?(58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=Ca())!==n?r=i=[i,s,o,a,u,c,h,l]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(s=mo,58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?s=o=[o,a]:(mo=s,s=n),s===n&&(s=null),s!==n?(o=mo,58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?o=a=[a,u]:(mo=o,o=n),o===n&&(o=null),o!==n?(a=mo,58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?a=u=[u,c]:(mo=a,a=n),a===n&&(a=null),a!==n?(u=mo,58===e.charCodeAt(mo)?(c=P,mo++):(c=n,0===_o&&Io(k)),c!==n&&(h=_a())!==n?u=c=[c,h]:(mo=u,u=n),u===n&&(u=null),u!==n?(e.substr(mo,2)===mt?(c=mt,mo+=2):(c=n,0===_o&&Io(yt)),c!==n&&(h=Ca())!==n?r=i=[i,s,o,a,u,c,h]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(s=mo,58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?s=o=[o,a]:(mo=s,s=n),s===n&&(s=null),s!==n?(o=mo,58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?o=a=[a,u]:(mo=o,o=n),o===n&&(o=null),o!==n?(a=mo,58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?a=u=[u,c]:(mo=a,a=n),a===n&&(a=null),a!==n?(u=mo,58===e.charCodeAt(mo)?(c=P,mo++):(c=n,0===_o&&Io(k)),c!==n&&(h=_a())!==n?u=c=[c,h]:(mo=u,u=n),u===n&&(u=null),u!==n?(c=mo,58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=_a())!==n?c=h=[h,l]:(mo=c,c=n),c===n&&(c=null),c!==n?(e.substr(mo,2)===mt?(h=mt,mo+=2):(h=n,0===_o&&Io(yt)),h!==n&&(l=_a())!==n?r=i=[i,s,o,a,u,c,h,l]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n),r===n&&(r=mo,(i=_a())!==n?(s=mo,58===e.charCodeAt(mo)?(o=P,mo++):(o=n,0===_o&&Io(k)),o!==n&&(a=_a())!==n?s=o=[o,a]:(mo=s,s=n),s===n&&(s=null),s!==n?(o=mo,58===e.charCodeAt(mo)?(a=P,mo++):(a=n,0===_o&&Io(k)),a!==n&&(u=_a())!==n?o=a=[a,u]:(mo=o,o=n),o===n&&(o=null),o!==n?(a=mo,58===e.charCodeAt(mo)?(u=P,mo++):(u=n,0===_o&&Io(k)),u!==n&&(c=_a())!==n?a=u=[u,c]:(mo=a,a=n),a===n&&(a=null),a!==n?(u=mo,58===e.charCodeAt(mo)?(c=P,mo++):(c=n,0===_o&&Io(k)),c!==n&&(h=_a())!==n?u=c=[c,h]:(mo=u,u=n),u===n&&(u=null),u!==n?(c=mo,58===e.charCodeAt(mo)?(h=P,mo++):(h=n,0===_o&&Io(k)),h!==n&&(l=_a())!==n?c=h=[h,l]:(mo=c,c=n),c===n&&(c=null),c!==n?(h=mo,58===e.charCodeAt(mo)?(l=P,mo++):(l=n,0===_o&&Io(k)),l!==n&&(p=_a())!==n?h=l=[l,p]:(mo=h,h=n),h===n&&(h=null),h!==n?(e.substr(mo,2)===mt?(l=mt,mo+=2):(l=n,0===_o&&Io(yt)),l!==n?r=i=[i,s,o,a,u,c,h,l]:(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n)):(mo=r,r=n))))))))))))))),r!==n&&(yo=t,r=Tt()),t=r}function _a(){var e,t,r,i,s;return e=mo,(t=ko())!==n?((r=ko())===n&&(r=null),r!==n?((i=ko())===n&&(i=null),i!==n?((s=ko())===n&&(s=null),s!==n?e=t=[t,r,i,s]:(mo=e,e=n)):(mo=e,e=n)):(mo=e,e=n)):(mo=e,e=n),e}function Ca(){var t,r,i,s;return t=mo,(r=_a())!==n?(58===e.charCodeAt(mo)?(i=P,mo++):(i=n,0===_o&&Io(k)),i!==n&&(s=_a())!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n),t===n&&(t=Ea()),t}function Ea(){var t,r,i,s;return t=mo,wa()!==n?(46===e.charCodeAt(mo)?(r=J,mo++):(r=n,0===_o&&Io(Q)),r!==n&&wa()!==n?(46===e.charCodeAt(mo)?(i=J,mo++):(i=n,0===_o&&Io(Q)),i!==n&&wa()!==n?(46===e.charCodeAt(mo)?(s=J,mo++):(s=n,0===_o&&Io(Q)),s!==n&&wa()!==n?(yo=t,t=bt()):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t}function wa(){var t,r,i,s;return t=mo,e.substr(mo,2)===St?(r=St,mo+=2):(r=n,0===_o&&Io(_t)),r!==n?(Ct.test(e.charAt(mo))?(i=e.charAt(mo),mo++):(i=n,0===_o&&Io(Et)),i!==n?t=r=[r,i]:(mo=t,t=n)):(mo=t,t=n),t===n&&(t=mo,50===e.charCodeAt(mo)?(r=wt,mo++):(r=n,0===_o&&Io(At)),r!==n?(Rt.test(e.charAt(mo))?(i=e.charAt(mo),mo++):(i=n,0===_o&&Io(xt)),i!==n&&(s=No())!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n),t===n&&(t=mo,49===e.charCodeAt(mo)?(r=It,mo++):(r=n,0===_o&&Io(Ot)),r!==n&&(i=No())!==n&&(s=No())!==n?t=r=[r,i,s]:(mo=t,t=n),t===n&&(t=mo,Dt.test(e.charAt(mo))?(r=e.charAt(mo),mo++):(r=n,0===_o&&Io(Nt)),r!==n&&(i=No())!==n?t=r=[r,i]:(mo=t,t=n),t===n&&(t=No())))),t}function Aa(){var e,t,r,i,s,o,a;return e=mo,t=mo,(r=No())===n&&(r=null),r!==n?((i=No())===n&&(i=null),i!==n?((s=No())===n&&(s=null),s!==n?((o=No())===n&&(o=null),o!==n?((a=No())===n&&(a=null),a!==n?t=r=[r,i,s,o,a]:(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t!==n&&(yo=e,t=Pt(t)),e=t}function Ra(){var t;return(t=function(){var t,r,i;return t=mo,e.substr(mo,10).toLowerCase()===kt?(r=e.substr(mo,10),mo+=10):(r=n,0===_o&&Io(Ut)),r!==n?(e.substr(mo,3).toLowerCase()===Lt?(i=e.substr(mo,3),mo+=3):(i=n,0===_o&&Io(Mt)),i===n&&(e.substr(mo,3).toLowerCase()===Ht?(i=e.substr(mo,3),mo+=3):(i=n,0===_o&&Io(qt)),i===n&&(e.substr(mo,4).toLowerCase()===jt?(i=e.substr(mo,4),mo+=4):(i=n,0===_o&&Io(Ft)),i===n&&(e.substr(mo,3).toLowerCase()===Bt?(i=e.substr(mo,3),mo+=3):(i=n,0===_o&&Io(Gt)),i===n&&(i=Xo())))),i!==n?(yo=t,r=Kt(i),t=r):(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,5).toLowerCase()===$t?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(Wt)),r!==n?(e.substr(mo,5).toLowerCase()===zt?(i=e.substr(mo,5),mo+=5):(i=n,0===_o&&Io(Vt)),i===n&&(e.substr(mo,2).toLowerCase()===Yt?(i=e.substr(mo,2),mo+=2):(i=n,0===_o&&Io(Xt)),i===n&&(i=Xo())),i!==n?(yo=t,r=Jt(i),t=r):(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,7).toLowerCase()===Qt?(r=e.substr(mo,7),mo+=7):(r=n,0===_o&&Io(Zt)),r!==n&&(i=ja())!==n?(yo=t,r=er(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,4).toLowerCase()===tr?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(rr)),r!==n&&(i=du())!==n?(yo=t,r=nr(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,6).toLowerCase()===ir?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(sr)),r!==n&&(i=ma())!==n?(yo=t,r=or(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i,s,o;return t=mo,e.substr(mo,2).toLowerCase()===ar?(r=e.substr(mo,2),mo+=2):(r=n,0===_o&&Io(ur)),r!==n?(i=mo,61===e.charCodeAt(mo)?(s=q,mo++):(s=n,0===_o&&Io(j)),s!==n&&(o=Xo())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?(yo=t,r=cr(),t=r):(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i,s,o;return t=mo,(r=function(){var t,r,i;if(t=mo,r=[],(i=xa())!==n)for(;i!==n;)r.push(i),i=xa();else r=n;return t=r!==n?e.substring(t,mo):r}())!==n?(i=mo,61===e.charCodeAt(mo)?(s=q,mo++):(s=n,0===_o&&Io(j)),s!==n&&(o=function(){var t,r,i;if(t=mo,r=[],(i=xa())!==n)for(;i!==n;)r.push(i),i=xa();else r=n;return t=r!==n?e.substring(t,mo):r}())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?(yo=t,r=hr(r,i),t=r):(mo=t,t=n)):(mo=t,t=n),t}()),t}function xa(){var t;return(t=function(){var t;return 91===e.charCodeAt(mo)?(t=Re,mo++):(t=n,0===_o&&Io(xe)),t===n&&(93===e.charCodeAt(mo)?(t=Ie,mo++):(t=n,0===_o&&Io(Oe)),t===n&&(47===e.charCodeAt(mo)?(t=I,mo++):(t=n,0===_o&&Io(O)),t===n&&(58===e.charCodeAt(mo)?(t=P,mo++):(t=n,0===_o&&Io(k)),t===n&&(38===e.charCodeAt(mo)?(t=M,mo++):(t=n,0===_o&&Io(H)),t===n&&(43===e.charCodeAt(mo)?(t=F,mo++):(t=n,0===_o&&Io(B)),t===n&&(36===e.charCodeAt(mo)?(t=G,mo++):(t=n,0===_o&&Io(K)))))))),t}())===n&&(t=Bo())===n&&(t=Ko()),t}function Ia(){var t,r,i,s;return t=mo,(r=function(){var e,t;if(e=[],(t=Oa())===n&&(t=Bo())===n&&(t=Ko()),t!==n)for(;t!==n;)e.push(t),(t=Oa())===n&&(t=Bo())===n&&(t=Ko());else e=n;return e}())!==n?(61===e.charCodeAt(mo)?(i=q,mo++):(i=n,0===_o&&Io(j)),i!==n&&(s=function(){var e,t;for(e=[],(t=Oa())===n&&(t=Bo())===n&&(t=Ko());t!==n;)e.push(t),(t=Oa())===n&&(t=Bo())===n&&(t=Ko());return e}())!==n?(yo=t,t=r=lr(r,s)):(mo=t,t=n)):(mo=t,t=n),t}function Oa(){var t;return 91===e.charCodeAt(mo)?(t=Re,mo++):(t=n,0===_o&&Io(xe)),t===n&&(93===e.charCodeAt(mo)?(t=Ie,mo++):(t=n,0===_o&&Io(Oe)),t===n&&(47===e.charCodeAt(mo)?(t=I,mo++):(t=n,0===_o&&Io(O)),t===n&&(63===e.charCodeAt(mo)?(t=D,mo++):(t=n,0===_o&&Io(N)),t===n&&(58===e.charCodeAt(mo)?(t=P,mo++):(t=n,0===_o&&Io(k)),t===n&&(43===e.charCodeAt(mo)?(t=F,mo++):(t=n,0===_o&&Io(B)),t===n&&(36===e.charCodeAt(mo)?(t=G,mo++):(t=n,0===_o&&Io(K)))))))),t}function Da(){var e;return(e=function(){var e,t,r,i,s,o;return e=mo,(t=qa())!==n&&(r=Ho())!==n&&(i=function(){var e,t;return e=mo,(t=function(){var e,t,r,i;return e=mo,(t=No())!==n&&(r=No())!==n&&(i=No())!==n?e=t=[t,r,i]:(mo=e,e=n),e}())!==n&&(yo=e,t=qr(t)),e=t}())!==n&&(s=Ho())!==n&&(o=function(){var e,t,r;for(e=mo,t=[],(r=Fo())===n&&(r=Bo())===n&&(r=Ko())===n&&(r=Vo())===n&&(r=Yo())===n&&(r=Ho())===n&&(r=qo());r!==n;)t.push(r),(r=Fo())===n&&(r=Bo())===n&&(r=Ko())===n&&(r=Vo())===n&&(r=Yo())===n&&(r=Ho())===n&&(r=qo());return t!==n&&(yo=e,t=jr()),e=t}())!==n?e=t=[t,r,i,s,o]:(mo=e,e=n),e}())===n&&(e=function(){var e,t,r,i,s,o;return e=mo,(t=ja())!==n&&(r=Ho())!==n&&(i=function(){var e;return(e=pa())===n&&(e=Na()),e}())!==n&&(s=Ho())!==n&&(o=qa())!==n?e=t=[t,r,i,s,o]:(mo=e,e=n),e}()),e}function Na(){var t,r,i;return t=mo,function(){var t,r,i,s,o;if(t=mo,r=mo,(i=Po())!==n){for(s=[],(o=Po())===n&&(o=No())===n&&(43===e.charCodeAt(mo)?(o=F,mo++):(o=n,0===_o&&Io(B)),o===n&&(45===e.charCodeAt(mo)?(o=z,mo++):(o=n,0===_o&&Io(V)),o===n&&(46===e.charCodeAt(mo)?(o=J,mo++):(o=n,0===_o&&Io(Q)))));o!==n;)s.push(o),(o=Po())===n&&(o=No())===n&&(43===e.charCodeAt(mo)?(o=F,mo++):(o=n,0===_o&&Io(B)),o===n&&(45===e.charCodeAt(mo)?(o=z,mo++):(o=n,0===_o&&Io(V)),o===n&&(46===e.charCodeAt(mo)?(o=J,mo++):(o=n,0===_o&&Io(Q)))));s!==n?r=i=[i,s]:(mo=r,r=n)}else mo=r,r=n;return r!==n&&(yo=t,r=gr()),t=r}()!==n?(58===e.charCodeAt(mo)?(r=P,mo++):(r=n,0===_o&&Io(k)),r!==n?((i=function(){var t,r,i,s,o;return t=mo,(r=function(){var t,r,i,s;return t=mo,e.substr(mo,2)===dr?(r=dr,mo+=2):(r=n,0===_o&&Io(fr)),r!==n&&(i=function(){var t;return(t=function(){var t,r,i,s;return t=mo,r=mo,(i=fa())!==n?(64===e.charCodeAt(mo)?(s=U,mo++):(s=n,0===_o&&Io(L)),s!==n?r=i=[i,s]:(mo=r,r=n)):(mo=r,r=n),r===n&&(r=null),r!==n&&(i=va())!==n?t=r=[r,i]:(mo=t,t=n),t===n&&(t=null),t}())===n&&(t=Ha()),t}())!==n?((s=Pa())===n&&(s=null),s!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n),t}())===n&&(r=Pa()),r!==n?(i=mo,63===e.charCodeAt(mo)?(s=D,mo++):(s=n,0===_o&&Io(N)),s!==n&&(o=function(){var e,t;for(e=[],t=ka();t!==n;)e.push(t),t=ka();return e}())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(mo=t,t=n)):(mo=t,t=n),t}())===n&&(i=function(){var t,r,i,s;if(t=mo,(r=function(){var t;return(t=Bo())===n&&(t=Ko())===n&&(59===e.charCodeAt(mo)?(t=R,mo++):(t=n,0===_o&&Io(x)),t===n&&(63===e.charCodeAt(mo)?(t=D,mo++):(t=n,0===_o&&Io(N)),t===n&&(58===e.charCodeAt(mo)?(t=P,mo++):(t=n,0===_o&&Io(k)),t===n&&(64===e.charCodeAt(mo)?(t=U,mo++):(t=n,0===_o&&Io(L)),t===n&&(38===e.charCodeAt(mo)?(t=M,mo++):(t=n,0===_o&&Io(H)),t===n&&(61===e.charCodeAt(mo)?(t=q,mo++):(t=n,0===_o&&Io(j)),t===n&&(43===e.charCodeAt(mo)?(t=F,mo++):(t=n,0===_o&&Io(B)),t===n&&(36===e.charCodeAt(mo)?(t=G,mo++):(t=n,0===_o&&Io(K)),t===n&&(44===e.charCodeAt(mo)?(t=$,mo++):(t=n,0===_o&&Io(W))))))))))),t}())!==n){for(i=[],s=ka();s!==n;)i.push(s),s=ka();i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t}()),i!==n?(yo=t,t=pr()):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t}function Pa(){var t,r,i;return t=mo,47===e.charCodeAt(mo)?(r=I,mo++):(r=n,0===_o&&Io(O)),r!==n&&(i=function(){var t,r,i,s,o,a;if(t=mo,(r=Ua())!==n){for(i=[],s=mo,47===e.charCodeAt(mo)?(o=I,mo++):(o=n,0===_o&&Io(O)),o!==n&&(a=Ua())!==n?s=o=[o,a]:(mo=s,s=n);s!==n;)i.push(s),s=mo,47===e.charCodeAt(mo)?(o=I,mo++):(o=n,0===_o&&Io(O)),o!==n&&(a=Ua())!==n?s=o=[o,a]:(mo=s,s=n);i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t}())!==n?t=r=[r,i]:(mo=t,t=n),t}function ka(){var e;return(e=Fo())===n&&(e=Bo())===n&&(e=Ko()),e}function Ua(){var t,r,i,s,o,a;for(t=mo,r=[],i=Ma();i!==n;)r.push(i),i=Ma();if(r!==n){for(i=[],s=mo,59===e.charCodeAt(mo)?(o=R,mo++):(o=n,0===_o&&Io(x)),o!==n&&(a=La())!==n?s=o=[o,a]:(mo=s,s=n);s!==n;)i.push(s),s=mo,59===e.charCodeAt(mo)?(o=R,mo++):(o=n,0===_o&&Io(x)),o!==n&&(a=La())!==n?s=o=[o,a]:(mo=s,s=n);i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t}function La(){var e,t;for(e=[],t=Ma();t!==n;)e.push(t),t=Ma();return e}function Ma(){var t;return(t=Bo())===n&&(t=Ko())===n&&(58===e.charCodeAt(mo)?(t=P,mo++):(t=n,0===_o&&Io(k)),t===n&&(64===e.charCodeAt(mo)?(t=U,mo++):(t=n,0===_o&&Io(L)),t===n&&(38===e.charCodeAt(mo)?(t=M,mo++):(t=n,0===_o&&Io(H)),t===n&&(61===e.charCodeAt(mo)?(t=q,mo++):(t=n,0===_o&&Io(j)),t===n&&(43===e.charCodeAt(mo)?(t=F,mo++):(t=n,0===_o&&Io(B)),t===n&&(36===e.charCodeAt(mo)?(t=G,mo++):(t=n,0===_o&&Io(K)),t===n&&(44===e.charCodeAt(mo)?(t=$,mo++):(t=n,0===_o&&Io(W))))))))),t}function Ha(){var t,r;if(t=[],(r=Bo())===n&&(r=Ko())===n&&(36===e.charCodeAt(mo)?(r=G,mo++):(r=n,0===_o&&Io(K)),r===n&&(44===e.charCodeAt(mo)?(r=$,mo++):(r=n,0===_o&&Io(W)),r===n&&(59===e.charCodeAt(mo)?(r=R,mo++):(r=n,0===_o&&Io(x)),r===n&&(58===e.charCodeAt(mo)?(r=P,mo++):(r=n,0===_o&&Io(k)),r===n&&(64===e.charCodeAt(mo)?(r=U,mo++):(r=n,0===_o&&Io(L)),r===n&&(38===e.charCodeAt(mo)?(r=M,mo++):(r=n,0===_o&&Io(H)),r===n&&(61===e.charCodeAt(mo)?(r=q,mo++):(r=n,0===_o&&Io(j)),r===n&&(43===e.charCodeAt(mo)?(r=F,mo++):(r=n,0===_o&&Io(B)))))))))),r!==n)for(;r!==n;)t.push(r),(r=Bo())===n&&(r=Ko())===n&&(36===e.charCodeAt(mo)?(r=G,mo++):(r=n,0===_o&&Io(K)),r===n&&(44===e.charCodeAt(mo)?(r=$,mo++):(r=n,0===_o&&Io(W)),r===n&&(59===e.charCodeAt(mo)?(r=R,mo++):(r=n,0===_o&&Io(x)),r===n&&(58===e.charCodeAt(mo)?(r=P,mo++):(r=n,0===_o&&Io(k)),r===n&&(64===e.charCodeAt(mo)?(r=U,mo++):(r=n,0===_o&&Io(L)),r===n&&(38===e.charCodeAt(mo)?(r=M,mo++):(r=n,0===_o&&Io(H)),r===n&&(61===e.charCodeAt(mo)?(r=q,mo++):(r=n,0===_o&&Io(j)),r===n&&(43===e.charCodeAt(mo)?(r=F,mo++):(r=n,0===_o&&Io(B))))))))));else t=n;return t}function qa(){var t,r,i,s,o,a,u;if(t=mo,e.substr(mo,3).toLowerCase()===st?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(vr)),r!==n)if(47===e.charCodeAt(mo)?(i=I,mo++):(i=n,0===_o&&Io(O)),i!==n){if(s=[],(o=No())!==n)for(;o!==n;)s.push(o),o=No();else s=n;if(s!==n)if(46===e.charCodeAt(mo)?(o=J,mo++):(o=n,0===_o&&Io(Q)),o!==n){if(a=[],(u=No())!==n)for(;u!==n;)a.push(u),u=No();else a=n;a!==n?(yo=t,t=r=mr()):(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n}else mo=t,t=n;else mo=t,t=n;return t}function ja(){var t,r;return t=mo,(r=function(){var t;return e.substr(mo,6)===yr?(t=yr,mo+=6):(t=n,0===_o&&Io(Tr)),t}())===n&&(r=function(){var t;return e.substr(mo,3)===br?(t=br,mo+=3):(t=n,0===_o&&Io(Sr)),t}())===n&&(r=function(){var t;return e.substr(mo,7)===_r?(t=_r,mo+=7):(t=n,0===_o&&Io(Cr)),t}())===n&&(r=function(){var t;return e.substr(mo,3)===Er?(t=Er,mo+=3):(t=n,0===_o&&Io(wr)),t}())===n&&(r=function(){var t;return e.substr(mo,6)===Ar?(t=Ar,mo+=6):(t=n,0===_o&&Io(Rr)),t}())===n&&(r=function(){var t;return e.substr(mo,8)===xr?(t=xr,mo+=8):(t=n,0===_o&&Io(Ir)),t}())===n&&(r=function(){var t;return e.substr(mo,9)===Or?(t=Or,mo+=9):(t=n,0===_o&&Io(Dr)),t}())===n&&(r=function(){var t;return e.substr(mo,7)===Lr?(t=Lr,mo+=7):(t=n,0===_o&&Io(Mr)),t}())===n&&(r=function(){var t;return e.substr(mo,6)===Nr?(t=Nr,mo+=6):(t=n,0===_o&&Io(Pr)),t}())===n&&(r=function(){var t;return e.substr(mo,5)===kr?(t=kr,mo+=5):(t=n,0===_o&&Io(Ur)),t}())===n&&(r=Xo()),r!==n&&(yo=t,r=Hr()),t=r}function Fa(){var t,r,i,s;return t=mo,Qo()!==n?(r=mo,64===e.charCodeAt(mo)?(i=U,mo++):(i=n,0===_o&&Io(L)),i!==n&&(s=Qo())!==n?r=i=[i,s]:(mo=r,r=n),r===n&&(r=null),r!==n?(yo=t,t=Fr()):(mo=t,t=n)):(mo=t,t=n),t}function Ba(){var t,r,i,s,o,a,u;if(t=mo,(r=function(){var t,r;return t=mo,Wo()!==n?(42===e.charCodeAt(mo)?(r=ne,mo++):(r=n,0===_o&&Io(ie)),r!==n&&Wo()!==n?(yo=t,t=Ue()):(mo=t,t=n)):(mo=t,t=n),t}())===n)if(r=mo,(i=Ga())!==n){for(s=[],o=mo,(a=na())!==n&&(u=Ga())!==n?o=a=[a,u]:(mo=o,o=n);o!==n;)s.push(o),o=mo,(a=na())!==n&&(u=Ga())!==n?o=a=[a,u]:(mo=o,o=n);s!==n?r=i=[i,s]:(mo=r,r=n)}else mo=r,r=n;return r!==n&&(yo=t,r=Br()),t=r}function Ga(){var e,t,r,i,s,o;if(e=mo,(t=la())===n&&(t=Ka()),t!==n){for(r=[],i=mo,(s=ia())!==n&&(o=Wa())!==n?i=s=[s,o]:(mo=i,i=n);i!==n;)r.push(i),i=mo,(s=ia())!==n&&(o=Wa())!==n?i=s=[s,o]:(mo=i,i=n);r!==n?(yo=e,e=t=Gr()):(mo=e,e=n)}else mo=e,e=n;return e}function Ka(){var e,t,r,i,s;return e=mo,(t=$a())===n&&(t=null),t!==n&&(r=ra())!==n&&(i=pa())!==n&&(s=ta())!==n?e=t=[t,r,i,s]:(mo=e,e=n),e}function $a(){var e,t,r,i,s,o,a;if(e=mo,t=mo,(r=Xo())!==n){for(i=[],s=mo,(o=$o())!==n&&(a=Xo())!==n?s=o=[o,a]:(mo=s,s=n);s!==n;)i.push(s),s=mo,(o=$o())!==n&&(a=Xo())!==n?s=o=[o,a]:(mo=s,s=n);i!==n?t=r=[r,i]:(mo=t,t=n)}else mo=t,t=n;return t===n&&(t=aa()),t!==n&&(yo=e,t=Kr(t)),e=t}function Wa(){var t;return(t=function(){var t,r,i;return t=mo,e.substr(mo,1).toLowerCase()===$r?(r=e.charAt(mo),mo++):(r=n,0===_o&&Io(Wr)),r!==n&&ea()!==n&&(i=function(){var t,r,i,s,o,a,u;return t=mo,48===e.charCodeAt(mo)?(r=Qr,mo++):(r=n,0===_o&&Io(Zr)),r!==n?(i=mo,46===e.charCodeAt(mo)?(s=J,mo++):(s=n,0===_o&&Io(Q)),s!==n?((o=No())===n&&(o=null),o!==n?((a=No())===n&&(a=null),a!==n?((u=No())===n&&(u=null),u!==n?i=s=[s,o,a,u]:(mo=i,i=n)):(mo=i,i=n)):(mo=i,i=n)):(mo=i,i=n),i===n&&(i=null),i!==n?(yo=t,r=en(),t=r):(mo=t,t=n)):(mo=t,t=n),t}())!==n?(yo=t,r=zr(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,7).toLowerCase()===Vr?(r=e.substr(mo,7),mo+=7):(r=n,0===_o&&Io(Yr)),r!==n&&ea()!==n&&(i=za())!==n?(yo=t,r=Xr(i),t=r):(mo=t,t=n),t}())===n&&(t=Va()),t}function za(){var e,t,r;if(e=mo,t=[],(r=No())!==n)for(;r!==n;)t.push(r),r=No();else t=n;return t!==n&&(yo=e,t=Jr(t)),e=t}function Va(){var e,t,r,i,s;return e=mo,(t=Xo())!==n?(r=mo,(i=ea())!==n&&(s=function(){var e;return(e=Xo())===n&&(e=ma())===n&&(e=aa()),e}())!==n?r=i=[i,s]:(mo=r,r=n),r===n&&(r=null),r!==n?(yo=e,e=t=tn(t,r)):(mo=e,e=n)):(mo=e,e=n),e}function Ya(){var t;return(t=function(){var t,r,i,s;return t=mo,e.substr(mo,8).toLowerCase()===pn?(r=e.substr(mo,8),mo+=8):(r=n,0===_o&&Io(dn)),r!==n&&(i=ea())!==n?(e.substr(mo,8).toLowerCase()===fn?(s=e.substr(mo,8),mo+=8):(s=n,0===_o&&Io(gn)),s===n&&(e.substr(mo,8).toLowerCase()===vn?(s=e.substr(mo,8),mo+=8):(s=n,0===_o&&Io(mn)),s===n&&(s=Xo())),s!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=Va()),t}function Xa(){var t;return(t=Xo())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,2).toLowerCase()===kn?(r=e.substr(mo,2),mo+=2):(r=n,0===_o&&Io(Un)),r!==n&&(i=Xo())!==n?t=r=[r,i]:(mo=t,t=n),t}()),t}function Ja(){var e,t,r,i;return e=mo,(t=Xo())!==n&&(r=ea())!==n&&(i=function(){var e;return(e=Xo())===n&&(e=aa()),e}())!==n?e=t=[t,r,i]:(mo=e,e=n),e}function Qa(){var t,r,i,s,o,a,u;if(t=mo,r=mo,(i=Jo())!==n){for(s=[],o=mo,46===e.charCodeAt(mo)?(a=J,mo++):(a=n,0===_o&&Io(Q)),a!==n&&(u=Jo())!==n?o=a=[a,u]:(mo=o,o=n);o!==n;)s.push(o),o=mo,46===e.charCodeAt(mo)?(a=J,mo++):(a=n,0===_o&&Io(Q)),a!==n&&(u=Jo())!==n?o=a=[a,u]:(mo=o,o=n);s!==n?r=i=[i,s]:(mo=r,r=n)}else mo=r,r=n;return t=r!==n?e.substring(t,mo):r}function Za(){var e;return(e=eu())===n&&(e=Va()),e}function eu(){var t,r,i;return t=mo,e.substr(mo,3).toLowerCase()===qn?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(jn)),r!==n&&ea()!==n&&(i=Xo())!==n?(yo=t,t=r=Fn(i)):(mo=t,t=n),t}function tu(){var t,r,i,s,o,a,u,c;if(t=mo,e.substr(mo,6).toLowerCase()===Kn?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io($n)),r!==n)if((i=$o())!==n)if((s=nu())!==n){for(o=[],a=mo,(u=na())!==n&&(c=nu())!==n?a=u=[u,c]:(mo=a,a=n);a!==n;)o.push(a),a=mo,(u=na())!==n&&(c=nu())!==n?a=u=[u,c]:(mo=a,a=n);o!==n?t=r=[r,i,s,o]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;return t===n&&(t=function(){var e,t,r,i,s,o,a,u;if(e=mo,(t=Xo())!==n)if((r=$o())!==n)if((i=ru())!==n){for(s=[],o=mo,(a=na())!==n&&(u=ru())!==n?o=a=[a,u]:(mo=o,o=n);o!==n;)s.push(o),o=mo,(a=na())!==n&&(u=ru())!==n?o=a=[a,u]:(mo=o,o=n);s!==n?e=t=[t,r,i,s]:(mo=e,e=n)}else mo=e,e=n;else mo=e,e=n;else mo=e,e=n;return e}()),t}function ru(){var e,t,r,i;return e=mo,(t=Xo())!==n&&(r=ea())!==n?((i=Xo())===n&&(i=aa()),i!==n?e=t=[t,r,i]:(mo=e,e=n)):(mo=e,e=n),e}function nu(){var t;return(t=function(){var t,r,i,s;return t=mo,e.substr(mo,5).toLowerCase()===Wn?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(zn)),r!==n&&(i=ea())!==n&&(s=function(){var e,t;return e=mo,(t=ua())!==n&&(yo=e,t=Vn(t)),e=t}())!==n?t=r=[r,i,s]:(mo=t,t=n),t}())===n&&(t=function(){var t,r,i,s,o,a,u,c,h;if(t=mo,e.substr(mo,6).toLowerCase()===Yn?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(Xn)),r!==n)if((i=ea())!==n)if((s=sa())!==n)if((o=iu())!==n){if(a=[],u=mo,c=[],(h=Ho())!==n)for(;h!==n;)c.push(h),h=Ho();else c=n;for(c!==n&&(h=iu())!==n?u=c=[c,h]:(mo=u,u=n);u!==n;){if(a.push(u),u=mo,c=[],(h=Ho())!==n)for(;h!==n;)c.push(h),h=Ho();else c=n;c!==n&&(h=iu())!==n?u=c=[c,h]:(mo=u,u=n)}a!==n&&(u=oa())!==n?t=r=[r,i,s,o,a,u]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;return t}())===n&&(t=function(){var t,r,i,s;return t=mo,e.substr(mo,5).toLowerCase()===Jn?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(Qn)),r!==n&&(i=ea())!==n&&(s=function(){var e,t;return e=mo,(t=ua())!==n&&(yo=e,t=Zn(t)),e=t}())!==n?t=r=[r,i,s]:(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,6).toLowerCase()===ei?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(ti)),r!==n&&ea()!==n&&(i=ua())!==n?(yo=t,r=ri(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i,s,o;return t=mo,e.substr(mo,5).toLowerCase()===ni?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(ii)),r!==n&&(i=ea())!==n?(s=mo,e.substr(mo,4).toLowerCase()===si?(o=e.substr(mo,4),mo+=4):(o=n,0===_o&&Io(oi)),o!==n&&(yo=s,o=ai()),(s=o)===n&&(s=mo,e.substr(mo,5).toLowerCase()===ui?(o=e.substr(mo,5),mo+=5):(o=n,0===_o&&Io(ci)),o!==n&&(yo=s,o=hi()),s=o),s!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,9).toLowerCase()===li?(r=e.substr(mo,9),mo+=9):(r=n,0===_o&&Io(pi)),r!==n&&ea()!==n?(e.substr(mo,3).toLowerCase()===di?(i=e.substr(mo,3),mo+=3):(i=n,0===_o&&Io(fi)),i===n&&(e.substr(mo,8).toLowerCase()===gi?(i=e.substr(mo,8),mo+=8):(i=n,0===_o&&Io(vi)),i===n&&(i=Xo())),i!==n?(yo=t,r=mi(i),t=r):(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i,s,o,a,u,c,h,l;if(t=mo,e.substr(mo,3).toLowerCase()===yi?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(Ti)),r!==n)if((i=ea())!==n)if((s=sa())!==n){if(o=mo,(a=su())!==n){for(u=[],c=mo,44===e.charCodeAt(mo)?(h=$,mo++):(h=n,0===_o&&Io(W)),h!==n&&(l=su())!==n?c=h=[h,l]:(mo=c,c=n);c!==n;)u.push(c),c=mo,44===e.charCodeAt(mo)?(h=$,mo++):(h=n,0===_o&&Io(W)),h!==n&&(l=su())!==n?c=h=[h,l]:(mo=c,c=n);u!==n?o=a=[a,u]:(mo=o,o=n)}else mo=o,o=n;o!==n&&(a=oa())!==n?t=r=[r,i,s,o,a]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;return t}())===n&&(t=ru()),t}function iu(){var e;return(e=Na())===n&&(e=Pa()),e}function su(){var t,r;return t=mo,e.substr(mo,8).toLowerCase()===bi?(r=e.substr(mo,8),mo+=8):(r=n,0===_o&&Io(Si)),r===n&&(e.substr(mo,4).toLowerCase()===_i?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(Ci)),r===n&&(r=Xo())),r!==n&&(yo=t,r=Ei(r)),t=r}function ou(){var e,t,r,i,s;if(e=mo,Ka()!==n){for(t=[],r=mo,(i=ia())!==n&&(s=Va())!==n?r=i=[i,s]:(mo=r,r=n);r!==n;)t.push(r),r=mo,(i=ia())!==n&&(s=Va())!==n?r=i=[i,s]:(mo=r,r=n);t!==n?(yo=e,e=Ai()):(mo=e,e=n)}else mo=e,e=n;return e}function au(){var t,r,i;return t=mo,e.substr(mo,8).toLowerCase()===Oi?(r=e.substr(mo,8),mo+=8):(r=n,0===_o&&Io(Di)),r!==n&&ea()!==n&&(i=Xo())!==n?(yo=t,t=r=Ni(i)):(mo=t,t=n),t===n&&(t=mo,e.substr(mo,6).toLowerCase()===Pi?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(ki)),r!==n&&ea()!==n&&(i=Xo())!==n?(yo=t,t=r=Ui(i)):(mo=t,t=n),t===n&&(t=mo,e.substr(mo,10).toLowerCase()===Li?(r=e.substr(mo,10),mo+=10):(r=n,0===_o&&Io(Mi)),r!==n&&(yo=t,r=Hi()),(t=r)===n&&(t=Va()))),t}function uu(){var t,r,i;return t=mo,e.substr(mo,6).toLowerCase()===Yi?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(Xi)),r!==n&&ea()!==n&&(i=function(){var t;return e.substr(mo,11).toLowerCase()===rs?(t=e.substr(mo,11),mo+=11):(t=n,0===_o&&Io(ns)),t===n&&(e.substr(mo,9).toLowerCase()===is?(t=e.substr(mo,9),mo+=9):(t=n,0===_o&&Io(ss)),t===n&&(e.substr(mo,8).toLowerCase()===os?(t=e.substr(mo,8),mo+=8):(t=n,0===_o&&Io(as)),t===n&&(e.substr(mo,7).toLowerCase()===us?(t=e.substr(mo,7),mo+=7):(t=n,0===_o&&Io(cs)),t===n&&(e.substr(mo,6).toLowerCase()===hs?(t=e.substr(mo,6),mo+=6):(t=n,0===_o&&Io(ls)),t===n&&(e.substr(mo,10).toLowerCase()===ps?(t=e.substr(mo,10),mo+=10):(t=n,0===_o&&Io(ds)),t===n&&(e.substr(mo,9).toLowerCase()===fs?(t=e.substr(mo,9),mo+=9):(t=n,0===_o&&Io(gs)),t===n&&(t=Xo()))))))),t}())!==n?(yo=t,t=r=Ji(i)):(mo=t,t=n),t===n&&(t=mo,e.substr(mo,7).toLowerCase()===Vr?(r=e.substr(mo,7),mo+=7):(r=n,0===_o&&Io(Yr)),r!==n&&ea()!==n&&(i=za())!==n?(yo=t,t=r=Qi(i)):(mo=t,t=n),t===n&&(t=mo,e.substr(mo,11).toLowerCase()===Zi?(r=e.substr(mo,11),mo+=11):(r=n,0===_o&&Io(es)),r!==n&&ea()!==n&&(i=za())!==n?(yo=t,t=r=ts(i)):(mo=t,t=n),t===n&&(t=Va()))),t}function cu(){var e;return(e=eu())===n&&(e=Va()),e}function hu(){var t,r,i,s,o,a,u,c;if(t=mo,(r=function(){var t,r,i,s,o,a;return t=mo,(r=function(){var t,r;return t=mo,e.substr(mo,3).toLowerCase()===st?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(vr)),r===n&&(r=Xo()),r!==n&&(yo=t,r=Ps(r)),t=r}())!==n&&(i=Zo())!==n&&(s=Xo())!==n&&(o=Zo())!==n&&(a=pu())!==n?t=r=[r,i,s,o,a]:(mo=t,t=n),t}())!==n)if((i=$o())!==n)if((s=function(){var t,r,i,s,o;return t=mo,(r=function(){var e,t;return e=mo,(t=ya())===n&&(t=Ea())===n&&(t=ba()),t!==n&&(yo=e,t=qs()),e=t}())!==n?(i=mo,(s=function(){var t,r;return t=mo,Wo()!==n?(58===e.charCodeAt(mo)?(r=P,mo++):(r=n,0===_o&&Io(k)),r!==n&&Wo()!==n?(yo=t,t=Be()):(mo=t,t=n)):(mo=t,t=n),t}())!==n&&(o=function(){var e,t,r,i,s,o,a;return e=mo,t=mo,(r=No())===n&&(r=null),r!==n?((i=No())===n&&(i=null),i!==n?((s=No())===n&&(s=null),s!==n?((o=No())===n&&(o=null),o!==n?((a=No())===n&&(a=null),a!==n?t=r=[r,i,s,o,a]:(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t!==n&&(yo=e,t=js(t)),e=t}())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(mo=t,t=n)):(mo=t,t=n),t}())!==n){for(o=[],a=mo,(u=ia())!==n&&(c=lu())!==n?a=u=[u,c]:(mo=a,a=n);a!==n;)o.push(a),a=mo,(u=ia())!==n&&(c=lu())!==n?a=u=[u,c]:(mo=a,a=n);o!==n?t=r=[r,i,s,o]:(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;else mo=t,t=n;return t}function lu(){var t;return(t=function(){var t,r,i;return t=mo,e.substr(mo,3).toLowerCase()===ys?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(Ts)),r!==n&&ea()!==n&&(i=du())!==n?(yo=t,r=bs(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,5).toLowerCase()===Ss?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(_s)),r!==n&&ea()!==n&&(i=ma())!==n?(yo=t,r=Cs(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,8).toLowerCase()===Es?(r=e.substr(mo,8),mo+=8):(r=n,0===_o&&Io(ws)),r!==n&&ea()!==n?((i=Ea())===n&&(i=Sa())===n&&(i=ba()),i!==n?(yo=t,r=As(i),t=r):(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i;return t=mo,e.substr(mo,6).toLowerCase()===Rs?(r=e.substr(mo,6),mo+=6):(r=n,0===_o&&Io(xs)),r!==n&&ea()!==n&&(i=Xo())!==n?(yo=t,r=Is(i),t=r):(mo=t,t=n),t}())===n&&(t=function(){var t,r,i,s;if(t=mo,e.substr(mo,5).toLowerCase()===Os?(r=e.substr(mo,5),mo+=5):(r=n,0===_o&&Io(Ds)),r!==n)if(ea()!==n){for(i=[],s=No();s!==n;)i.push(s),s=No();i!==n?(yo=t,r=Ns(i),t=r):(mo=t,t=n)}else mo=t,t=n;else mo=t,t=n;return t}())===n&&(t=Va()),t}function pu(){var t,r;return t=mo,e.substr(mo,3).toLowerCase()===Lt?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(ks)),r===n&&(e.substr(mo,3).toLowerCase()===Ht?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(Us)),r===n&&(e.substr(mo,3).toLowerCase()===Bt?(r=e.substr(mo,3),mo+=3):(r=n,0===_o&&Io(Ls)),r===n&&(e.substr(mo,4).toLowerCase()===jt?(r=e.substr(mo,4),mo+=4):(r=n,0===_o&&Io(Ms)),r===n&&(r=Xo())))),r!==n&&(yo=t,r=Hs(r)),t=r}function du(){var e,t,r,i,s;return e=mo,t=mo,(r=No())!==n?((i=No())===n&&(i=null),i!==n?((s=No())===n&&(s=null),s!==n?t=r=[r,i,s]:(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t!==n&&(yo=e,t=Fs(t)),e=t}function fu(){var t;return(t=function(){var t,r,i;return t=mo,e.substr(mo,9)===Gs?(r=Gs,mo+=9):(r=n,0===_o&&Io(Ks)),r!==n&&ea()!==n?(e.substr(mo,3)===$s?(i=$s,mo+=3):(i=n,0===_o&&Io(Ws)),i===n&&(e.substr(mo,3)===zs?(i=zs,mo+=3):(i=n,0===_o&&Io(Vs))),i!==n?(yo=t,r=Ys(i),t=r):(mo=t,t=n)):(mo=t,t=n),t}())===n&&(t=Va()),t}function gu(){var t,r,i,s,o;return t=mo,(r=function(){var e,t;return e=mo,(t=Ea())===n&&(t=ba())===n&&(t=Ha()),t!==n&&(yo=e,t=ro(t)),e=t}())!==n?(i=mo,58===e.charCodeAt(mo)?(s=P,mo++):(s=n,0===_o&&Io(k)),s!==n&&(o=Aa())!==n?i=s=[s,o]:(mo=i,i=n),i===n&&(i=null),i!==n?t=r=[r,i]:(mo=t,t=n)):(mo=t,t=n),t}function vu(){var e,t,r,i,s;return e=mo,(t=ko())!==n&&(r=ko())!==n&&(i=ko())!==n&&(s=ko())!==n?e=t=[t,r,i,s]:(mo=e,e=n),e}function mu(){var t,r,i,s;return t=mo,e.substr(mo,3)===go?(r=go,mo+=3):(r=n,0===_o&&Io(vo)),r!==n&&(i=ea())!==n&&(s=function(){var t,r,i,s,o,a;return t=mo,(r=sa())!==n&&(i=Go())!==n?(64===e.charCodeAt(mo)?(s=U,mo++):(s=n,0===_o&&Io(L)),s!==n?((o=Go())===n&&(o=ma()),o!==n&&(a=oa())!==n?t=r=[r,i,s,o,a]:(mo=t,t=n)):(mo=t,t=n)):(mo=t,t=n),t}())!==n?t=r=[r,i,s]:(mo=t,t=n),t}if(t.data={},(r=u())!==n&&mo===e.length)return r;throw r!==n&&mo<e.length&&Io({type:"end"}),Oo(So,bo<e.length?e.charAt(bo):null,bo<e.length?xo(bo,bo+1):xo(bo,bo))}},function(e,t,r){var n;e.exports=(n=r(41),function(e){var t=n,r=t.lib,i=r.WordArray,s=r.Hasher,o=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,o=e[t+0],u=e[t+1],d=e[t+2],f=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],y=e[t+7],T=e[t+8],b=e[t+9],S=e[t+10],_=e[t+11],C=e[t+12],E=e[t+13],w=e[t+14],A=e[t+15],R=s[0],x=s[1],I=s[2],O=s[3];R=c(R,x,I,O,o,7,a[0]),O=c(O,R,x,I,u,12,a[1]),I=c(I,O,R,x,d,17,a[2]),x=c(x,I,O,R,f,22,a[3]),R=c(R,x,I,O,g,7,a[4]),O=c(O,R,x,I,v,12,a[5]),I=c(I,O,R,x,m,17,a[6]),x=c(x,I,O,R,y,22,a[7]),R=c(R,x,I,O,T,7,a[8]),O=c(O,R,x,I,b,12,a[9]),I=c(I,O,R,x,S,17,a[10]),x=c(x,I,O,R,_,22,a[11]),R=c(R,x,I,O,C,7,a[12]),O=c(O,R,x,I,E,12,a[13]),I=c(I,O,R,x,w,17,a[14]),R=h(R,x=c(x,I,O,R,A,22,a[15]),I,O,u,5,a[16]),O=h(O,R,x,I,m,9,a[17]),I=h(I,O,R,x,_,14,a[18]),x=h(x,I,O,R,o,20,a[19]),R=h(R,x,I,O,v,5,a[20]),O=h(O,R,x,I,S,9,a[21]),I=h(I,O,R,x,A,14,a[22]),x=h(x,I,O,R,g,20,a[23]),R=h(R,x,I,O,b,5,a[24]),O=h(O,R,x,I,w,9,a[25]),I=h(I,O,R,x,f,14,a[26]),x=h(x,I,O,R,T,20,a[27]),R=h(R,x,I,O,E,5,a[28]),O=h(O,R,x,I,d,9,a[29]),I=h(I,O,R,x,y,14,a[30]),R=l(R,x=h(x,I,O,R,C,20,a[31]),I,O,v,4,a[32]),O=l(O,R,x,I,T,11,a[33]),I=l(I,O,R,x,_,16,a[34]),x=l(x,I,O,R,w,23,a[35]),R=l(R,x,I,O,u,4,a[36]),O=l(O,R,x,I,g,11,a[37]),I=l(I,O,R,x,y,16,a[38]),x=l(x,I,O,R,S,23,a[39]),R=l(R,x,I,O,E,4,a[40]),O=l(O,R,x,I,o,11,a[41]),I=l(I,O,R,x,f,16,a[42]),x=l(x,I,O,R,m,23,a[43]),R=l(R,x,I,O,b,4,a[44]),O=l(O,R,x,I,C,11,a[45]),I=l(I,O,R,x,A,16,a[46]),R=p(R,x=l(x,I,O,R,d,23,a[47]),I,O,o,6,a[48]),O=p(O,R,x,I,y,10,a[49]),I=p(I,O,R,x,w,15,a[50]),x=p(x,I,O,R,v,21,a[51]),R=p(R,x,I,O,C,6,a[52]),O=p(O,R,x,I,f,10,a[53]),I=p(I,O,R,x,S,15,a[54]),x=p(x,I,O,R,u,21,a[55]),R=p(R,x,I,O,T,6,a[56]),O=p(O,R,x,I,A,10,a[57]),I=p(I,O,R,x,m,15,a[58]),x=p(x,I,O,R,E,21,a[59]),R=p(R,x,I,O,g,6,a[60]),O=p(O,R,x,I,_,10,a[61]),I=p(I,O,R,x,d,15,a[62]),x=p(x,I,O,R,b,21,a[63]),s[0]=s[0]+R|0,s[1]=s[1]+x|0,s[2]=s[2]+I|0,s[3]=s[3]+O|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var s=e.floor(n/4294967296),o=n;r[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var h=u[c];u[c]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return a},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,r,n,i,s,o){var a=e+(t&r|~t&n)+i+o;return(a<<s|a>>>32-s)+t}function h(e,t,r,n,i,s,o){var a=e+(t&n|r&~n)+i+o;return(a<<s|a>>>32-s)+t}function l(e,t,r,n,i,s,o){var a=e+(t^r^n)+i+o;return(a<<s|a>>>32-s)+t}function p(e,t,r,n,i,s,o){var a=e+(r^(t|~n))+i+o;return(a<<s|a>>>32-s)+t}t.MD5=s._createHelper(u),t.HmacMD5=s._createHmacHelper(u)}(Math),n.MD5)},function(e,t,r){var n;e.exports=(n=n||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},s=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=function(t){var t=t,r=987654321,n=4294967295;return function(){var i=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var a=i(4294967296*(r||e.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new o.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(r,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(r,t)}},h=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,s=this.blockSize,a=4*s,u=i/a,c=(u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0))*s,h=e.min(4*c,i);if(c){for(var l=0;l<c;l+=s)this._doProcessBlock(n,l);var p=n.splice(0,c);r.sigBytes-=h}return new o.init(p,h)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(i.Hasher=l.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math),n)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),o=r(1),a=r(0),u=r(5),c=r(2),h=function(e){function t(t,r,n){void 0===n&&(n={});var i=e.call(this)||this;if(i.C={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500},i.type=a.TypeStrings.DTMF,void 0===r)throw new TypeError("Not enough arguments");if(i.logger=t.ua.getLogger("sip.invitecontext.dtmf",t.id),i.owner=t,"string"==typeof r)r=r.toUpperCase();else{if("number"!=typeof r)throw new TypeError("Invalid tone: "+r);r=r.toString()}if(!r.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+r);i.tone=r;var s=n.duration,o=n.interToneGap;if(s&&!c.Utils.isDecimal(s))throw new TypeError("Invalid tone duration: "+s);if(s?s<i.C.MIN_DURATION?(i.logger.warn("'duration' value is lower than the minimum allowed, setting it to "+i.C.MIN_DURATION+" milliseconds"),s=i.C.MIN_DURATION):s>i.C.MAX_DURATION?(i.logger.warn("'duration' value is greater than the maximum allowed, setting it to "+i.C.MAX_DURATION+" milliseconds"),s=i.C.MAX_DURATION):s=Math.abs(s):s=i.C.DEFAULT_DURATION,i.duration=s,o&&!c.Utils.isDecimal(o))throw new TypeError("Invalid interToneGap: "+o);return o?o<i.C.MIN_INTER_TONE_GAP?(i.logger.warn("'interToneGap' value is lower than the minimum allowed, setting it to "+i.C.MIN_INTER_TONE_GAP+" milliseconds"),o=i.C.MIN_INTER_TONE_GAP):o=Math.abs(o):o=i.C.DEFAULT_INTER_TONE_GAP,i.interToneGap=o,i}return i(t,e),t.prototype.send=function(e){if(void 0===e&&(e={}),this.owner.status!==a.SessionStatus.STATUS_CONFIRMED&&this.owner.status!==a.SessionStatus.STATUS_WAITING_FOR_ACK)throw new u.Exceptions.InvalidStateError(this.owner.status);var t=e.extraHeaders?e.extraHeaders.slice():[],r={contentType:"application/dtmf-relay",body:"Signal= "+this.tone+"\r\nDuration= "+this.duration};if(this.owner.dialog){var n=this.owner.dialog.sendRequest(this,o.C.INFO,{extraHeaders:t,body:r});this.owner.emit("dtmf",n,this)}},t.prototype.init_incoming=function(e){e.reply(200),this.tone&&this.duration?this.owner.emit("dtmf",e,this):this.logger.warn("invalid INFO DTMF received, discarded")},t.prototype.receiveResponse=function(e){var t=e&&e.statusCode?e.statusCode:0;switch(!0){case/^1[0-9]{2}$/.test(t.toString()):break;case/^2[0-9]{2}$/.test(t.toString()):this.emit("succeeded",{originator:"remote",response:e});break;default:var r=c.Utils.sipErrorCause(t);this.emit("failed",e,r)}},t.prototype.onRequestTimeout=function(){this.emit("failed",void 0,o.C.causes.REQUEST_TIMEOUT),this.owner.onRequestTimeout()},t.prototype.onTransportError=function(){this.emit("failed",void 0,o.C.causes.CONNECTION_ERROR),this.owner.onTransportError()},t.prototype.onDialogError=function(e){this.emit("failed",e,o.C.causes.DIALOG_ERROR),this.owner.onDialogError(e)},t}(s.EventEmitter);t.DTMF=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e,t){this.type=n.TypeStrings.SessionDescriptionHandlerObserver,this.session=e,this.options=t}return e.prototype.trackAdded=function(){this.session.emit("trackAdded")},e.prototype.directionChanged=function(){this.session.emit("directionChanged")},e}();t.SessionDescriptionHandlerObserver=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15);t.Modifiers=n;var i=r(45);t.Simple=i.Simple;var s=r(28);t.SessionDescriptionHandler=s.SessionDescriptionHandler;var o=r(29);t.Transport=o.Transport},function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s,o=r(3),a=r(27),u=r(15);!function(e){e[e.STATUS_NULL=0]="STATUS_NULL",e[e.STATUS_NEW=1]="STATUS_NEW",e[e.STATUS_CONNECTING=2]="STATUS_CONNECTING",e[e.STATUS_CONNECTED=3]="STATUS_CONNECTED",e[e.STATUS_COMPLETED=4]="STATUS_COMPLETED"}(s=t.SimpleStatus||(t.SimpleStatus={}));var c=function(t){function r(r){var n=t.call(this)||this;if(r.media.remote.video?n.video=!0:n.video=!1,r.media.remote.audio?n.audio=!0:n.audio=!1,!n.audio&&!n.video)throw new Error("At least one remote audio or video element is required for Simple.");n.options=r;var i=e.navigator.userAgent.toLowerCase(),o=!1,c=!1;i.indexOf("safari")>-1&&i.indexOf("chrome")<0?o=!0:i.indexOf("firefox")>-1&&i.indexOf("chrome")<0&&(c=!0);var h={};return o&&(h.modifiers=[u.stripG722]),c&&(h.alwaysAcquireMediaFirst=!0),n.options.ua.uri?n.anonymous=!1:n.anonymous=!0,n.ua=new a.UA({uri:n.options.ua.uri,authorizationUser:n.options.ua.authorizationUser,password:n.options.ua.password,displayName:n.options.ua.displayName,userAgentString:n.options.ua.userAgentString,register:!0,sessionDescriptionHandlerFactoryOptions:h,transportOptions:{traceSip:n.options.ua.traceSip,wsServers:n.options.ua.wsServers}}),n.state=s.STATUS_NULL,n.logger=n.ua.getLogger("sip.simple"),n.ua.on("registered",function(){n.emit("registered",n.ua)}),n.ua.on("unregistered",function(){n.emit("unregistered",n.ua)}),n.ua.on("failed",function(){n.emit("unregistered",n.ua)}),n.ua.on("invite",function(e){if(n.state!==s.STATUS_NULL&&n.state!==s.STATUS_COMPLETED)return n.logger.warn("Rejecting incoming call. Simple only supports 1 call at a time"),void e.reject();n.session=e,n.setupSession(),n.emit("ringing",n.session)}),n.ua.on("message",function(e){n.emit("message",e)}),n}return i(r,t),r.prototype.call=function(e){if(this.ua&&this.checkRegistration()){if(this.state===s.STATUS_NULL||this.state===s.STATUS_COMPLETED)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.autoplay=!0,this.options.media.local.video.volume=0),this.session=this.ua.invite(e,{sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}}),this.setupSession(),this.session;this.logger.warn("Cannot make more than a single call with Simple")}else this.logger.warn("A registered UA is required for calling")},r.prototype.answer=function(){if(this.state===s.STATUS_NEW||this.state===s.STATUS_CONNECTING)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.session.accept({sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}});this.logger.warn("No call to answer")},r.prototype.reject=function(){if(this.state===s.STATUS_NEW||this.state===s.STATUS_CONNECTING)return this.session.reject();this.logger.warn("Call is already answered")},r.prototype.hangup=function(){if(this.state===s.STATUS_CONNECTED||this.state===s.STATUS_CONNECTING||this.state===s.STATUS_NEW)return this.state!==s.STATUS_CONNECTED?this.session.cancel():this.session?this.session.bye():void 0;this.logger.warn("No active call to hang up on")},r.prototype.hold=function(){if(this.state===s.STATUS_CONNECTED&&this.session&&!this.session.localHold)return this.mute(),this.logger.log("Placing session on hold"),this.session.hold();this.logger.warn("Cannot put call on hold")},r.prototype.unhold=function(){if(this.state===s.STATUS_CONNECTED&&this.session&&this.session.localHold)return this.unmute(),this.logger.log("Placing call off hold"),this.session.unhold();this.logger.warn("Cannot unhold a call that is not on hold")},r.prototype.mute=function(){this.state===s.STATUS_CONNECTED?(this.logger.log("Muting Audio"),this.toggleMute(!0),this.emit("mute",this)):this.logger.warn("An acitve call is required to mute audio")},r.prototype.unmute=function(){this.state===s.STATUS_CONNECTED?(this.logger.log("Unmuting Audio"),this.toggleMute(!1),this.emit("unmute",this)):this.logger.warn("An active call is required to unmute audio")},r.prototype.sendDTMF=function(e){this.state===s.STATUS_CONNECTED&&this.session?(this.logger.log("Sending DTMF tone: "+e),this.session.dtmf(e)):this.logger.warn("An active call is required to send a DTMF tone")},r.prototype.message=function(e,t){this.ua&&this.checkRegistration()?e&&t?this.ua.message(e,t):this.logger.warn("A destination and message are required to send a message"):this.logger.warn("A registered UA is required to send a message")},r.prototype.checkRegistration=function(){return this.anonymous||this.ua&&this.ua.isRegistered()},r.prototype.setupRemoteMedia=function(){var t=this;if(this.session){var r,n=this.session.sessionDescriptionHandler.peerConnection;n.getReceivers?(r=new e.window.MediaStream,n.getReceivers().forEach(function(e){var t=e.track;t&&r.addTrack(t)})):r=n.getRemoteStreams()[0],this.video?(this.options.media.remote.video.srcObject=r,this.options.media.remote.video.play().catch(function(){t.logger.log("play was rejected")})):this.audio&&(this.options.media.remote.audio.srcObject=r,this.options.media.remote.audio.play().catch(function(){t.logger.log("play was rejected")}))}else this.logger.warn("No session to set remote media on")},r.prototype.setupLocalMedia=function(){if(this.session){if(this.video&&this.options.media.local&&this.options.media.local.video){var t,r=this.session.sessionDescriptionHandler.peerConnection;r.getSenders?(t=new e.window.MediaStream,r.getSenders().forEach(function(e){var r=e.track;r&&"video"===r.kind&&t.addTrack(r)})):t=r.getLocalStreams()[0],this.options.media.local.video.srcObject=t,this.options.media.local.video.volume=0,this.options.media.local.video.play()}}else this.logger.warn("No session to set local media on")},r.prototype.cleanupMedia=function(){this.video&&(this.options.media.remote.video.srcObject=null,this.options.media.remote.video.pause(),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.srcObject=null,this.options.media.local.video.pause())),this.audio&&(this.options.media.remote.audio.srcObject=null,this.options.media.remote.audio.pause())},r.prototype.setupSession=function(){var e=this;this.session?(this.state=s.STATUS_NEW,this.emit("new",this.session),this.session.on("progress",function(){return e.onProgress()}),this.session.on("accepted",function(){return e.onAccepted()}),this.session.on("rejected",function(){return e.onEnded()}),this.session.on("failed",function(){return e.onFailed()}),this.session.on("terminated",function(){return e.onEnded()})):this.logger.warn("No session to set up")},r.prototype.destroyMedia=function(){this.session&&this.session.sessionDescriptionHandler&&this.session.sessionDescriptionHandler.close()},r.prototype.toggleMute=function(e){if(this.session){var t=this.session.sessionDescriptionHandler.peerConnection;t.getSenders?t.getSenders().forEach(function(t){t.track&&(t.track.enabled=!e)}):t.getLocalStreams().forEach(function(t){t.getAudioTracks().forEach(function(t){t.enabled=!e}),t.getVideoTracks().forEach(function(t){t.enabled=!e})})}else this.logger.warn("No session to toggle mute")},r.prototype.onAccepted=function(){var e=this;this.session?(this.state=s.STATUS_CONNECTED,this.emit("connected",this.session),this.setupLocalMedia(),this.setupRemoteMedia(),this.session.sessionDescriptionHandler&&(this.session.sessionDescriptionHandler.on("addTrack",function(){e.logger.log("A track has been added, triggering new remoteMedia setup"),e.setupRemoteMedia()}),this.session.sessionDescriptionHandler.on("addStream",function(){e.logger.log("A stream has been added, trigger new remoteMedia setup"),e.setupRemoteMedia()})),this.session.on("dtmf",function(t,r){e.emit("dtmf",r.tone)}),this.session.on("bye",function(){return e.onEnded()})):this.logger.warn("No session for accepting")},r.prototype.onProgress=function(){this.state=s.STATUS_CONNECTING,this.emit("connecting",this.session)},r.prototype.onFailed=function(){this.onEnded()},r.prototype.onEnded=function(){this.state=s.STATUS_COMPLETED,this.emit("ended",this.session),this.cleanupMedia()},r.C=s,r}(o.EventEmitter);t.Simple=c}).call(this,r(7))},function(e,t,r){var n;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var s=[],o=r.document,a=Object.getPrototypeOf,u=s.slice,c=s.concat,h=s.push,l=s.indexOf,p={},d=p.toString,f=p.hasOwnProperty,g=f.toString,v=g.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},T=function(e){return null!=e&&e===e.window},b={type:!0,src:!0,nonce:!0,noModule:!0};function S(e,t,r){var n,i,s=(r=r||o).createElement("script");if(s.text=e,t)for(n in b)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&s.setAttribute(n,i);r.head.appendChild(s).parentNode.removeChild(s)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[d.call(e)]||"object":typeof e}var C=function(e,t){return new C.fn.init(e,t)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(e){var t=!!e&&"length"in e&&e.length,r=_(e);return!y(e)&&!T(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:"3.4.1",constructor:C,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:s.sort,splice:s.splice},C.extend=C.fn.extend=function(){var e,t,r,n,i,s,o=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===u&&(o=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(c&&n&&(C.isPlainObject(n)||(i=Array.isArray(n)))?(r=o[t],s=i&&!Array.isArray(r)?[]:i||C.isPlainObject(r)?r:{},i=!1,o[t]=C.extend(c,s,n)):void 0!==n&&(o[t]=n));return o},C.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==d.call(e))&&(!(t=a(e))||"function"==typeof(r=f.call(t,"constructor")&&t.constructor)&&g.call(r)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){S(e,{nonce:t&&t.nonce})},each:function(e,t){var r,n=0;if(w(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(E,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(w(Object(e))?C.merge(r,"string"==typeof e?[e]:e):h.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:l.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,s=e.length,o=!r;i<s;i++)!t(e[i],i)!==o&&n.push(e[i]);return n},map:function(e,t,r){var n,i,s=0,o=[];if(w(e))for(n=e.length;s<n;s++)null!=(i=t(e[s],s,r))&&o.push(i);else for(s in e)null!=(i=t(e[s],s,r))&&o.push(i);return c.apply([],o)},guid:1,support:m}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=s[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});var A=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){var t,r,n,i,s,o,a,u,c,h,l,p,d,f,g,v,m,y,T,b="sizzle"+1*new Date,S=e.document,_=0,C=0,E=ue(),w=ue(),A=ue(),R=ue(),x=function(e,t){return e===t&&(l=!0),0},I={}.hasOwnProperty,O=[],D=O.pop,N=O.push,P=O.push,k=O.slice,U=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",q="\\["+M+"*("+H+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+M+"*\\]",j=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),G=new RegExp("^"+M+"*,"+M+"*"),K=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),$=new RegExp(M+"|>"),W=new RegExp(j),z=new RegExp("^"+H+"$"),V={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),re=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){p()},oe=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{P.apply(O=k.call(S.childNodes),S.childNodes),O[S.childNodes.length].nodeType}catch(e){P={apply:O.length?function(e,t){N.apply(e,k.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var s,a,c,h,l,f,m,y=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!i&&((t?t.ownerDocument||t:S)!==d&&p(t),t=t||d,g)){if(11!==_&&(l=Z.exec(e)))if(s=l[1]){if(9===_){if(!(c=t.getElementById(s)))return n;if(c.id===s)return n.push(c),n}else if(y&&(c=y.getElementById(s))&&T(t,c)&&c.id===s)return n.push(c),n}else{if(l[2])return P.apply(n,t.getElementsByTagName(e)),n;if((s=l[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&!R[e+" "]&&(!v||!v.test(e))&&(1!==_||"object"!==t.nodeName.toLowerCase())){if(m=e,y=t,1===_&&$.test(e)){for((h=t.getAttribute("id"))?h=h.replace(ne,ie):t.setAttribute("id",h=b),a=(f=o(e)).length;a--;)f[a]="#"+h+" "+Te(f[a]);m=f.join(","),y=ee.test(e)&&me(t.parentNode)||t}try{return P.apply(n,y.querySelectorAll(m)),n}catch(t){R(e,!0)}finally{h===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,n,i)}function ue(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function ce(e){return e[b]=!0,e}function he(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function pe(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ce(function(t){return t=+t,ce(function(r,n){for(var i,s=e([],r.length,t),o=s.length;o--;)r[i=s[o]]&&(r[i]=!(n[i]=r[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},s=ae.isXML=function(e){var t=e.namespaceURI,r=(e.ownerDocument||e).documentElement;return!Y.test(t||r&&r.nodeName||"HTML")},p=ae.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:S;return o!==d&&9===o.nodeType&&o.documentElement?(f=(d=o).documentElement,g=!s(d),S!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",se,!1):i.attachEvent&&i.attachEvent("onunload",se)),r.attributes=he(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=he(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=Q.test(d.getElementsByClassName),r.getById=he(function(e){return f.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),r.getById?(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r,n,i,s=t.getElementById(e);if(s){if((r=s.getAttributeNode("id"))&&r.value===e)return[s];for(i=t.getElementsByName(e),n=0;s=i[n++];)if((r=s.getAttributeNode("id"))&&r.value===e)return[s]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,s=t.getElementsByTagName(e);if("*"===e){for(;r=s[i++];)1===r.nodeType&&n.push(r);return n}return s},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(r.qsa=Q.test(d.querySelectorAll))&&(he(function(e){f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),he(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&he(function(e){r.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",j)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=Q.test(f.compareDocumentPosition),T=t||Q.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},x=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e===d||e.ownerDocument===S&&T(S,e)?-1:t===d||t.ownerDocument===S&&T(S,t)?1:h?U(h,e)-U(h,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var r,n=0,i=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!i||!s)return e===d?-1:t===d?1:i?-1:s?1:h?U(h,e)-U(h,t):0;if(i===s)return pe(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;o[n]===a[n];)n++;return n?pe(o[n],a[n]):o[n]===S?-1:a[n]===S?1:0},d):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),r.matchesSelector&&g&&!R[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){R(t,!0)}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),T(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=n.attrHandle[t.toLowerCase()],s=i&&I.call(n.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==s?s:r.attributes||!g?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ae.escape=function(e){return(e+"").replace(ne,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,s=0;if(l=!r.detectDuplicates,h=!r.sortStable&&e.slice(0),e.sort(x),l){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)e.splice(n[i],1)}return h=null,e},i=ae.getText=function(e){var t,r="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},(n=ae.selectors={cacheLength:50,createPseudo:ce,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&W.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(F," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,u){var c,h,l,p,d,f,g=s!==o?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),y=!u&&!a,T=!1;if(v){if(s){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?v.firstChild:v.lastChild],o&&y){for(T=(d=(c=(h=(l=(p=v)[b]||(p[b]={}))[p.uniqueID]||(l[p.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(T=d=0)||f.pop();)if(1===p.nodeType&&++T&&p===t){h[e]=[_,d,T];break}}else if(y&&(T=d=(c=(h=(l=(p=t)[b]||(p[b]={}))[p.uniqueID]||(l[p.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===T)for(;(p=++d&&p&&p[g]||(T=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++T||(y&&((h=(l=p[b]||(p[b]={}))[p.uniqueID]||(l[p.uniqueID]={}))[e]=[_,T]),p!==t)););return(T-=i)===n||T%n==0&&T/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,r){for(var n,s=i(e,t),o=s.length;o--;)e[n=U(e,s[o])]=!(r[n]=s[o])}):function(e){return i(e,0,r)}):i}},pseudos:{not:ce(function(e){var t=[],r=[],n=a(e.replace(B,"$1"));return n[b]?ce(function(e,t,r,i){for(var s,o=n(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,n(t,null,s,r),t[0]=null,!r.pop()}}),has:ce(function(e){return function(t){return ae(e,t).length>0}}),contains:ce(function(e){return e=e.replace(te,re),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ce(function(e){return z.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,r){return[r<0?r+t:r]}),even:ve(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:ve(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:ve(function(e,t,r){for(var n=r<0?r+t:r>t?t:r;--n>=0;)e.push(n);return e}),gt:ve(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ye(){}function Te(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function be(e,t,r){var n=t.dir,i=t.next,s=i||n,o=r&&"parentNode"===s,a=C++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||o)return e(t,r,i);return!1}:function(t,r,u){var c,h,l,p=[_,a];if(u){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,r,u))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(h=(l=t[b]||(t[b]={}))[t.uniqueID]||(l[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=h[s])&&c[0]===_&&c[1]===a)return p[2]=c[2];if(h[s]=p,p[2]=e(t,r,u))return!0}return!1}}function Se(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function _e(e,t,r,n,i){for(var s,o=[],a=0,u=e.length,c=null!=t;a<u;a++)(s=e[a])&&(r&&!r(s,n,i)||(o.push(s),c&&t.push(a)));return o}function Ce(e,t,r,n,i,s){return n&&!n[b]&&(n=Ce(n)),i&&!i[b]&&(i=Ce(i,s)),ce(function(s,o,a,u){var c,h,l,p=[],d=[],f=o.length,g=s||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",a.nodeType?[a]:a,[]),v=!e||!s&&t?g:_e(g,p,e,a,u),m=r?i||(s?e:f||n)?[]:o:v;if(r&&r(v,m,a,u),n)for(c=_e(m,d),n(c,[],a,u),h=c.length;h--;)(l=c[h])&&(m[d[h]]=!(v[d[h]]=l));if(s){if(i||e){if(i){for(c=[],h=m.length;h--;)(l=m[h])&&c.push(v[h]=l);i(null,m=[],c,u)}for(h=m.length;h--;)(l=m[h])&&(c=i?U(s,l):p[h])>-1&&(s[c]=!(o[c]=l))}}else m=_e(m===o?m.splice(f,m.length):m),i?i(null,o,m,u):P.apply(o,m)})}function Ee(e){for(var t,r,i,s=e.length,o=n.relative[e[0].type],a=o||n.relative[" "],u=o?1:0,h=be(function(e){return e===t},a,!0),l=be(function(e){return U(t,e)>-1},a,!0),p=[function(e,r,n){var i=!o&&(n||r!==c)||((t=r).nodeType?h(e,r,n):l(e,r,n));return t=null,i}];u<s;u++)if(r=n.relative[e[u].type])p=[be(Se(p),r)];else{if((r=n.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<s&&!n.relative[e[i].type];i++);return Ce(u>1&&Se(p),u>1&&Te(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),r,u<i&&Ee(e.slice(u,i)),i<s&&Ee(e=e.slice(i)),i<s&&Te(e))}p.push(r)}return Se(p)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,o=ae.tokenize=function(e,t){var r,i,s,o,a,u,c,h=w[e+" "];if(h)return t?0:h.slice(0);for(a=e,u=[],c=n.preFilter;a;){for(o in r&&!(i=G.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(s=[])),r=!1,(i=K.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(B," ")}),a=a.slice(r.length)),n.filter)!(i=V[o].exec(a))||c[o]&&!(i=c[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));if(!r)break}return t?a.length:a?ae.error(e):w(e,u).slice(0)},a=ae.compile=function(e,t){var r,i=[],s=[],a=A[e+" "];if(!a){for(t||(t=o(e)),r=t.length;r--;)(a=Ee(t[r]))[b]?i.push(a):s.push(a);(a=A(e,function(e,t){var r=t.length>0,i=e.length>0,s=function(s,o,a,u,h){var l,f,v,m=0,y="0",T=s&&[],b=[],S=c,C=s||i&&n.find.TAG("*",h),E=_+=null==S?1:Math.random()||.1,w=C.length;for(h&&(c=o===d||o||h);y!==w&&null!=(l=C[y]);y++){if(i&&l){for(f=0,o||l.ownerDocument===d||(p(l),a=!g);v=e[f++];)if(v(l,o||d,a)){u.push(l);break}h&&(_=E)}r&&((l=!v&&l)&&m--,s&&T.push(l))}if(m+=y,r&&y!==m){for(f=0;v=t[f++];)v(T,b,o,a);if(s){if(m>0)for(;y--;)T[y]||b[y]||(b[y]=D.call(u));b=_e(b)}P.apply(u,b),h&&!s&&b.length>0&&m+t.length>1&&ae.uniqueSort(u)}return h&&(_=E,c=S),T};return r?ce(s):s}(s,i))).selector=e}return a},u=ae.select=function(e,t,r,i){var s,u,c,h,l,p="function"==typeof e&&e,d=!i&&o(e=p.selector||e);if(r=r||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&g&&n.relative[u[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(te,re),t)||[])[0]))return r;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(s=V.needsContext.test(e)?0:u.length;s--&&(c=u[s],!n.relative[h=c.type]);)if((l=n.find[h])&&(i=l(c.matches[0].replace(te,re),ee.test(u[0].type)&&me(t.parentNode)||t))){if(u.splice(s,1),!(e=i.length&&Te(u)))return P.apply(r,i),r;break}}return(p||a(e,d))(i,t,!g,r,!t||ee.test(e)&&me(t.parentNode)||t),r},r.sortStable=b.split("").sort(x).join("")===b,r.detectDuplicates=!!l,p(),r.sortDetached=he(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),he(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),r.attributes&&he(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),he(function(e){return null==e.getAttribute("disabled")})||le(L,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ae}(r);C.find=A,C.expr=A.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=A.uniqueSort,C.text=A.getText,C.isXMLDoc=A.isXML,C.contains=A.contains,C.escapeSelector=A.escape;var R=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(r))break;n.push(e)}return n},x=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},I=C.expr.match.needsContext;function O(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function N(e,t,r){return y(t)?C.grep(e,function(e,n){return!!t.call(e,n,e)!==r}):t.nodeType?C.grep(e,function(e){return e===t!==r}):"string"!=typeof t?C.grep(e,function(e){return l.call(t,e)>-1!==r}):C.filter(t,e,r)}C.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?C.find.matchesSelector(n,e)?[n]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(i[t],this))return!0}));for(r=this.pushStack([]),t=0;t<n;t++)C.find(e,i[t],r);return n>1?C.uniqueSort(r):r},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&I.test(e)?C(e):e||[],!1).length}});var P,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),D.test(n[1])&&C.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=o.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==r.ready?r.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,P=C(o);var U=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var r,n=0,i=this.length,s=[],o="string"!=typeof e&&C(e);if(!I.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&C.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(s.length>1?C.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?l.call(C(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return R(e,"parentNode")},parentsUntil:function(e,t,r){return R(e,"parentNode",r)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return R(e,"nextSibling")},prevAll:function(e){return R(e,"previousSibling")},nextUntil:function(e,t,r){return R(e,"nextSibling",r)},prevUntil:function(e,t,r){return R(e,"previousSibling",r)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(O(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},function(e,t){C.fn[e]=function(r,n){var i=C.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=C.filter(n,i)),this.length>1&&(L[e]||C.uniqueSort(i),U.test(e)&&i.reverse()),this.pushStack(i)}});var H=/[^\x20\t\r\n\f]+/g;function q(e){return e}function j(e){throw e}function F(e,t,r,n){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(r):e&&y(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(H)||[],function(e,r){t[r]=!0}),t}(e):C.extend({},e);var t,r,n,i,s=[],o=[],a=-1,u=function(){for(i=i||e.once,n=t=!0;o.length;a=-1)for(r=o.shift();++a<s.length;)!1===s[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=s.length,r=!1);e.memory||(r=!1),t=!1,i&&(s=r?[]:"")},c={add:function(){return s&&(r&&!t&&(a=s.length-1,o.push(r)),function t(r){C.each(r,function(r,n){y(n)?e.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==_(n)&&t(n)})}(arguments),r&&!t&&u()),this},remove:function(){return C.each(arguments,function(e,t){for(var r;(r=C.inArray(t,s,r))>-1;)s.splice(r,1),r<=a&&a--}),this},has:function(e){return e?C.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=r="",this},disabled:function(){return!s},lock:function(){return i=o=[],r||t||(s=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return C.Deferred(function(r){C.each(t,function(t,n){var i=y(e[n[4]])&&e[n[4]];s[n[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,i){var s=0;function o(e,t,n,i){return function(){var a=this,u=arguments,c=function(){var r,c;if(!(e<s)){if((r=n.apply(a,u))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(c)?i?c.call(r,o(s,t,q,i),o(s,t,j,i)):(s++,c.call(r,o(s,t,q,i),o(s,t,j,i),o(s,t,q,t.notifyWith))):(n!==q&&(a=void 0,u=[r]),(i||t.resolveWith)(a,u))}},h=i?c:function(){try{c()}catch(r){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(r,h.stackTrace),e+1>=s&&(n!==j&&(a=void 0,u=[r]),t.rejectWith(a,u))}};e?h():(C.Deferred.getStackHook&&(h.stackTrace=C.Deferred.getStackHook()),r.setTimeout(h))}}return C.Deferred(function(r){t[0][3].add(o(0,r,y(i)?i:q,r.notifyWith)),t[1][3].add(o(0,r,y(e)?e:q)),t[2][3].add(o(0,r,y(n)?n:j))}).promise()},promise:function(e){return null!=e?C.extend(e,i):i}},s={};return C.each(t,function(e,r){var o=r[2],a=r[5];i[r[1]]=o.add,a&&o.add(function(){n=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,r=t,n=Array(r),i=u.call(arguments),s=C.Deferred(),o=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?u.call(arguments):r,--t||s.resolveWith(n,i)}};if(t<=1&&(F(e,s.done(o(r)).resolve,s.reject,!t),"pending"===s.state()||y(i[r]&&i[r].then)))return s.then();for(;r--;)F(i[r],o(r),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&B.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){r.setTimeout(function(){throw e})};var G=C.Deferred();function K(){o.removeEventListener("DOMContentLoaded",K),r.removeEventListener("load",K),C.ready()}C.fn.ready=function(e){return G.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||G.resolveWith(o,[C]))}}),C.ready.then=G.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?r.setTimeout(C.ready):(o.addEventListener("DOMContentLoaded",K),r.addEventListener("load",K));var $=function(e,t,r,n,i,s,o){var a=0,u=e.length,c=null==r;if("object"===_(r))for(a in i=!0,r)$(e,t,a,r[a],!0,s,o);else if(void 0!==n&&(i=!0,y(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,r){return c.call(C(e),r)})),t))for(;a<u;a++)t(e[a],r,o?n:n.call(e[a],a,t(e[a],r)));return i?e:c?t.call(e):u?t(e[0],r):s},W=/^-ms-/,z=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function Y(e){return e.replace(W,"ms-").replace(z,V)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=C.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[Y(t)]=r;else for(n in t)i[Y(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in n?[t]:t.match(H)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||C.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Q=new J,Z=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(r)}catch(e){}Z.set(e,t,r)}else r=void 0;return r}C.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,r){return Z.access(e,t,r)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,r){return Q.access(e,t,r)},_removeData:function(e,t){Q.remove(e,t)}}),C.fn.extend({data:function(e,t){var r,n,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=Z.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(n=o[r].name).indexOf("data-")&&(n=Y(n.slice(5)),re(s,n,i[n]));Q.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Z.set(this,e)}):$(this,function(t){var r;if(s&&void 0===t)return void 0!==(r=Z.get(s,e))?r:void 0!==(r=re(s,e))?r:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),C.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=Q.get(e,t),r&&(!n||Array.isArray(r)?n=Q.access(e,t,C.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=C.queue(e,t),n=r.length,i=r.shift(),s=C._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete s.stop,i.call(e,function(){C.dequeue(e,t)},s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Q.get(e,r)||Q.access(e,r,{empty:C.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",r])})})}}),C.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?C.queue(this[0],e):void 0===t?this:this.each(function(){var r=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&C.dequeue(this,e)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=C.Deferred(),s=this,o=this.length,a=function(){--n||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=Q.get(s[o],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],oe=o.documentElement,ae=function(e){return C.contains(e.ownerDocument,e)},ue={composed:!0};oe.getRootNode&&(ae=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===C.css(e,"display")},he=function(e,t,r,n){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in i=r.apply(e,n||[]),t)e.style[s]=o[s];return i};function le(e,t,r,n){var i,s,o=20,a=n?function(){return n.cur()}:function(){return C.css(e,t,"")},u=a(),c=r&&r[3]||(C.cssNumber[t]?"":"px"),h=e.nodeType&&(C.cssNumber[t]||"px"!==c&&+u)&&ie.exec(C.css(e,t));if(h&&h[3]!==c){for(u/=2,c=c||h[3],h=+u||1;o--;)C.style(e,t,h+c),(1-s)*(1-(s=a()/u||.5))<=0&&(o=0),h/=s;h*=2,C.style(e,t,h+c),r=r||[]}return r&&(h=+h||+u||0,i=r[1]?h+(r[1]+1)*r[2]:+r[2],n&&(n.unit=c,n.start=h,n.end=i)),i}var pe={};function de(e){var t,r=e.ownerDocument,n=e.nodeName,i=pe[n];return i||(t=r.body.appendChild(r.createElement(n)),i=C.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),pe[n]=i,i)}function fe(e,t){for(var r,n,i=[],s=0,o=e.length;s<o;s++)(n=e[s]).style&&(r=n.style.display,t?("none"===r&&(i[s]=Q.get(n,"display")||null,i[s]||(n.style.display="")),""===n.style.display&&ce(n)&&(i[s]=de(n))):"none"!==r&&(i[s]="none",Q.set(n,"display",r)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}C.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ce(this)?C(this).show():C(this).hide()})}});var ge=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i,ye={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Te(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&O(e,t)?C.merge([e],r):r}function be(e,t){for(var r=0,n=e.length;r<n;r++)Q.set(e[r],"globalEval",!t||Q.get(t[r],"globalEval"))}ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td;var Se,_e,Ce=/<|&#?\w+;/;function Ee(e,t,r,n,i){for(var s,o,a,u,c,h,l=t.createDocumentFragment(),p=[],d=0,f=e.length;d<f;d++)if((s=e[d])||0===s)if("object"===_(s))C.merge(p,s.nodeType?[s]:s);else if(Ce.test(s)){for(o=o||l.appendChild(t.createElement("div")),a=(ve.exec(s)||["",""])[1].toLowerCase(),u=ye[a]||ye._default,o.innerHTML=u[1]+C.htmlPrefilter(s)+u[2],h=u[0];h--;)o=o.lastChild;C.merge(p,o.childNodes),(o=l.firstChild).textContent=""}else p.push(t.createTextNode(s));for(l.textContent="",d=0;s=p[d++];)if(n&&C.inArray(s,n)>-1)i&&i.push(s);else if(c=ae(s),o=Te(l.appendChild(s),"script"),c&&be(o),r)for(h=0;s=o[h++];)me.test(s.type||"")&&r.push(s);return l}Se=o.createDocumentFragment().appendChild(o.createElement("div")),(_e=o.createElement("input")).setAttribute("type","radio"),_e.setAttribute("checked","checked"),_e.setAttribute("name","t"),Se.appendChild(_e),m.checkClone=Se.cloneNode(!0).cloneNode(!0).lastChild.checked,Se.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Se.cloneNode(!0).lastChild.defaultValue;var we=/^key/,Ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Re=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function Ie(){return!1}function Oe(e,t){return e===function(){try{return o.activeElement}catch(e){}}()==("focus"===t)}function De(e,t,r,n,i,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)De(e,a,r,n,t[a],s);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Ie;else if(!i)return e;return 1===s&&(o=i,(i=function(e){return C().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=C.guid++)),e.each(function(){C.event.add(this,t,i,n,r)})}function Ne(e,t,r){r?(Q.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var n,i,s=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=u.call(arguments),Q.set(this,t,s),n=r(this,t),this[t](),s!==(i=Q.get(this,t))||n?Q.set(this,t,!1):i={},s!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else s.length&&(Q.set(this,t,{value:C.event.trigger(C.extend(s[0],C.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&C.event.add(e,t,xe)}C.event={global:{},add:function(e,t,r,n,i){var s,o,a,u,c,h,l,p,d,f,g,v=Q.get(e);if(v)for(r.handler&&(r=(s=r).handler,i=s.selector),i&&C.find.matchesSelector(oe,i),r.guid||(r.guid=C.guid++),(u=v.events)||(u=v.events={}),(o=v.handle)||(o=v.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(H)||[""]).length;c--;)d=g=(a=Re.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),d&&(l=C.event.special[d]||{},d=(i?l.delegateType:l.bindType)||d,l=C.event.special[d]||{},h=C.extend({type:d,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:f.join(".")},s),(p=u[d])||((p=u[d]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,n,f,o)||e.addEventListener&&e.addEventListener(d,o)),l.add&&(l.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),i?p.splice(p.delegateCount++,0,h):p.push(h),C.event.global[d]=!0)},remove:function(e,t,r,n,i){var s,o,a,u,c,h,l,p,d,f,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(H)||[""]).length;c--;)if(d=g=(a=Re.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),d){for(l=C.event.special[d]||{},p=u[d=(n?l.delegateType:l.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=p.length;s--;)h=p[s],!i&&g!==h.origType||r&&r.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(p.splice(s,1),h.selector&&p.delegateCount--,l.remove&&l.remove.call(e,h));o&&!p.length&&(l.teardown&&!1!==l.teardown.call(e,f,v.handle)||C.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)C.event.remove(e,d+t[c],r,n,!0);C.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,s,o,a=C.event.fix(e),u=new Array(arguments.length),c=(Q.get(this,"events")||{})[a.type]||[],h=C.event.special[a.type]||{};for(u[0]=a,t=1;t<arguments.length;t++)u[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(o=C.event.handlers.call(this,a,c),t=0;(i=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,r=0;(s=i.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==s.namespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(n=((C.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var r,n,i,s,o,a=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},r=0;r<u;r++)void 0===o[i=(n=t[r]).selector+" "]&&(o[i]=n.needsContext?C(i,this).index(c)>-1:C.find(i,this,null,[c]).length),o[i]&&s.push(n);s.length&&a.push({elem:c,handlers:s})}return c=this,u<t.length&&a.push({elem:c,handlers:t.slice(u)}),a},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&O(t,"input")&&Ne(t,"click",xe),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&O(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&O(t,"input")&&Q.get(t,"click")||O(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ae.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(e,t){C.event.special[e]={setup:function(){return Ne(this,e,Oe),!1},trigger:function(){return Ne(this,e),!0},delegateType:t}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||C.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),C.fn.extend({on:function(e,t,r,n){return De(this,e,t,r,n)},one:function(e,t,r,n){return De(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,C(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Ie),this.each(function(){C.event.remove(this,e,r,t)})}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return O(e,"table")&&O(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var r,n,i,s,o,a,u,c;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.access(e),o=Q.set(t,s),c=s.events))for(i in delete o.handle,o.events={},c)for(r=0,n=c[i].length;r<n;r++)C.event.add(t,i,c[i][r]);Z.hasData(e)&&(a=Z.access(e),u=C.extend({},a),Z.set(t,u))}}function Fe(e,t){var r=t.nodeName.toLowerCase();"input"===r&&ge.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function Be(e,t,r,n){t=c.apply([],t);var i,s,o,a,u,h,l=0,p=e.length,d=p-1,f=t[0],g=y(f);if(g||p>1&&"string"==typeof f&&!m.checkClone&&Ue.test(f))return e.each(function(i){var s=e.eq(i);g&&(t[0]=f.call(this,i,s.html())),Be(s,t,r,n)});if(p&&(s=(i=Ee(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=s),s||n)){for(a=(o=C.map(Te(i,"script"),He)).length;l<p;l++)u=i,l!==d&&(u=C.clone(u,!0,!0),a&&C.merge(o,Te(u,"script"))),r.call(e[l],u,l);if(a)for(h=o[o.length-1].ownerDocument,C.map(o,qe),l=0;l<a;l++)u=o[l],me.test(u.type||"")&&!Q.access(u,"globalEval")&&C.contains(h,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?C._evalUrl&&!u.noModule&&C._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):S(u.textContent.replace(Le,""),u,h))}return e}function Ge(e,t,r){for(var n,i=t?C.filter(t,e):e,s=0;null!=(n=i[s]);s++)r||1!==n.nodeType||C.cleanData(Te(n)),n.parentNode&&(r&&ae(n)&&be(Te(n,"script")),n.parentNode.removeChild(n));return e}C.extend({htmlPrefilter:function(e){return e.replace(Pe,"<$1></$2>")},clone:function(e,t,r){var n,i,s,o,a=e.cloneNode(!0),u=ae(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(o=Te(a),n=0,i=(s=Te(e)).length;n<i;n++)Fe(s[n],o[n]);if(t)if(r)for(s=s||Te(e),o=o||Te(a),n=0,i=s.length;n<i;n++)je(s[n],o[n]);else je(e,a);return(o=Te(a,"script")).length>0&&be(o,!u&&Te(e,"script")),a},cleanData:function(e){for(var t,r,n,i=C.event.special,s=0;void 0!==(r=e[s]);s++)if(X(r)){if(t=r[Q.expando]){if(t.events)for(n in t.events)i[n]?C.event.remove(r,n):C.removeEvent(r,n,t.handle);r[Q.expando]=void 0}r[Z.expando]&&(r[Z.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return $(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(Te(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ye[(ve.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(C.cleanData(Te(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,function(t){var r=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(Te(this)),r&&r.replaceChild(t,this))},e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){C.fn[e]=function(e){for(var r,n=[],i=C(e),s=i.length-1,o=0;o<=s;o++)r=o===s?this:this.clone(!0),C(i[o])[t](r),h.apply(n,r.get());return this.pushStack(n)}});var Ke=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),$e=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},We=new RegExp(se.join("|"),"i");function ze(e,t,r){var n,i,s,o,a=e.style;return(r=r||$e(e))&&(""!==(o=r.getPropertyValue(t)||r[t])||ae(e)||(o=C.style(e,t)),!m.pixelBoxStyles()&&Ke.test(o)&&We.test(t)&&(n=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=n,a.minWidth=i,a.maxWidth=s)),void 0!==o?o+"":o}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(c).appendChild(h);var e=r.getComputedStyle(h);n="1%"!==e.top,u=12===t(e.marginLeft),h.style.right="60%",a=36===t(e.right),i=36===t(e.width),h.style.position="absolute",s=12===t(h.offsetWidth/3),oe.removeChild(c),h=null}}function t(e){return Math.round(parseFloat(e))}var n,i,s,a,u,c=o.createElement("div"),h=o.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===h.style.backgroundClip,C.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),s}}))}();var Ye=["Webkit","Moz","ms"],Xe=o.createElement("div").style,Je={};function Qe(e){var t=C.cssProps[e]||Je[e];return t||(e in Xe?e:Je[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=Ye.length;r--;)if((e=Ye[r]+t)in Xe)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,et=/^--/,tt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,r){var n=ie.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function it(e,t,r,n,i,s){var o="width"===t?1:0,a=0,u=0;if(r===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(u+=C.css(e,r+se[o],!0,i)),n?("content"===r&&(u-=C.css(e,"padding"+se[o],!0,i)),"margin"!==r&&(u-=C.css(e,"border"+se[o]+"Width",!0,i))):(u+=C.css(e,"padding"+se[o],!0,i),"padding"!==r?u+=C.css(e,"border"+se[o]+"Width",!0,i):a+=C.css(e,"border"+se[o]+"Width",!0,i));return!n&&s>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-u-a-.5))||0),u}function st(e,t,r){var n=$e(e),i=(!m.boxSizingReliable()||r)&&"border-box"===C.css(e,"boxSizing",!1,n),s=i,o=ze(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(o)){if(!r)return o;o="auto"}return(!m.boxSizingReliable()&&i||"auto"===o||!parseFloat(o)&&"inline"===C.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===C.css(e,"boxSizing",!1,n),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+it(e,t,r||(i?"border":"content"),s,n,o)+"px"}function ot(e,t,r,n,i){return new ot.prototype.init(e,t,r,n,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=ze(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=Y(t),u=et.test(t),c=e.style;if(u||(t=Qe(a)),o=C.cssHooks[t]||C.cssHooks[a],void 0===r)return o&&"get"in o&&void 0!==(i=o.get(e,!1,n))?i:c[t];"string"===(s=typeof r)&&(i=ie.exec(r))&&i[1]&&(r=le(e,t,i),s="number"),null!=r&&r==r&&("number"!==s||u||(r+=i&&i[3]||(C.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,n))||(u?c.setProperty(t,r):c[t]=r))}},css:function(e,t,r,n){var i,s,o,a=Y(t);return et.test(t)||(t=Qe(a)),(o=C.cssHooks[t]||C.cssHooks[a])&&"get"in o&&(i=o.get(e,!0,r)),void 0===i&&(i=ze(e,t,n)),"normal"===i&&t in rt&&(i=rt[t]),""===r||r?(s=parseFloat(i),!0===r||isFinite(s)?s||0:i):i}}),C.each(["height","width"],function(e,t){C.cssHooks[t]={get:function(e,r,n){if(r)return!Ze.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?st(e,t,n):he(e,tt,function(){return st(e,t,n)})},set:function(e,r,n){var i,s=$e(e),o=!m.scrollboxSize()&&"absolute"===s.position,a=(o||n)&&"border-box"===C.css(e,"boxSizing",!1,s),u=n?it(e,t,n,a,s):0;return a&&o&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-it(e,t,"border",!1,s)-.5)),u&&(i=ie.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=C.css(e,t)),nt(0,r,u)}}}),C.cssHooks.marginLeft=Ve(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-he(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(e,t){C.cssHooks[e+t]={expand:function(r){for(var n=0,i={},s="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+se[n]+t]=s[n]||s[n-2]||s[0];return i}},"margin"!==e&&(C.cssHooks[e+t].set=nt)}),C.fn.extend({css:function(e,t){return $(this,function(e,t,r){var n,i,s={},o=0;if(Array.isArray(t)){for(n=$e(e),i=t.length;o<i;o++)s[t[o]]=C.css(e,t[o],!1,n);return s}return void 0!==r?C.style(e,t,r):C.css(e,t)},e,t,arguments.length>1)}}),C.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,r,n,i,s){this.elem=e,this.prop=r,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(C.cssNumber[r]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,r=ot.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[Qe(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=ot.prototype.init,C.fx.step={};var at,ut,ct=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function lt(){ut&&(!1===o.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(lt):r.setTimeout(lt,C.fx.interval),C.fx.tick())}function pt(){return r.setTimeout(function(){at=void 0}),at=Date.now()}function dt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=se[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function ft(e,t,r){for(var n,i=(gt.tweeners[t]||[]).concat(gt.tweeners["*"]),s=0,o=i.length;s<o;s++)if(n=i[s].call(r,t,e))return n}function gt(e,t,r){var n,i,s=0,o=gt.prefilters.length,a=C.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=at||pt(),r=Math.max(0,c.startTime+c.duration-t),n=1-(r/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(n);return a.notifyWith(e,[c,n,r]),n<1&&o?r:(o||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},r),originalProperties:t,originalOptions:r,startTime:at||pt(),duration:r.duration,tweens:[],createTween:function(t,r){var n=C.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var r=0,n=t?c.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)c.tweens[r].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),h=c.props;for(!function(e,t){var r,n,i,s,o;for(r in e)if(i=t[n=Y(r)],s=e[r],Array.isArray(s)&&(i=s[1],s=e[r]=s[0]),r!==n&&(e[n]=s,delete e[r]),(o=C.cssHooks[n])&&"expand"in o)for(r in s=o.expand(s),delete e[n],s)r in e||(e[r]=s[r],t[r]=i);else t[n]=i}(h,c.opts.specialEasing);s<o;s++)if(n=gt.prefilters[s].call(c,e,h,c.opts))return y(n.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return C.map(h,ft,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(gt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return le(r.elem,e,ie.exec(t),r),r}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(H);for(var r,n=0,i=e.length;n<i;n++)r=e[n],gt.tweeners[r]=gt.tweeners[r]||[],gt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,s,o,a,u,c,h,l="width"in t||"height"in t,p=this,d={},f=e.style,g=e.nodeType&&ce(e),v=Q.get(e,"fxshow");for(n in r.queue||(null==(o=C._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,p.always(function(){p.always(function(){o.unqueued--,C.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[n],ct.test(i)){if(delete t[n],s=s||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[n])continue;g=!0}d[n]=v&&v[n]||C.style(e,n)}if((u=!C.isEmptyObject(t))||!C.isEmptyObject(d))for(n in l&&1===e.nodeType&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=v&&v.display)&&(c=Q.get(e,"display")),"none"===(h=C.css(e,"display"))&&(c?h=c:(fe([e],!0),c=e.style.display||c,h=C.css(e,"display"),fe([e]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===C.css(e,"float")&&(u||(p.done(function(){f.display=c}),null==c&&(h=f.display,c="none"===h?"":h)),f.display="inline-block")),r.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:c}),s&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(n in g||fe([e]),Q.remove(e,"fxshow"),d)C.style(e,n,d[n])})),u=ft(g?v[n]:0,n,p),n in v||(v[n]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?gt.prefilters.unshift(e):gt.prefilters.push(e)}}),C.speed=function(e,t,r){var n=e&&"object"==typeof e?C.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};return C.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=C.isEmptyObject(e),s=C.speed(t,r,n),o=function(){var t=gt(this,C.extend({},e),s);(i||Q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=C.timers,o=Q.get(this);if(i)o[i]&&o[i].stop&&n(o[i]);else for(i in o)o[i]&&o[i].stop&&ht.test(i)&&n(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(r),t=!1,s.splice(i,1));!t&&r||C.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=Q.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],s=C.timers,o=n?n.length:0;for(r.finish=!0,C.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),C.each(["toggle","show","hide"],function(e,t){var r=C.fn[t];C.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(dt(t,!0),e,n,i)}}),C.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){C.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,r=C.timers;for(at=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||C.fx.stop(),at=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ut||(ut=!0,lt())},C.fx.stop=function(){ut=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}})},function(){var e=o.createElement("input"),t=o.createElement("select").appendChild(o.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=o.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var vt,mt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return $(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,r){var n,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?C.prop(e,t,r):(1===s&&C.isXMLDoc(e)||(i=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?vt:void 0)),void 0!==r?null===r?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=C.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&O(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(H);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),vt={set:function(e,t,r){return!1===t?C.removeAttr(e,r):e.setAttribute(r,r),r}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var r=mt[t]||C.find.attr;mt[t]=function(e,t,n){var i,s,o=t.toLowerCase();return n||(s=mt[o],mt[o]=i,i=null!=r(e,t,n)?o:null,mt[o]=s),i}});var yt=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;function bt(e){return(e.match(H)||[]).join(" ")}function St(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(H)||[]}C.fn.extend({prop:function(e,t){return $(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,r){var n,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(e){var t,r,n,i,s,o,a,u=0;if(y(e))return this.each(function(t){C(this).addClass(e.call(this,t,St(this)))});if((t=_t(e)).length)for(;r=this[u++];)if(i=St(r),n=1===r.nodeType&&" "+bt(i)+" "){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i!==(a=bt(n))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,n,i,s,o,a,u=0;if(y(e))return this.each(function(t){C(this).removeClass(e.call(this,t,St(this)))});if(!arguments.length)return this.attr("class","");if((t=_t(e)).length)for(;r=this[u++];)if(i=St(r),n=1===r.nodeType&&" "+bt(i)+" "){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");i!==(a=bt(n))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(r){C(this).toggleClass(e.call(this,r,St(this),t),t)}):this.each(function(){var t,i,s,o;if(n)for(i=0,s=C(this),o=_t(e);t=o[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==r||((t=St(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+bt(St(r))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;C.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=y(e),this.each(function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,C(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=C.map(i,function(e){return null==e?"":e+""})),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=C.valHooks[i.type]||C.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(Ct,""):null==r?"":r:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:bt(C.text(e))}},select:{get:function(e){var t,r,n,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],u=o?s+1:i.length;for(n=s<0?u:o?s:0;n<u;n++)if(((r=i[n]).selected||n===s)&&!r.disabled&&(!r.parentNode.disabled||!O(r.parentNode,"optgroup"))){if(t=C(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,s=C.makeArray(t),o=i.length;o--;)((n=i[o]).selected=C.inArray(C.valHooks.option.get(n),s)>-1)&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},m.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in r;var Et=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,i){var s,a,u,c,h,l,p,d,g=[n||o],v=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(a=d=u=n=n||o,3!==n.nodeType&&8!==n.nodeType&&!Et.test(v+C.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),h=v.indexOf(":")<0&&"on"+v,(e=e[C.expando]?e:new C.Event(v,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),p=C.event.special[v]||{},i||!p.trigger||!1!==p.trigger.apply(n,t))){if(!i&&!p.noBubble&&!T(n)){for(c=p.delegateType||v,Et.test(c+v)||(a=a.parentNode);a;a=a.parentNode)g.push(a),u=a;u===(n.ownerDocument||o)&&g.push(u.defaultView||u.parentWindow||r)}for(s=0;(a=g[s++])&&!e.isPropagationStopped();)d=a,e.type=s>1?c:p.bindType||v,(l=(Q.get(a,"events")||{})[e.type]&&Q.get(a,"handle"))&&l.apply(a,t),(l=h&&a[h])&&l.apply&&X(a)&&(e.result=l.apply(a,t),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),t)||!X(n)||h&&y(n[v])&&!T(n)&&((u=n[h])&&(n[h]=null),C.event.triggered=v,e.isPropagationStopped()&&d.addEventListener(v,wt),n[v](),e.isPropagationStopped()&&d.removeEventListener(v,wt),C.event.triggered=void 0,u&&(n[h]=u)),e.result}},simulate:function(e,t,r){var n=C.extend(new C.Event,r,{type:e,isSimulated:!0});C.event.trigger(n,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return C.event.trigger(e,t,r,!0)}}),m.focusin||C.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=Q.access(n,t);i||n.addEventListener(e,r,!0),Q.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=Q.access(n,t)-1;i?Q.access(n,t,i):(n.removeEventListener(e,r,!0),Q.remove(n,t))}}});var At=r.location,Rt=Date.now(),xt=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var It=/\[\]$/,Ot=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,r,n){var i;if(Array.isArray(t))C.each(t,function(t,i){r||It.test(e)?n(e,i):Pt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)});else if(r||"object"!==_(t))n(e,t);else for(i in t)Pt(e+"["+i+"]",t[i],r,n)}C.param=function(e,t){var r,n=[],i=function(e,t){var r=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){i(this.name,this.value)});else for(r in e)Pt(r,e[r],t,i);return n.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Nt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!ge.test(e))}).map(function(e,t){var r=C(this).val();return null==r?null:Array.isArray(r)?C.map(r,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:r.replace(Ot,"\r\n")}}).get()}});var kt=/%20/g,Ut=/#.*$/,Lt=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,qt=/^\/\//,jt={},Ft={},Bt="*/".concat("*"),Gt=o.createElement("a");function Kt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,s=t.toLowerCase().match(H)||[];if(y(r))for(;n=s[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function $t(e,t,r,n){var i={},s=e===Ft;function o(a){var u;return i[a]=!0,C.each(e[a]||[],function(e,a){var c=a(t,r,n);return"string"!=typeof c||s||i[c]?s?!(u=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),u}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Wt(e,t){var r,n,i=C.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&C.extend(!0,e,n),e}Gt.href=At.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,C.ajaxSettings),t):Wt(C.ajaxSettings,e)},ajaxPrefilter:Kt(jt),ajaxTransport:Kt(Ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,s,a,u,c,h,l,p,d,f=C.ajaxSetup({},t),g=f.context||f,v=f.context&&(g.nodeType||g.jquery)?C(g):C.event,m=C.Deferred(),y=C.Callbacks("once memory"),T=f.statusCode||{},b={},S={},_="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(h){if(!a)for(a={};t=Mt.exec(s);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?s:null},setRequestHeader:function(e,t){return null==h&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)E.always(e[E.status]);else for(t in e)T[t]=[T[t],e[t]];return this},abort:function(e){var t=e||_;return n&&n.abort(t),w(0,t),this}};if(m.promise(E),f.url=((e||f.url||At.href)+"").replace(qt,At.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(H)||[""],null==f.crossDomain){c=o.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Gt.protocol+"//"+Gt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=C.param(f.data,f.traditional)),$t(jt,f,t,E),h)return E;for(p in(l=C.event&&f.global)&&0==C.active++&&C.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ht.test(f.type),i=f.url.replace(Ut,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(kt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(xt.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Lt,"$1"),d=(xt.test(i)?"&":"?")+"_="+Rt+++d),f.url=i+d),f.ifModified&&(C.lastModified[i]&&E.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&E.setRequestHeader("If-None-Match",C.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&E.setRequestHeader("Content-Type",f.contentType),E.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Bt+"; q=0.01":""):f.accepts["*"]),f.headers)E.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(g,E,f)||h))return E.abort();if(_="abort",y.add(f.complete),E.done(f.success),E.fail(f.error),n=$t(Ft,f,t,E)){if(E.readyState=1,l&&v.trigger("ajaxSend",[E,f]),h)return E;f.async&&f.timeout>0&&(u=r.setTimeout(function(){E.abort("timeout")},f.timeout));try{h=!1,n.send(b,w)}catch(e){if(h)throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,o,a){var c,p,d,b,S,_=t;h||(h=!0,u&&r.clearTimeout(u),n=void 0,s=a||"",E.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(b=function(e,t,r){for(var n,i,s,o,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){u.unshift(i);break}if(u[0]in r)s=u[0];else{for(i in r){if(!u[0]||e.converters[i+" "+u[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==u[0]&&u.unshift(s),r[s]}(f,E,o)),b=function(e,t,r,n){var i,s,o,a,u,c={},h=e.dataTypes.slice();if(h[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=h.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!u&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=s,s=h.shift())if("*"===s)s=u;else if("*"!==u&&u!==s){if(!(o=c[u+" "+s]||c["* "+s]))for(i in c)if((a=i.split(" "))[1]===s&&(o=c[u+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[i]:!0!==c[i]&&(s=a[0],h.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+s}}}return{state:"success",data:t}}(f,b,E,c),c?(f.ifModified&&((S=E.getResponseHeader("Last-Modified"))&&(C.lastModified[i]=S),(S=E.getResponseHeader("etag"))&&(C.etag[i]=S)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=b.state,p=b.data,c=!(d=b.error))):(d=_,!e&&_||(_="error",e<0&&(e=0))),E.status=e,E.statusText=(t||_)+"",c?m.resolveWith(g,[p,_,E]):m.rejectWith(g,[E,_,d]),E.statusCode(T),T=void 0,l&&v.trigger(c?"ajaxSuccess":"ajaxError",[E,f,c?p:d]),y.fireWith(g,[E,_]),l&&(v.trigger("ajaxComplete",[E,f]),--C.active||C.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,r){return C.get(e,t,r,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,t){C[t]=function(e,r,n,i){return y(r)&&(i=i||n,n=r,r=void 0),C.ajax(C.extend({url:e,type:t,dataType:i,data:r,success:n},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e,t){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){C(this).wrapInner(e.call(this,t))}):this.each(function(){var t=C(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(r){C(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var zt={0:200,1223:204},Vt=C.ajaxSettings.xhr();m.cors=!!Vt&&"withCredentials"in Vt,m.ajax=Vt=!!Vt,C.ajaxTransport(function(e){var t,n;if(m.cors||Vt&&!e.crossDomain)return{send:function(i,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(zt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){r&&r()}}});var Yt,Xt=[],Jt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||C.expando+"_"+Rt++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,n){var i,s,o,a=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Jt,"$1"+i):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||C.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=r[i],r[i]=function(){o=arguments},n.always(function(){void 0===s?C(r).removeProp(i):r[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(i)),o&&y(s)&&s(o[0]),o=s=void 0}),"script"}),m.createHTMLDocument=((Yt=o.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Yt.childNodes.length),C.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(m.createHTMLDocument?((n=(t=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,t.head.appendChild(n)):t=o),s=!r&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=Ee([e],t,s),s&&s.length&&C(s).remove(),C.merge([],i.childNodes)));var n,i,s},C.fn.load=function(e,t,r){var n,i,s,o=this,a=e.indexOf(" ");return a>-1&&(n=bt(e.slice(a)),e=e.slice(0,a)),y(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?C("<div>").append(C.parseHTML(e)).find(n):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,s||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.pseudos.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length},C.offset={setOffset:function(e,t,r){var n,i,s,o,a,u,c=C.css(e,"position"),h=C(e),l={};"static"===c&&(e.style.position="relative"),a=h.offset(),s=C.css(e,"top"),u=C.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+u).indexOf("auto")>-1?(o=(n=h.position()).top,i=n.left):(o=parseFloat(s)||0,i=parseFloat(u)||0),y(t)&&(t=t.call(e,r,C.extend({},a))),null!=t.top&&(l.top=t.top-a.top+o),null!=t.left&&(l.left=t.left-a.left+i),"using"in t?t.using.call(e,l):h.css(l)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){C.offset.setOffset(this,e,t)});var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===C.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),i.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-C.css(n,"marginTop",!0),left:t.left-i.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||oe})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;C.fn[e]=function(n){return $(this,function(e,n,i){var s;if(T(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[n];s?s.scrollTo(r?s.pageXOffset:i,r?i:s.pageYOffset):e[n]=i},e,n,arguments.length)}}),C.each(["top","left"],function(e,t){C.cssHooks[t]=Ve(m.pixelPosition,function(e,r){if(r)return r=ze(e,t),Ke.test(r)?C(e).position()[t]+"px":r})}),C.each({Height:"height",Width:"width"},function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){C.fn[n]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===s?"margin":"border");return $(this,function(t,r,i){var s;return T(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?C.css(t,r,a):C.style(t,r,i,a)},t,o?i:void 0,o)}})}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){C.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),C.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),y(e))return n=u.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(u.call(arguments)))}).guid=e.guid=e.guid||C.guid++,i},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=O,C.isFunction=y,C.isWindow=T,C.camelCase=Y,C.type=_,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var Qt=r.jQuery,Zt=r.$;return C.noConflict=function(e){return r.$===C&&(r.$=Zt),e&&r.jQuery===C&&(r.jQuery=Qt),C},i||(r.jQuery=r.$=C),C})},function(e,t,r){r(48),r(49),r(50),r(51),r(52),r(53),r(54),r(55),r(56),r(57),r(58),r(59)},function(e,t){!function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var r=!1,n=this;e(this).one("bsTransitionEnd",function(){r=!0});return setTimeout(function(){r||e(n).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in t)if(void 0!==e.style[r])return{end:t[r]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery)},function(e,t){!function(e){"use strict";var t='[data-dismiss="alert"]',r=function(r){e(r).on("click",t,this.close)};r.VERSION="3.4.1",r.TRANSITION_DURATION=150,r.prototype.close=function(t){var n=e(this),i=n.attr("data-target");i||(i=(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),i="#"===i?[]:i;var s=e(document).find(i);function o(){s.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),s.length||(s=n.closest(".alert")),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(r.TRANSITION_DURATION):o())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.bs.alert.data-api",t,r.prototype.close)}(jQuery)},function(e,t){!function(e){"use strict";var t=function(r,n){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,n),this.isLoading=!1};function r(r){return this.each(function(){var n=e(this),i=n.data("bs.button"),s="object"==typeof r&&r;i||n.data("bs.button",i=new t(this,s)),"toggle"==r?i.toggle():r&&i.setState(r)})}t.VERSION="3.4.1",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var r="disabled",n=this.$element,i=n.is("input")?"val":"html",s=n.data();t+="Text",null==s.resetText&&n.data("resetText",n[i]()),setTimeout(e.proxy(function(){n[i](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(r).attr(r,r).prop(r,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(r).removeAttr(r).prop(r,!1))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var r=this.$element.find("input");"radio"==r.prop("type")?(r.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==r.prop("type")&&(r.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),r.prop("checked",this.$element.hasClass("active")),e&&r.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=r,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var n=e(t.target).closest(".btn");r.call(n,"toggle"),e(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery)},function(e,t){!function(e){"use strict";var t=function(t,r){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=r,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};function r(r){return this.each(function(){var n=e(this),i=n.data("bs.carousel"),s=e.extend({},t.DEFAULTS,n.data(),"object"==typeof r&&r),o="string"==typeof r?r:s.slide;i||n.data("bs.carousel",i=new t(this,s)),"number"==typeof r?i.to(r):o?i[o]():s.interval&&i.pause().cycle()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var r=this.getItemIndex(t);if(("prev"==e&&0===r||"next"==e&&r==this.$items.length-1)&&!this.options.wrap)return t;var n=(r+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},t.prototype.to=function(e){var t=this,r=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(r,n){var i=this.$element.find(".item.active"),s=n||this.getItemForDirection(r,i),o=this.interval,a="next"==r?"left":"right",u=this;if(s.hasClass("active"))return this.sliding=!1;var c=s[0],h=e.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=e(this.$indicators.children()[this.getItemIndex(s)]);l&&l.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(r),"object"==typeof s&&s.length&&s[0].offsetWidth,i.addClass(a),s.addClass(a),i.one("bsTransitionEnd",function(){s.removeClass([r,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(p)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(p)),o&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=r,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var i=function(t){var n=e(this),i=n.attr("href");i&&(i=i.replace(/.*(?=#[^\s]+$)/,""));var s=n.attr("data-target")||i,o=e(document).find(s);if(o.hasClass("carousel")){var a=e.extend({},o.data(),n.data()),u=n.attr("data-slide-to");u&&(a.interval=!1),r.call(o,a),u&&o.data("bs.carousel").to(u),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);r.call(t,t.data())})})}(jQuery)},function(e,t){!function(e){"use strict";var t=function(r,n){this.$element=e(r),this.options=e.extend({},t.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+r.id+'"],[data-toggle="collapse"][data-target="#'+r.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function r(t){var r,n=t.attr("data-target")||(r=t.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"");return e(document).find(n)}function n(r){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),s=e.extend({},t.DEFAULTS,n.data(),"object"==typeof r&&r);!i&&s.toggle&&/show|hide/.test(r)&&(s.toggle=!1),i||n.data("bs.collapse",i=new t(this,s)),"string"==typeof r&&i[r]()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var r,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(r=i.data("bs.collapse"))&&r.transitioning)){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),r||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var u=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][u])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var r=e.Event("hide.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,n){var i=e(n);this.addAriaAndCollapsedClass(r(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var r=e.hasClass("in");e.attr("aria-expanded",r),t.toggleClass("collapsed",!r).attr("aria-expanded",r)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var s=r(i),o=s.data("bs.collapse")?"toggle":i.data();n.call(s,o)})}(jQuery)},function(e,t){!function(e){"use strict";var t=".dropdown-backdrop",r='[data-toggle="dropdown"]',n=function(t){e(t).on("click.bs.dropdown",this.toggle)};function i(t){var r=t.attr("data-target");r||(r=(r=t.attr("href"))&&/#[A-Za-z]/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,""));var n="#"!==r?e(document).find(r):null;return n&&n.length?n:t.parent()}function s(n){n&&3===n.which||(e(t).remove(),e(r).each(function(){var t=e(this),r=i(t),s={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(t.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",s)))))}))}n.VERSION="3.4.1",n.prototype.toggle=function(t){var r=e(this);if(!r.is(".disabled, :disabled")){var n=i(r),o=n.hasClass("open");if(s(),!o){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",s);var a={relatedTarget:this};if(n.trigger(t=e.Event("show.bs.dropdown",a)),t.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(e.Event("shown.bs.dropdown",a))}return!1}},n.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),o=s.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&s.find(r).trigger("focus"),n.trigger("click");var a=s.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var u=a.index(t.target);38==t.which&&u>0&&u--,40==t.which&&u<a.length-1&&u++,~u||(u=0),a.eq(u).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("bs.dropdown");i||r.data("bs.dropdown",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,n.prototype.toggle).on("keydown.bs.dropdown.data-api",r,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery)},function(e,t){!function(e){"use strict";var t=function(t,r){this.options=r,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function r(r,n){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof r&&r);s||i.data("bs.modal",s=new t(this,o)),"string"==typeof r?s[r](n):o.show&&s.show(n)})}t.VERSION="3.4.1",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(r){var n=this,i=e.Event("show.bs.modal",{relatedTarget:r});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),i&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:r});i?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(t.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},t.prototype.hide=function(r){r&&r.preventDefault(),r=e.Event("hide.bs.modal"),this.$element.trigger(r),this.isShown&&!r.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(r){var n=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!r)return;s?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):r()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),r&&r()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else r&&r()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var r=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",t+r),e(this.fixedContent).each(function(t,n){var i=n.style.paddingRight,s=e(n).css("padding-right");e(n).data("padding-right",i).css("padding-right",parseFloat(s)+r+"px")}))},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),e(this.fixedContent).each(function(t,r){var n=e(r).data("padding-right");e(r).removeData("padding-right"),r.style.paddingRight=n||""})},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=r,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),s=n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""),o=e(document).find(s),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());n.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),r.call(o,a,this)})}(jQuery)},function(e,t){!function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"],r=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},i=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(t,n){var o=t.nodeName.toLowerCase();if(-1!==e.inArray(o,n))return-1===e.inArray(o,r)||Boolean(t.nodeValue.match(i)||t.nodeValue.match(s));for(var a=e(n).filter(function(e,t){return t instanceof RegExp}),u=0,c=a.length;u<c;u++)if(o.match(a[u]))return!0;return!1}function a(t,r,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;var i=document.implementation.createHTMLDocument("sanitization");i.body.innerHTML=t;for(var s=e.map(r,function(e,t){return t}),a=e(i.body).find("*"),u=0,c=a.length;u<c;u++){var h=a[u],l=h.nodeName.toLowerCase();if(-1!==e.inArray(l,s))for(var p=e.map(h.attributes,function(e){return e}),d=[].concat(r["*"]||[],r[l]||[]),f=0,g=p.length;f<g;f++)o(p[f],d)||h.removeAttribute(p[f].nodeName);else h.parentNode.removeChild(h)}return i.body.innerHTML}var u=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};u.VERSION="3.4.1",u.TRANSITION_DURATION=150,u.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:n},u.prototype.init=function(t,r,n){if(this.enabled=!0,this.type=t,this.$element=e(r),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(document).find(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",u="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},u.prototype.getDefaults=function(){return u.DEFAULTS},u.prototype.getOptions=function(r){var n=this.$element.data();for(var i in n)n.hasOwnProperty(i)&&-1!==e.inArray(i,t)&&delete n[i];return(r=e.extend({},this.getDefaults(),n,r)).delay&&"number"==typeof r.delay&&(r.delay={show:r.delay,hide:r.delay}),r.sanitize&&(r.template=a(r.template,r.whiteList,r.sanitizeFn)),r},u.prototype.getDelegateOptions=function(){var t={},r=this.getDefaults();return this._options&&e.each(this._options,function(e,n){r[e]!=n&&(t[e]=n)}),t},u.prototype.enter=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(r||(r=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,r)),t instanceof e.Event&&(r.inState["focusin"==t.type?"focus":"hover"]=!0),r.tip().hasClass("in")||"in"==r.hoverState)r.hoverState="in";else{if(clearTimeout(r.timeout),r.hoverState="in",!r.options.delay||!r.options.delay.show)return r.show();r.timeout=setTimeout(function(){"in"==r.hoverState&&r.show()},r.options.delay.show)}},u.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},u.prototype.leave=function(t){var r=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(r||(r=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,r)),t instanceof e.Event&&(r.inState["focusout"==t.type?"focus":"hover"]=!1),!r.isInStateTrue()){if(clearTimeout(r.timeout),r.hoverState="out",!r.options.delay||!r.options.delay.hide)return r.hide();r.timeout=setTimeout(function(){"out"==r.hoverState&&r.hide()},r.options.delay.hide)}},u.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var n=this,i=this.tip(),s=this.getUID(this.type);this.setContent(),i.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,c=a.test(o);c&&(o=o.replace(a,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?i.appendTo(e(document).find(this.options.container)):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),l=i[0].offsetWidth,p=i[0].offsetHeight;if(c){var d=o,f=this.getPosition(this.$viewport);o="bottom"==o&&h.bottom+p>f.bottom?"top":"top"==o&&h.top-p<f.top?"bottom":"right"==o&&h.right+l>f.width?"left":"left"==o&&h.left-l<f.left?"right":o,i.removeClass(d).addClass(o)}var g=this.getCalculatedOffset(o,h,l,p);this.applyPlacement(g,o);var v=function(){var e=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==e&&n.leave(n)};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",v).emulateTransitionEnd(u.TRANSITION_DURATION):v()}},u.prototype.applyPlacement=function(t,r){var n=this.tip(),i=n[0].offsetWidth,s=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),t.top+=o,t.left+=a,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var u=n[0].offsetWidth,c=n[0].offsetHeight;"top"==r&&c!=s&&(t.top=t.top+s-c);var h=this.getViewportAdjustedDelta(r,t,u,c);h.left?t.left+=h.left:t.top+=h.top;var l=/top|bottom/.test(r),p=l?2*h.left-i+u:2*h.top-s+c,d=l?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(p,n[0][d],l)},u.prototype.replaceArrow=function(e,t,r){this.arrow().css(r?"left":"top",50*(1-e/t)+"%").css(r?"top":"left","")},u.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();this.options.html?(this.options.sanitize&&(t=a(t,this.options.whiteList,this.options.sanitizeFn)),e.find(".tooltip-inner").html(t)):e.find(".tooltip-inner").text(t),e.removeClass("fade in top bottom left right")},u.prototype.hide=function(t){var r=this,n=e(this.$tip),i=e.Event("hide.bs."+this.type);function s(){"in"!=r.hoverState&&n.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",s).emulateTransitionEnd(u.TRANSITION_DURATION):s(),this.hoverState=null,this},u.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},u.prototype.hasContent=function(){return this.getTitle()},u.prototype.getPosition=function(t){var r=(t=t||this.$element)[0],n="BODY"==r.tagName,i=r.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=window.SVGElement&&r instanceof window.SVGElement,o=n?{top:0,left:0}:s?null:t.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,u,o)},u.prototype.getCalculatedOffset=function(e,t,r,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-r/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-r/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-r}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},u.prototype.getViewportAdjustedDelta=function(e,t,r,n){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-s-o.scroll,u=t.top+s-o.scroll+n;a<o.top?i.top=o.top-a:u>o.top+o.height&&(i.top=o.top+o.height-u)}else{var c=t.left-s,h=t.left+s+r;c<o.left?i.left=o.left-c:h>o.right&&(i.left=o.left+o.width-h)}return i},u.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},u.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},u.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},u.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},u.prototype.enable=function(){this.enabled=!0},u.prototype.disable=function(){this.enabled=!1},u.prototype.toggleEnabled=function(){this.enabled=!this.enabled},u.prototype.toggle=function(t){var r=this;t&&((r=e(t.currentTarget).data("bs."+this.type))||(r=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,r))),t?(r.inState.click=!r.inState.click,r.isInStateTrue()?r.enter(r):r.leave(r)):r.tip().hasClass("in")?r.leave(r):r.enter(r)},u.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})},u.prototype.sanitizeHtml=function(e){return a(e,this.options.whiteList,this.options.sanitizeFn)};var c=e.fn.tooltip;e.fn.tooltip=function(t){return this.each(function(){var r=e(this),n=r.data("bs.tooltip"),i="object"==typeof t&&t;!n&&/destroy|hide/.test(t)||(n||r.data("bs.tooltip",n=new u(this,i)),"string"==typeof t&&n[t]())})},e.fn.tooltip.Constructor=u,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=c,this}}(jQuery)},function(e,t){!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.4.1",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),r=this.getContent();if(this.options.html){var n=typeof r;this.options.sanitize&&(t=this.sanitizeHtml(t),"string"===n&&(r=this.sanitizeHtml(r))),e.find(".popover-title").html(t),e.find(".popover-content").children().detach().end()["string"===n?"html":"append"](r)}else e.find(".popover-title").text(t),e.find(".popover-content").children().detach().end().text(r);e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=function(r){return this.each(function(){var n=e(this),i=n.data("bs.popover"),s="object"==typeof r&&r;!i&&/destroy|hide/.test(r)||(i||n.data("bs.popover",i=new t(this,s)),"string"==typeof r&&i[r]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery)},function(e,t){!function(e){"use strict";function t(r,n){this.$body=e(document.body),this.$scrollElement=e(r).is(document.body)?e(window):e(r),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function r(r){return this.each(function(){var n=e(this),i=n.data("bs.scrollspy"),s="object"==typeof r&&r;i||n.data("bs.scrollspy",i=new t(this,s)),"string"==typeof r&&i[r]()})}t.VERSION="3.4.1",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,r="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(r="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[r]().top+n,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,r=this.getScrollHeight(),n=this.options.offset+r-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=r&&this.refresh(),t>=n)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=r,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);r.call(t,t.data())})})}(jQuery)},function(e,t){!function(e){"use strict";var t=function(t){this.element=e(t)};function r(r){return this.each(function(){var n=e(this),i=n.data("bs.tab");i||n.data("bs.tab",i=new t(this)),"string"==typeof r&&i[r]()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,r=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=r.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=e(document).find(n);this.activate(t.closest("li"),r),this.activate(a,a.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},t.prototype.activate=function(r,n,i){var s=n.find("> .active"),o=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);function a(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),r.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(r[0].offsetWidth,r.addClass("in")):r.removeClass("fade"),r.parent(".dropdown-menu").length&&r.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}s.length&&o?s.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=r,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var i=function(t){t.preventDefault(),r.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery)},function(e,t){!function(e){"use strict";var t=function(r,n){this.options=e.extend({},t.DEFAULTS,n);var i=this.options.target===t.DEFAULTS.target?e(this.options.target):e(document).find(this.options.target);this.$target=i.on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(r),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function r(r){return this.each(function(){var n=e(this),i=n.data("bs.affix"),s="object"==typeof r&&r;i||n.data("bs.affix",i=new t(this,s)),"string"==typeof r&&i[r]()})}t.VERSION="3.4.1",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,r,n){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=r&&"top"==this.affixed)return i<r&&"top";if("bottom"==this.affixed)return null!=r?!(i+this.unpin<=s.top)&&"bottom":!(i+o<=e-n)&&"bottom";var a=null==this.affixed,u=a?i:s.top;return null!=r&&i<=r?"top":null!=n&&u+(a?o:t)>=e-n&&"bottom"},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),r=this.$element.offset();return this.pinnedOffset=r.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var r=this.$element.height(),n=this.options.offset,i=n.top,s=n.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(s=i=n),"function"==typeof i&&(i=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var a=this.getState(o,r,i,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var u="affix"+(a?"-"+a:""),c=e.Event(u+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-r-s})}};var n=e.fn.affix;e.fn.affix=r,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),r.call(t,n)})})}(jQuery)},function(e,t){function r(e){this._prefix=e.prefix||r.defaultPrefix,this._externals=e.externals}r.defaultPrefix="rc-",r.prototype.setItem=function(e,t){return this._externals.localStorage[this._prefixKey(e)]=JSON.stringify(t),this},r.prototype.removeItem=function(e){return delete this._externals.localStorage[this._prefixKey(e)],this},r.prototype.getItem=function(e){var t=this._externals.localStorage[this._prefixKey(e)];return t?JSON.parse(t):null},r.prototype.clean=function(){for(var e in this._externals.localStorage)this._externals.localStorage.hasOwnProperty(e)&&0===e.indexOf(this._prefix)&&delete this._externals.localStorage[e];return this},r.prototype._prefixKey=function(e){return this._prefix+e},e.exports=r},function(e,t,r){var n=r(62),i=r(3).EventEmitter,s=r(32),o=r(33);function a(e,t){return e=e.toLowerCase(),Object.keys(t).reduce(function(t,r){return t||(e==r.toLowerCase()?r:t)},null)}function u(e){i.call(this),this._externals=e,this.events={beforeRequest:"beforeRequest",requestSuccess:"requestSuccess",requestError:"requestError"}}u._allowedMethods=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"],u.prototype=Object.create(i.prototype),u.prototype.sendRequest=function(e){var t=new s({externals:this._externals,request:e});return new this._externals.Promise(function(r){this.emit(this.events.beforeRequest,t),r(this._loadResponse(e))}.bind(this)).then(function(e){return t.receiveResponse(e)}).then(function(){if(!t.ok())throw new Error("Response has unsuccessful status");return this.emit(this.events.requestSuccess,t),t}.bind(this)).catch(function(e){throw e.apiResponse||(e=this.makeError(e,t)),this.emit(this.events.requestError,e),e}.bind(this))},u.prototype._loadResponse=function(e){return this._externals.fetch.call(null,e)},u.prototype.makeError=function(e,t){return e.hasOwnProperty("apiResponse")||e.hasOwnProperty("originalMessage")||(e.apiResponse=t,e.originalMessage=e.message,e.message=t&&t.error(!0)||e.originalMessage),e},u.prototype.createRequest=function(e){if((e=e||{}).headers=e.headers||{},!e.url)throw new Error("Url is not defined");if(e.method||(e.method="GET"),e.method=e.method.toUpperCase(),e.method&&u._allowedMethods.indexOf(e.method)<0)throw new Error("Method has wrong value: "+e.method);if(e.credentials=e.credentials||"include",e.mode=e.mode||"cors",e.query&&(e.url=e.url+(e.url.indexOf("?")>-1?"&":"?")+o.stringify(e.query)),a("Accept",e.headers)||(e.headers.Accept=s._jsonContentType),n(e.body)||!e.body){var t=a(s._contentType,e.headers);t||(t=s._contentType,e.headers[t]=s._jsonContentType);var r=e.headers[t];r.indexOf(s._jsonContentType)>-1?"GET"!==e.method&&"HEAD"!==e.method||!e.body?e.body=JSON.stringify(e.body):e.body=void 0:r.indexOf(s._urlencodedContentType)>-1&&(e.body=o.stringify(e.body))}var i=new this._externals.Request(e.url,e);return i.originalBody=e.body,i},e.exports=u},function(e,t,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=r(63);function i(e){return!0===n(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,r;return!1!==i(e)&&("function"==typeof(t=e.constructor)&&(!1!==i(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}},function(e,t,r){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,s){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var l,p,d,f,g=e[h].replace(a,"%20"),v=g.indexOf(r);v>=0?(l=g.substr(0,v),p=g.substr(v+1)):(l=g,p=""),d=decodeURIComponent(l),f=decodeURIComponent(p),n(o,d)?i(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?s(o(e),function(o){var a=encodeURIComponent(n(o))+r;return i(e[o])?s(e[o],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[o]))}).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){(function(t){var n=r(67),i=r(68),s=r(69),o="undefined"!=typeof window&&window||void 0!==t&&t||function(){return this}();e.exports=function(e){e=e||{},this.PubNub=e.PubNub||o.PubNub||n,this.localStorage=e.localStorage||(void 0!==o.localStorage?o.localStorage:{}),this.Promise=e.Promise||o.Promise||i&&i.Promise;var t=s?s({Promise:this.Promise}):{};if(this.fetch=e.fetch||o.fetch||t.fetch,this.Request=e.Request||o.Request||t.Request,this.Response=e.Response||o.Response||t.Response,this.Headers=e.Headers||o.Headers||t.Headers,!(this.fetch&&this.Response&&this.Request&&this.Headers))throw new Error("Fetch API is missing");if(!this.Promise)throw new Error("Promise is missing");if(!this.localStorage)throw new Error("LocalStorage is missing");if(!this.PubNub)throw new Error("PubNub is missing")}}).call(this,r(7))},function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),o=n(s),a=r(40),u=n(a),c=r(41),h=n(c),l=r(42),p=(r(5),function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.listenToBrowserNetworkEvents,n=void 0===r||r;e.db=h.default,e.sdkFamily="Web",e.networking=new u.default({del:l.del,get:l.get,post:l.post,sendBeacon:i});var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n&&(window.addEventListener("offline",function(){s.networkDownDetected()}),window.addEventListener("online",function(){s.networkUpDetected()})),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default));t.default=p,e.exports=t.default},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=i(o),u=r(6),c=i(u),h=r(8),l=i(h),p=r(9),d=i(p),f=r(16),g=i(f),v=r(17),m=n(v),y=r(18),T=n(y),b=r(19),S=n(b),_=r(20),C=n(_),E=r(21),w=n(E),A=r(22),R=n(A),x=r(23),I=n(x),O=r(24),D=n(O),N=r(25),P=n(N),k=r(26),U=n(k),L=r(27),M=n(L),H=r(28),q=n(H),j=r(29),F=n(j),B=r(30),G=n(B),K=r(31),$=n(K),W=r(32),z=n(W),V=r(33),Y=n(V),X=r(34),J=n(X),Q=r(35),Z=n(Q),ee=r(36),te=n(ee),re=r(37),ne=n(re),ie=r(38),se=n(ie),oe=r(12),ae=n(oe),ue=r(39),ce=n(ue),he=r(13),le=i(he),pe=r(10),de=i(pe),fe=(r(5),r(3)),ge=i(fe),ve=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.db,i=t.networking,s=this._config=new a.default({setup:t,db:n}),o=new c.default({config:s});i.init(s);var u={config:s,networking:i,crypto:o},h=g.default.bind(this,u,ae),p=g.default.bind(this,u,U),f=g.default.bind(this,u,q),v=g.default.bind(this,u,G),y=g.default.bind(this,u,ce),b=this._listenerManager=new d.default,_=new l.default({timeEndpoint:h,leaveEndpoint:p,heartbeatEndpoint:f,setStateEndpoint:v,subscribeEndpoint:y,crypto:u.crypto,config:u.config,listenerManager:b});this.addListener=b.addListener.bind(b),this.removeListener=b.removeListener.bind(b),this.removeAllListeners=b.removeAllListeners.bind(b),this.channelGroups={listGroups:g.default.bind(this,u,C),listChannels:g.default.bind(this,u,w),addChannels:g.default.bind(this,u,m),removeChannels:g.default.bind(this,u,T),deleteGroup:g.default.bind(this,u,S)},this.push={addChannels:g.default.bind(this,u,R),removeChannels:g.default.bind(this,u,I),deleteDevice:g.default.bind(this,u,P),listChannels:g.default.bind(this,u,D)},this.hereNow=g.default.bind(this,u,$),this.whereNow=g.default.bind(this,u,M),this.getState=g.default.bind(this,u,F),this.setState=_.adaptStateChange.bind(_),this.grant=g.default.bind(this,u,Y),this.audit=g.default.bind(this,u,z),this.publish=g.default.bind(this,u,J),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,r.publish(e,t)},this.history=g.default.bind(this,u,Z),this.deleteMessages=g.default.bind(this,u,te),this.messageCounts=g.default.bind(this,u,ne),this.fetchMessages=g.default.bind(this,u,se),this.time=h,this.subscribe=_.adaptSubscribeChange.bind(_),this.presence=_.adaptPresenceChange.bind(_),this.unsubscribe=_.adaptUnsubscribeChange.bind(_),this.disconnect=_.disconnect.bind(_),this.reconnect=_.reconnect.bind(_),this.destroy=function(e){_.unsubscribeAll(e),_.disconnect()},this.stop=this.destroy,this.unsubscribeAll=_.unsubscribeAll.bind(_),this.getSubscribedChannels=_.getSubscribedChannels.bind(_),this.getSubscribedChannelGroups=_.getSubscribedChannelGroups.bind(_),this.encrypt=o.encrypt.bind(o),this.decrypt=o.decrypt.bind(o),this.getAuthKey=u.config.getAuthKey.bind(u.config),this.setAuthKey=u.config.setAuthKey.bind(u.config),this.setCipherKey=u.config.setCipherKey.bind(u.config),this.getUUID=u.config.getUUID.bind(u.config),this.setUUID=u.config.setUUID.bind(u.config),this.getFilterExpression=u.config.getFilterExpression.bind(u.config),this.setFilterExpression=u.config.setFilterExpression.bind(u.config),this.setHeartbeatInterval=u.config.setHeartbeatInterval.bind(u.config),i.hasModule("proxy")&&(this.setProxy=function(e){u.config.setProxy(e),r.reconnect()})}return s(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return ge.default.createUUID()}}]),e}();ve.OPERATIONS=le.default,ve.CATEGORIES=de.default,t.default=ve,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=(r(5),function(){function e(t){var r=t.setup,n=t.db;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._db=n,this.instanceId="pn-"+s.default.createUUID(),this.secretKey=r.secretKey||r.secret_key,this.subscribeKey=r.subscribeKey||r.subscribe_key,this.publishKey=r.publishKey||r.publish_key,this.sdkName=r.sdkName,this.sdkFamily=r.sdkFamily,this.partnerId=r.partnerId,this.setAuthKey(r.authKey),this.setCipherKey(r.cipherKey),this.setFilterExpression(r.filterExpression),this.origin=r.origin||"ps.pndsn.com",this.secure=r.ssl||!1,this.restore=r.restore||!1,this.proxy=r.proxy,this.keepAlive=r.keepAlive,this.keepAliveSettings=r.keepAliveSettings,this.autoNetworkDetection=r.autoNetworkDetection||!1,this.dedupeOnSubscribe=r.dedupeOnSubscribe||!1,this.maximumCacheSize=r.maximumCacheSize||100,this.customEncrypt=r.customEncrypt,this.customDecrypt=r.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=r.logVerbosity||!1,this.suppressLeaveEvents=r.suppressLeaveEvents||!1,this.announceFailedHeartbeats=r.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=r.announceSuccessfulHeartbeats||!1,this.useInstanceId=r.useInstanceId||!1,this.useRequestId=r.useRequestId||!1,this.requestMessageCountThreshold=r.requestMessageCountThreshold,this.setTransactionTimeout(r.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(r.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(r.useSendBeacon||!0),this.setPresenceTimeout(r.presenceTimeout||300),null!=r.heartbeatInterval&&this.setHeartbeatInterval(r.heartbeatInterval),this.setUUID(this._decideUUID(r.uuid))}return n(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.24.2"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+s.default.createUUID())}}]),e}());t.default=o,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={createUUID:function(){return i.default.uuid?i.default.uuid():(0,i.default)()}},e.exports=t.default},function(e,t,r){var n,i,s;i=[t],void 0!==(s="function"==typeof(n=function(e){function t(){var e,t,r="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(r+="-"),r+=(12===e?4:16===e?3&t|8:t).toString(16);return r}function r(e,t){var r=n[t||"all"];return r&&r.test(e)||!1}var n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.isUUID=r,t.VERSION="0.1.0",e.uuid=t,e.isUUID=r})?n.apply(t,i):n)&&(e.exports=s)},function(e,t){"use strict";e.exports={}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),o=(n(s),r(7)),a=n(o),u=function(){function e(t){var r=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._config=r,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return i(e,[{key:"HMACSHA256",value:function(e){return a.default.HmacSHA256(e,this._config.secretKey).toString(a.default.enc.Base64)}},{key:"SHA256",value:function(e){return a.default.SHA256(e).toString(a.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?a.default.enc.Base64.parse(e):"hex"===t.keyEncoding?a.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?a.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?a.default.mode.ECB:a.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?a.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,r){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,r)}},{key:"decrypt",value:function(e,t,r){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,r)}},{key:"pnEncrypt",value:function(e,t,r){if(!t&&!this._config.cipherKey)return e;r=this._parseOptions(r);var n=this._getIV(r),i=this._getMode(r),s=this._getPaddedKey(t||this._config.cipherKey,r);return a.default.AES.encrypt(e,s,{iv:n,mode:i}).ciphertext.toString(a.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,r){if(!t&&!this._config.cipherKey)return e;r=this._parseOptions(r);var n=this._getIV(r),i=this._getMode(r),s=this._getPaddedKey(t||this._config.cipherKey,r);try{var o=a.default.enc.Base64.parse(e),u=a.default.AES.decrypt({ciphertext:o},s,{iv:n,mode:i}).toString(a.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}]),e}();t.default=u,e.exports=t.default},function(e,t){"use strict";var r=r||function(e,t){var r={},n=r.lib={},i=function(){},s=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var i=0;i<e;i++)t[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<e;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new o.init(r,t)}}),a=r.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(r,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(r,t)}},h=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*s,i=e.min(4*t,i),t){for(var u=0;u<t;u+=s)this._doProcessBlock(n,u);u=n.splice(0,t),r.sigBytes-=i}return new o.init(u,i)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}});var p=r.algo={};return r}(Math);!function(e){for(var t=r,n=t.lib,i=n.WordArray,s=n.Hasher,n=t.algo,o=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,h=0;64>h;){var l;e:{l=c;for(var p=e.sqrt(l),d=2;d<=p;d++)if(!(l%d)){l=!1;break e}l=!0}l&&(8>h&&(o[h]=u(e.pow(c,.5))),a[h]=u(e.pow(c,1/3)),h++),c++}var f=[],n=n.SHA256=s.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],u=r[4],c=r[5],h=r[6],l=r[7],p=0;64>p;p++){if(16>p)f[p]=0|e[t+p];else{var d=f[p-15],g=f[p-2];f[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+f[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[p-16]}d=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&h)+a[p]+f[p],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&s^i&s),l=h,h=c,c=u,u=o+d|0,o=s,s=i,i=n,n=d+g|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+u|0,r[5]=r[5]+c|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(n),t.HmacSHA256=s._createHmacHelper(n)}(Math),function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,r){e=this._hasher=new e.init,"string"==typeof r&&(r=t.parse(r));var n=e.blockSize,i=4*n;r.sigBytes>i&&(r=e.finalize(r)),r.clamp();for(var s=this._oKey=r.clone(),o=this._iKey=r.clone(),a=s.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=r,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<r;o++)e.push(n.charAt(s>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,n=this._map,i=n.charAt(64);i&&-1!=(i=e.indexOf(i))&&(r=i);for(var i=[],s=0,o=0;o<r;o++)if(o%4){var a=n.indexOf(e.charAt(o-1))<<o%4*2,u=n.indexOf(e.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|u)<<24-s%4*8,s++}return t.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,r,n,i,s,o){return((e=e+(t&r|~t&n)+i+o)<<s|e>>>32-s)+t}function n(e,t,r,n,i,s,o){return((e=e+(t&n|r&~n)+i+o)<<s|e>>>32-s)+t}function i(e,t,r,n,i,s,o){return((e=e+(t^r^n)+i+o)<<s|e>>>32-s)+t}function s(e,t,r,n,i,s,o){return((e=e+(r^(t|~n))+i+o)<<s|e>>>32-s)+t}for(var o=r,a=o.lib,u=a.WordArray,c=a.Hasher,a=o.algo,h=[],l=0;64>l;l++)h[l]=4294967296*e.abs(e.sin(l+1))|0;a=a.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var o=0;16>o;o++){var a=r+o,u=e[a];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var o=this._hash.words,a=e[r+0],u=e[r+1],c=e[r+2],l=e[r+3],p=e[r+4],d=e[r+5],f=e[r+6],g=e[r+7],v=e[r+8],m=e[r+9],y=e[r+10],T=e[r+11],b=e[r+12],S=e[r+13],_=e[r+14],C=e[r+15],E=o[0],w=o[1],A=o[2],R=o[3],E=t(E,w,A,R,a,7,h[0]),R=t(R,E,w,A,u,12,h[1]),A=t(A,R,E,w,c,17,h[2]),w=t(w,A,R,E,l,22,h[3]),E=t(E,w,A,R,p,7,h[4]),R=t(R,E,w,A,d,12,h[5]),A=t(A,R,E,w,f,17,h[6]),w=t(w,A,R,E,g,22,h[7]),E=t(E,w,A,R,v,7,h[8]),R=t(R,E,w,A,m,12,h[9]),A=t(A,R,E,w,y,17,h[10]),w=t(w,A,R,E,T,22,h[11]),E=t(E,w,A,R,b,7,h[12]),R=t(R,E,w,A,S,12,h[13]),A=t(A,R,E,w,_,17,h[14]),w=t(w,A,R,E,C,22,h[15]),E=n(E,w,A,R,u,5,h[16]),R=n(R,E,w,A,f,9,h[17]),A=n(A,R,E,w,T,14,h[18]),w=n(w,A,R,E,a,20,h[19]),E=n(E,w,A,R,d,5,h[20]),R=n(R,E,w,A,y,9,h[21]),A=n(A,R,E,w,C,14,h[22]),w=n(w,A,R,E,p,20,h[23]),E=n(E,w,A,R,m,5,h[24]),R=n(R,E,w,A,_,9,h[25]),A=n(A,R,E,w,l,14,h[26]),w=n(w,A,R,E,v,20,h[27]),E=n(E,w,A,R,S,5,h[28]),R=n(R,E,w,A,c,9,h[29]),A=n(A,R,E,w,g,14,h[30]),w=n(w,A,R,E,b,20,h[31]),E=i(E,w,A,R,d,4,h[32]),R=i(R,E,w,A,v,11,h[33]),A=i(A,R,E,w,T,16,h[34]),w=i(w,A,R,E,_,23,h[35]),E=i(E,w,A,R,u,4,h[36]),R=i(R,E,w,A,p,11,h[37]),A=i(A,R,E,w,g,16,h[38]),w=i(w,A,R,E,y,23,h[39]),E=i(E,w,A,R,S,4,h[40]),R=i(R,E,w,A,a,11,h[41]),A=i(A,R,E,w,l,16,h[42]),w=i(w,A,R,E,f,23,h[43]),E=i(E,w,A,R,m,4,h[44]),R=i(R,E,w,A,b,11,h[45]),A=i(A,R,E,w,C,16,h[46]),w=i(w,A,R,E,c,23,h[47]),E=s(E,w,A,R,a,6,h[48]),R=s(R,E,w,A,g,10,h[49]),A=s(A,R,E,w,_,15,h[50]),w=s(w,A,R,E,d,21,h[51]),E=s(E,w,A,R,b,6,h[52]),R=s(R,E,w,A,l,10,h[53]),A=s(A,R,E,w,y,15,h[54]),w=s(w,A,R,E,u,21,h[55]),E=s(E,w,A,R,v,6,h[56]),R=s(R,E,w,A,C,10,h[57]),A=s(A,R,E,w,f,15,h[58]),w=s(w,A,R,E,S,21,h[59]),E=s(E,w,A,R,p,6,h[60]),R=s(R,E,w,A,T,10,h[61]),A=s(A,R,E,w,c,15,h[62]),w=s(w,A,R,E,m,21,h[63]);o[0]=o[0]+E|0,o[1]=o[1]+w|0,o[2]=o[2]+A|0,o[3]=o[3]+R|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var s=e.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),t=this._hash,r=t.words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=c._createHelper(a),o.HmacMD5=c._createHmacHelper(a)}(Math),function(){var e=r,t=e.lib,n=t.Base,i=t.WordArray,t=e.algo,s=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),s=i.create(),o=s.words,a=r.keySize,r=r.iterations;o.length<a;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<r;c++)u=n.finalize(u),n.reset();s.concat(u)}return s.sigBytes=4*a,s}});e.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)}}(),r.lib.Cipher||function(e){var t=r,n=t.lib,i=n.Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,a=t.enc.Base64,u=t.algo.EvpKDF,c=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?g:f).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?g:f).decrypt(e,t,r,n)}}}});n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=t.mode={},l=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]},p=(n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();p.Encryptor=p.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;l.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),p.Decryptor=p.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),l.call(this,e,t,n),this._prevBlock=i}}),h=h.CBC=p,p=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,r=r-e.sigBytes%r,n=r<<24|r<<16|r<<8|r,i=[],o=0;o<r;o+=4)i.push(n);r=s.create(i,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:p}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:r})}},f=n.SerializableCipher=i.extend({cfg:i.extend({format:h}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,d.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,r,n){return n||(n=s.random(8)),e=u.create({keySize:t+r}).compute(e,n),r=s.create(e.words.slice(t),4*r),e.sigBytes=4*t,d.create({key:e,iv:r,salt:n})}},g=n.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:t}),encrypt:function(e,t,r,n){return n=this.cfg.extend(n),r=n.kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=f.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,f.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],s=[],o=[],a=[],u=[],c=[],h=[],l=[],p=[],d=[],f=[],g=0;256>g;g++)f[g]=128>g?g<<1:g<<1^283;for(var v=0,m=0,g=0;256>g;g++){var y=m^m<<1^m<<2^m<<3^m<<4,y=y>>>8^255&y^99;i[v]=y,s[y]=v;var T=f[v],b=f[T],S=f[b],_=257*f[y]^16843008*y;o[v]=_<<24|_>>>8,a[v]=_<<16|_>>>16,u[v]=_<<8|_>>>24,c[v]=_,_=16843009*S^65537*b^257*T^16843008*v,h[y]=_<<24|_>>>8,l[y]=_<<16|_>>>16,p[y]=_<<8|_>>>24,d[y]=_,v?(v=T^f[f[f[S^T]]],m^=f[f[m]]):v=m=1}var C=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes/4,e=4*((this._nRounds=r+6)+1),n=this._keySchedule=[],s=0;s<e;s++)if(s<r)n[s]=t[s];else{var o=n[s-1];s%r?6<r&&4==s%r&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=i[(o=o<<8|o>>>24)>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=C[s/r|0]<<24),n[s]=n[s-r]^o}for(t=this._invKeySchedule=[],r=0;r<e;r++)s=e-r,o=r%4?n[s]:n[s-4],t[r]=4>r||4>=s?o:h[i[o>>>24]]^l[i[o>>>16&255]]^p[i[o>>>8&255]]^d[i[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,u,c,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,h,l,p,d,s),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,s,o,a){for(var u=this._nRounds,c=e[t]^r[0],h=e[t+1]^r[1],l=e[t+2]^r[2],p=e[t+3]^r[3],d=4,f=1;f<u;f++)var g=n[c>>>24]^i[h>>>16&255]^s[l>>>8&255]^o[255&p]^r[d++],v=n[h>>>24]^i[l>>>16&255]^s[p>>>8&255]^o[255&c]^r[d++],m=n[l>>>24]^i[p>>>16&255]^s[c>>>8&255]^o[255&h]^r[d++],p=n[p>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[255&l]^r[d++],c=g,h=v,l=m;g=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^r[d++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&c])^r[d++],m=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^r[d++],p=(a[p>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[d++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=p},keySize:8});e.AES=t._createHelper(n)}(),r.mode.ECB=function(){var e=r.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),o=(n(s),r(2)),a=(n(o),r(9)),u=(n(a),r(11)),c=n(u),h=r(14),l=n(h),p=r(15),d=n(p),f=(r(5),r(10)),g=n(f),v=function(){function e(t){var r=t.subscribeEndpoint,n=t.leaveEndpoint,i=t.heartbeatEndpoint,s=t.setStateEndpoint,o=t.timeEndpoint,a=t.config,u=t.crypto,h=t.listenerManager;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listenerManager=h,this._config=a,this._leaveEndpoint=n,this._heartbeatEndpoint=i,this._setStateEndpoint=s,this._subscribeEndpoint=r,this._crypto=u,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new c.default({timeEndpoint:o}),this._dedupingManager=new l.default({config:a})}return i(e,[{key:"adaptStateChange",value:function(e,t){var r=this,n=e.state,i=e.channels,s=void 0===i?[]:i,o=e.channelGroups,a=void 0===o?[]:o;return s.forEach(function(e){e in r._channels&&(r._channels[e].state=n)}),a.forEach(function(e){e in r._channelGroups&&(r._channelGroups[e].state=n)}),this._setStateEndpoint({state:n,channels:s,channelGroups:a},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,r=e.connected,n=e.channels,i=void 0===n?[]:n,s=e.channelGroups,o=void 0===s?[]:s;r?(i.forEach(function(e){t._heartbeatChannels[e]={state:{}}}),o.forEach(function(e){t._heartbeatChannelGroups[e]={state:{}}})):(i.forEach(function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]}),o.forEach(function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:i,channelGroups:o},function(e){t._listenerManager.announceStatus(e)})),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,r=e.timetoken,n=e.channels,i=void 0===n?[]:n,s=e.channelGroups,o=void 0===s?[]:s,a=e.withPresence,u=void 0!==a&&a,c=e.withHeartbeats,h=void 0!==c&&c;this._config.subscribeKey&&""!==this._config.subscribeKey?(r&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=r),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),h&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),o.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),h&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var r=this,n=e.channels,i=void 0===n?[]:n,s=e.channelGroups,o=void 0===s?[]:s,a=[],u=[];i.forEach(function(e){e in r._channels&&(delete r._channels[e],a.push(e),e in r._heartbeatChannels&&delete r._heartbeatChannels[e]),e in r._presenceChannels&&(delete r._presenceChannels[e],a.push(e))}),o.forEach(function(e){e in r._channelGroups&&(delete r._channelGroups[e],u.push(e),e in r._heartbeatChannelGroups&&delete r._heartbeatChannelGroups[e]),e in r._presenceChannelGroups&&(delete r._channelGroups[e],u.push(e))}),0===a.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:a,channelGroups:u},function(e){e.affectedChannels=a,e.affectedChannelGroups=u,e.currentTimetoken=r._currentTimetoken,e.lastTimetoken=r._lastTimetoken,r._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=this.getHeartbeatChannels(),r=this.getHeartbeatChannelGroups(),n={};0===t.length&&0===r.length||(this.getSubscribedChannels().forEach(function(t){var r=e._channels[t].state;Object.keys(r).length&&(n[t]=r)}),this.getSubscribedChannelGroups().forEach(function(t){var r=e._channelGroups[t].state;Object.keys(r).length&&(n[t]=r)}),this._heartbeatEndpoint({channels:t,channelGroups:r,state:n},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){var e=this;this._stopSubscribeLoop();var t={},r=[],n=[];if(Object.keys(this._channels).forEach(function(n){var i=e._channels[n].state;Object.keys(i).length&&(t[n]=i),r.push(n)}),Object.keys(this._presenceChannels).forEach(function(e){r.push(e+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(r){var i=e._channelGroups[r].state;Object.keys(i).length&&(t[r]=i),n.push(r)}),Object.keys(this._presenceChannelGroups).forEach(function(e){n.push(e+"-pnpres")}),0!==r.length||0!==n.length){var i={channels:r,channelGroups:n,state:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(i,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var r=this;if(e.error)e.category===g.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===g.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){r._config.autoNetworkDetection&&!r._isOnline&&(r._isOnline=!0,r._listenerManager.announceNetworkUp()),r.reconnect(),r._subscriptionStatusAnnounced=!0;var t={category:g.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:r._lastTimetoken,currentTimetoken:r._currentTimetoken};r._listenerManager.announceStatus(t)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===g.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var n={};n.category=g.default.PNConnectedCategory,n.operation=e.operation,n.affectedChannels=this._pendingChannelSubscriptions,n.subscribedChannels=this.getSubscribedChannels(),n.affectedChannelGroups=this._pendingChannelGroupSubscriptions,n.lastTimetoken=this._lastTimetoken,n.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(n),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],s=this._config,o=s.requestMessageCountThreshold,a=s.dedupeOnSubscribe;if(o&&i.length>=o){var u={};u.category=g.default.PNRequestMessageCountExceededCategory,u.operation=e.operation,this._listenerManager.announceStatus(u)}i.forEach(function(e){var t=e.channel,n=e.subscriptionMatch,i=e.publishMetaData;if(t===n&&(n=null),a){if(r._dedupingManager.isDuplicate(e))return;r._dedupingManager.addEntry(e)}if(d.default.endsWith(e.channel,"-pnpres")){var s={channel:null,subscription:null};s.actualChannel=null!=n?t:null,s.subscribedChannel=null!=n?n:t,t&&(s.channel=t.substring(0,t.lastIndexOf("-pnpres"))),n&&(s.subscription=n.substring(0,n.lastIndexOf("-pnpres"))),s.action=e.payload.action,s.state=e.payload.data,s.timetoken=i.publishTimetoken,s.occupancy=e.payload.occupancy,s.uuid=e.payload.uuid,s.timestamp=e.payload.timestamp,e.payload.join&&(s.join=e.payload.join),e.payload.leave&&(s.leave=e.payload.leave),e.payload.timeout&&(s.timeout=e.payload.timeout),r._listenerManager.announcePresence(s)}else{var o={channel:null,subscription:null};o.actualChannel=null!=n?t:null,o.subscribedChannel=null!=n?n:t,o.channel=t,o.subscription=n,o.timetoken=i.publishTimetoken,o.publisher=e.issuingClientId,e.userMetadata&&(o.userMetadata=e.userMetadata),r._config.cipherKey?o.message=r._crypto.decrypt(e.payload):o.message=e.payload,r._listenerManager.announceMessage(o)}}),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=v,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r(5),r(10)),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listeners=[]}return n(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach(function(r){r!==e&&t.push(r)}),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach(function(t){t.presence&&t.presence(e)})}},{key:"announceStatus",value:function(e){this._listeners.forEach(function(t){t.status&&t.status(e)})}},{key:"announceMessage",value:function(e){this._listeners.forEach(function(t){t.message&&t.message(e)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=s.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=s.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r(12),r(5),function(){function e(t){var r=t.timeEndpoint;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._timeEndpoint=r}return n(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint(function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())})}}]),e}());t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r(2),r(5),function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}),s=function(){function e(t){var r=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hashHistory=[],this._config=r}return n(e,[{key:"getKey",value:function(e){var t=i(JSON.stringify(e.payload)).toString();return e.publishMetaData.publishTimetoken+"-"+t}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}();t.default=s,e.exports=t.default},function(e,t){"use strict";function r(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function n(e){return function(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}(e).sort()}e.exports={signPamFromParams:function(e){return n(e).map(function(t){return t+"="+r(e[t])}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e=void 0,t=void 0;return{promise:new Promise(function(r,n){e=r,t=n}),reject:t,fulfill:e}},encodeString:r}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e,t){return e.type=t,e.error=!0,e}({message:e},"validationError")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.networking,n=e.config,s=null,a=null,c={};t.getOperation()===l.default.PNTimeOperation||t.getOperation()===l.default.PNChannelGroupsOperation?s=arguments.length<=2?void 0:arguments[2]:(c=arguments.length<=2?void 0:arguments[2],s=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||s||(a=u.default.createPromise());var h=t.validateParams(e,c);if(!h){var d=t.prepareParams(e,c),f=function(e,t,r){return e.usePost&&e.usePost(t,r)?e.postURL(t,r):e.getURL(t,r)}(t,e,c),g=void 0,v={url:f,operation:t.getOperation(),timeout:t.getRequestTimeout(e)};d.uuid=n.UUID,d.pnsdk=function(e){if(e.sdkName)return e.sdkName;var t="PubNub-JS-"+e.sdkFamily;return e.partnerId&&(t+="-"+e.partnerId),t+="/"+e.getVersion()}(n),n.useInstanceId&&(d.instanceid=n.instanceId),n.useRequestId&&(d.requestid=o.default.createUUID()),t.isAuthSupported()&&n.getAuthKey()&&(d.auth=n.getAuthKey()),n.secretKey&&function(e,t,r){var n=e.config,i=e.crypto;r.timestamp=Math.floor((new Date).getTime()/1e3);var s=n.subscribeKey+"\n"+n.publishKey+"\n"+t+"\n";s+=u.default.signPamFromParams(r);var o=i.HMACSHA256(s);o=(o=o.replace(/\+/g,"-")).replace(/\//g,"_"),r.signature=o}(e,f,d);var m=function(r,n){if(r.error)s?s(r):a&&a.reject(new p("PubNub call failed, check status for details",r));else{var i=t.handleResponse(e,n,c);s?s(r,i):a&&a.fulfill(i)}};if(t.usePost&&t.usePost(e,c)){var y=t.postPayload(e,c);g=r.POST(d,y,v,m)}else g=t.useDelete&&t.useDelete()?r.DELETE(d,v,m):r.GET(d,v,m);return t.getOperation()===l.default.PNSubscribeOperation?g:a?a.promise:void 0}return s?s(i(h)):a?(a.reject(new p("Validation failed, check status for details",i(h))),a.promise):void 0};var s=r(3),o=n(s),a=(r(5),r(15)),u=n(a),c=r(2),h=(n(c),r(13)),l=n(h),p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,n.status=r,n.message=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error);e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var r=t.channels,n=t.channelGroup,i=e.config;return n?r&&0!==r.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+a.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channels;return{add:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var r=t.channels,n=t.channelGroup,i=e.config;return n?r&&0!==r.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+a.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channels;return{remove:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var r=t.channelGroup,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+a.default.encodeString(r)+"/remove"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var r=t.channelGroup,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+a.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=t.channels,s=e.config;return r?n?i&&0!==i.length?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.pushGateway,n=t.channels;return{type:r,add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=t.channels,s=e.config;return r?n?i&&0!==i.length?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.pushGateway,n=t.channels;return{type:r,remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=e.config;return r?n?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=e.config;return r?n?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r+"/remove"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+a.default.encodeString(s)+"/leave"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i={};return n.length>0&&(i["channel-group"]=n.join(",")),i},t.handleResponse=function(){return{}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.uuid,i=void 0===n?r.UUID:n;return"/v2/presence/sub-key/"+r.subscribeKey+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+a.default.encodeString(s)+"/heartbeat"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i=t.state,s=void 0===i?{}:i,o=e.config,a={};return n.length>0&&(a["channel-group"]=n.join(",")),a.state=JSON.stringify(s),a.heartbeat=o.getPresenceTimeout(),a},t.handleResponse=function(){return{}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.uuid,i=void 0===n?r.UUID:n,s=t.channels,o=void 0===s?[]:s,u=o.length>0?o.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+a.default.encodeString(u)+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i={};return n.length>0&&(i["channel-group"]=n.join(",")),i},t.handleResponse=function(e,t,r){var n=r.channels,i=void 0===n?[]:n,s=r.channelGroups,o=void 0===s?[]:s,a={};return 1===i.length&&0===o.length?a[i[0]]=t.payload:a=t.payload,{channels:a}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNSetStateOperation},t.validateParams=function(e,t){var r=e.config,n=t.state,i=t.channels,s=void 0===i?[]:i,o=t.channelGroups,a=void 0===o?[]:o;return n?r.subscribeKey?0===s.length&&0===a.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+a.default.encodeString(s)+"/uuid/"+r.UUID+"/data"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.state,n=t.channelGroups,i=void 0===n?[]:n,s={};return s.state=JSON.stringify(r),i.length>0&&(s["channel-group"]=i.join(",")),s},t.handleResponse=function(e,t){return{state:t.payload}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=t.channelGroups,o=void 0===s?[]:s,u="/v2/presence/sub-key/"+r.subscribeKey;if(i.length>0||o.length>0){var c=i.length>0?i.join(","):",";u+="/channel/"+a.default.encodeString(c)}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i=t.includeUUIDs,s=void 0===i||i,o=t.includeState,a=void 0!==o&&o,u={};return s||(u.disable_uuids=1),a&&(u.state=1),n.length>0&&(u["channel-group"]=n.join(",")),u},t.handleResponse=function(e,t,r){var n=r.channels,i=void 0===n?[]:n,s=r.channelGroups,o=void 0===s?[]:s,a=r.includeUUIDs,u=void 0===a||a,c=r.includeState,h=void 0!==c&&c;return i.length>1||o.length>0||0===o.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach(function(r){var n=t.payload.channels[r],i=[];return e.channels[r]={occupants:i,name:r,occupancy:n.occupancy},u&&n.uuids.forEach(function(e){h?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})}),e}),e}():function(){var e={},r=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:r,name:i[0],occupancy:t.occupancy},u&&t.uuids&&t.uuids.forEach(function(e){h?r.push({state:e.state,uuid:e.uuid}):r.push({state:null,uuid:e})}),e}()};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/audit/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var r=t.channel,n=t.channelGroup,i=t.authKeys,s=void 0===i?[]:i,o={};return r&&(o.channel=r),n&&(o["channel-group"]=n),s.length>0&&(o.auth=s.join(",")),o},t.handleResponse=function(e,t){return t.payload};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/grant/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var r=t.channels,n=void 0===r?[]:r,i=t.channelGroups,s=void 0===i?[]:i,o=t.ttl,a=t.read,u=void 0!==a&&a,c=t.write,h=void 0!==c&&c,l=t.manage,p=void 0!==l&&l,d=t.authKeys,f=void 0===d?[]:d,g={};return g.r=u?"1":"0",g.w=h?"1":"0",g.m=p?"1":"0",n.length>0&&(g.channel=n.join(",")),s.length>0&&(g["channel-group"]=s.join(",")),f.length>0&&(g.auth=f.join(",")),(o||0===o)&&(g.ttl=o),g},t.handleResponse=function(){return{}};var n=(r(5),r(13)),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=e.crypto,n=e.config,i=JSON.stringify(t);return n.cipherKey&&(i=r.encrypt(i),i=JSON.stringify(i)),i}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getOperation=function(){return a.default.PNPublishOperation},t.validateParams=function(e,t){var r=e.config,n=t.message;return t.channel?n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var r=t.sendByPost;return void 0!==r&&r},t.getURL=function(e,t){var r=e.config,n=t.channel,s=t.message,o=i(e,s);return"/publish/"+r.publishKey+"/"+r.subscribeKey+"/0/"+c.default.encodeString(n)+"/0/"+c.default.encodeString(o)},t.postURL=function(e,t){var r=e.config,n=t.channel;return"/publish/"+r.publishKey+"/"+r.subscribeKey+"/0/"+c.default.encodeString(n)+"/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return i(e,t.message)},t.prepareParams=function(e,t){var r=t.meta,n=t.replicate,i=void 0===n||n,o=t.storeInHistory,a=t.ttl,u={};return null!=o&&(u.store=o?"1":"0"),a&&(u.ttl=a),!1===i&&(u.norep="true"),r&&"object"===(void 0===r?"undefined":s(r))&&(u.meta=JSON.stringify(r)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}};var o=(r(5),r(13)),a=n(o),u=r(15),c=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=e.config,n=e.crypto;if(!r.cipherKey)return t;try{return n.decrypt(t)}catch(e){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return o.default.PNHistoryOperation},t.validateParams=function(e,t){var r=t.channel,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var r=t.channel;return"/v2/history/sub-key/"+e.config.subscribeKey+"/channel/"+u.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.start,n=t.end,i=t.reverse,s=t.count,o=void 0===s?100:s,a=t.stringifiedTimeToken,u=void 0!==a&&a,c={include_token:"true"};return c.count=o,r&&(c.start=r),n&&(c.end=n),u&&(c.string_message_token="true"),null!=i&&(c.reverse=i.toString()),c},t.handleResponse=function(e,t){var r={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return t[0].forEach(function(t){var n={timetoken:t.timetoken,entry:i(e,t.message)};r.messages.push(n)}),r};var s=(r(5),r(13)),o=n(s),a=r(15),u=n(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var r=t.channel,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){var r=t.channel;return"/v3/history/sub-key/"+e.config.subscribeKey+"/channel/"+a.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.start,n=t.end,i={};return r&&(i.start=r),n&&(i.end=n),i},t.handleResponse=function(e,t){return t.payload};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.getOperation=function(){return o.default.PNMessageCounts},t.validateParams=function(e,t){var r=t.channels,n=t.timetoken,i=t.channelTimetokens,s=e.config;return r?n&&i?"timetoken and channelTimetokens are incompatible together":n&&i&&i.length>1&&r.length!==i.length?"Length of channelTimetokens and channels do not match":s.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var r=t.channels,n=e.config,i=r.join(",");return"/v3/history/sub-key/"+n.subscribeKey+"/message-counts/"+u.default.encodeString(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.timetoken,n=t.channelTimetokens,s={};if(n&&1===n.length){var o=i(n,1),a=o[0];s.timetoken=a}else n?s.channelsTimetoken=n.join(","):r&&(s.timetoken=r);return s},t.handleResponse=function(e,t){return{channels:t.channels}};var s=r(13),o=n(s),a=r(15),u=n(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var r=t.channels,n=e.config;return r&&0!==r.length?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"},t.getURL=function(e,t){var r=t.channels,n=void 0===r?[]:r,i=e.config,s=n.length>0?n.join(","):",";return"/v3/history/sub-key/"+i.subscribeKey+"/channel/"+a.default.encodeString(s)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.start,n=t.end,i=t.count,s=t.stringifiedTimeToken,o=void 0!==s&&s,a={};return i&&(a.max=i),r&&(a.start=r),n&&(a.end=n),o&&(a.string_message_token="true"),a},t.handleResponse=function(e,t){var r={channels:{}};return Object.keys(t.channels||{}).forEach(function(n){r.channels[n]=[],(t.channels[n]||[]).forEach(function(t){var i={};i.channel=n,i.subscription=null,i.timetoken=t.timetoken,i.message=function(e,t){var r=e.config,n=e.crypto;if(!r.cipherKey)return t;try{return n.decrypt(t)}catch(e){return t}}(e,t.message),r.channels[n].push(i)})}),r};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/subscribe/"+r.subscribeKey+"/"+a.default.encodeString(s)+"/0"},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=e.config,n=t.state,i=t.channelGroups,s=void 0===i?[]:i,o=t.timetoken,a=t.filterExpression,u=t.region,c={heartbeat:r.getPresenceTimeout()};return s.length>0&&(c["channel-group"]=s.join(",")),a&&a.length>0&&(c["filter-expr"]=a),Object.keys(n).length&&(c.state=JSON.stringify(n)),o&&(c.tt=o),u&&(c.tr=u),c},t.handleResponse=function(e,t){var r=[];t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},n={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};r.push(n)});var n={timetoken:t.t.t,region:t.t.r};return{messages:r,metadata:n}};var i=(r(5),r(13)),s=n(i),o=r(15),a=n(o)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),o=(n(s),r(10)),a=n(o),u=(r(5),function(){function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._modules={},Object.keys(t).forEach(function(e){r._modules[e]=t[e].bind(r)})}return i(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){if(-1===this._providedFQDN.indexOf("ps."))return this._providedFQDN;var e=void 0;return this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.","ps"+e+".")}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._standardOrigin=this.nextOrigin(e),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,r,n){return this._modules.post(e,t,r,n)}},{key:"GET",value:function(e,t,r){return this._modules.get(e,t,r)}},{key:"DELETE",value:function(e,t,r){return this._modules.del(e,t,r)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return a.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return a.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return a.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return a.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return a.default.PNNetworkIssuesCategory;if(e.timeout)return a.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return a.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return a.default.PNBadRequestCategory;if(e.response.forbidden)return a.default.PNAccessDeniedCategory}return a.default.PNUnknownCategory}}]),e}());t.default=u,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}},e.exports=t.default},function(e,t,r){"use strict";function n(e){var t=(new Date).getTime(),r=(new Date).toISOString(),n=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;n.log("<<<<<"),n.log("["+r+"]","\n",e.url,"\n",e.qs),n.log("-----"),e.on("response",function(r){var i=(new Date).getTime(),s=i-t,o=(new Date).toISOString();n.log(">>>>>>"),n.log("["+o+" / "+s+"]","\n",e.url,"\n",e.qs,"\n",r.text),n.log("-----")})}function i(e,t,r){var i=this;return this._config.logVerbosity&&(e=e.use(n)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e)),e.timeout(t.timeout).end(function(e,n){var s=void 0,o={};if(o.error=null!==e,o.operation=t.operation,n&&n.status&&(o.statusCode=n.status),e){if(e.response&&e.response.text&&!i._config.logVerbosity)try{o.errorData=JSON.parse(e.response.text)}catch(t){o.errorData=e}else o.errorData=e;return o.category=i._detectErrorCategory(e),r(o,null)}try{s=JSON.parse(n.text)}catch(e){return o.errorData=n,o.error=!0,r(o,null)}return s.error&&1===s.error&&s.status&&s.message&&s.service?(o.errorData=s,o.statusCode=s.status,o.error=!0,o.category=i._detectErrorCategory(o),r(o,null)):r(o,s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,r){var n=o.default.get(this.getStandardOrigin()+t.url).query(e);return i.call(this,n,t,r)},t.post=function(e,t,r,n){var s=o.default.post(this.getStandardOrigin()+r.url).query(e).send(t);return i.call(this,s,r,n)},t.del=function(e,t,r){var n=o.default.delete(this.getStandardOrigin()+t.url).query(e);return i.call(this,n,t,r)};var s=r(43),o=function(e){return e&&e.__esModule?e:{default:e}}(s);r(5)},function(e,t,r){function n(){}function i(e){if(!f(e))return e;var t=[];for(var r in e)s(t,r,e[r]);return t.join("&")}function s(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){s(e,t,r)});else if(f(r))for(var n in r)s(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function o(e){for(var t,r,n={},i=e.split("&"),s=0,o=i.length;s<o;++s)t=i[s],-1==(r=t.indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function a(e){return/[\/+]json($|[^-\w])/.test(e)}function u(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,r,n,i,s=e.split(/\r?\n/),o={},a=0,u=s.length;a<u;++a)r=s[a],-1!==(t=r.indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),i=y(r.slice(t+1)),o[n]=i);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function c(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,n=null;try{n=new u(r)}catch(n){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=n,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)})}function h(e,t,r){var n=m("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}var l;"undefined"!=typeof window?l=window:"undefined"!=typeof self?l=self:(console.warn("Using browser-only version of superagent in non-browser environment"),l=this);var p=r(44),d=r(45),f=r(46),g=r(47),v=r(49),m=t=e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1==arguments.length?new t.Request("GET",e):new t.Request(e,r)};t.Request=c,m.getXHR=function(){if(!(!l.XMLHttpRequest||l.location&&"file:"==l.location.protocol&&l.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var y="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};m.serializeObject=i,m.parseString=o,m.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},m.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},m.parse={"application/x-www-form-urlencoded":o,"application/json":JSON.parse},g(u.prototype),u.prototype._parseBody=function(e){var t=m.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&a(this.type)&&(t=m.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},u.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=t,i.url=r,i},m.Response=u,p(c.prototype),d(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",m.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",m.types[e]||e),this},c.prototype.auth=function(e,t,r){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"}),this._auth(e,t,r,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},c.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new l.FormData),this._formData},c.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||n,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var e=this,t=this.xhr=m.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var i=this._header["content-type"],s=this._serializer||m.serialize[i?i.split(";")[0]:""];!s&&a(i)&&(s=m.serialize["application/json"]),s&&(r=s(r))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},m.agent=function(){return new v},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){v.prototype[e.toLowerCase()]=function(t,r){var n=new m.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}}),v.prototype.del=v.prototype.delete,m.get=function(e,t,r){var n=m("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},m.head=function(e,t,r){var n=m("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},m.options=function(e,t,r){var n=m("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},m.del=h,m.delete=h,m.patch=function(e,t,r){var n=m("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},m.post=function(e,t,r){var n=m("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},m.put=function(e,t,r){var n=m("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){"use strict";function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}var i=r(46);e.exports=n,n.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(e){return this._parser=e,this},n.prototype.responseType=function(e){return this._responseType=e,this},n.prototype.serialize=function(e){return this._serializer=e,this},n.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},n.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){r.end(function(r,n){r?t(r):e(n)})})}return this._fullfilledPromise.then(e,t)},n.prototype.catch=function(e){return this.then(void 0,e)},n.prototype.use=function(e){return e(this),this},n.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},n.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},n.prototype.get=function(e){return this._header[e.toLowerCase()]},n.prototype.getHeader=n.prototype.get,n.prototype.set=function(e,t){if(i(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var r in e)this.field(r,e[r]);return this}if(Array.isArray(t)){for(var n in t)this.field(e,t[n]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},n.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},n.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},n.prototype.redirects=function(e){return this._maxRedirects=e,this},n.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(e){var t=i(e),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(r||this.type("json"),this)},n.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},n.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error(e+t+"ms exceeded");n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},n.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,r){"use strict";function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}var i=r(48);e.exports=n,n.prototype.get=function(e){return this.header[e.toLowerCase()]},n.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var r=i.params(t);for(var n in r)this[n]=r[n];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},n.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var r=t.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(e[n]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var r=t.split(/ *; */),n=r[0].slice(1,-1);return e[r[1].split(/ *= */)[1].slice(1,-1)]=n,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),r.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=r}])},function(e,t,r){(function(t,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var n;n=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,s=void 0,o=void 0,a=function(e,t){f[i]=e,f[i+1]=t,2===(i+=2)&&(o?o(g):b())},u="undefined"!=typeof window?window:void 0,c=u||{},h=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(g,1)}}var f=new Array(1e3);function g(){for(var e=0;e<i;e+=2){(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0}i=0}var v,m,y,T,b=void 0;function S(e,t){var r=this,n=new this.constructor(E);void 0===n[C]&&M(n);var i=r._state;if(i){var s=arguments[i-1];a(function(){return U(i,n,s,r._result)})}else P(r,n,e,t);return n}function _(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return I(t,e),t}l?b=function(){return t.nextTick(g)}:h?(m=0,y=new h(g),T=document.createTextNode(""),y.observe(T,{characterData:!0}),b=function(){T.data=m=++m%2}):p?((v=new MessageChannel).port1.onmessage=g,b=function(){return v.port2.postMessage(0)}):b=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(s=e.runOnLoop||e.runOnContext)?function(){s(g)}:d()}catch(e){return d()}}():d();var C=Math.random().toString(36).substring(2);function E(){}var w=void 0,A=1,R=2;function x(t,r,n){r.constructor===t.constructor&&n===S&&r.constructor.resolve===_?function(e,t){t._state===A?D(e,t._result):t._state===R?N(e,t._result):P(t,void 0,function(t){return I(e,t)},function(t){return N(e,t)})}(t,r):void 0===n?D(t,r):e(n)?function(e,t,r){a(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?I(e,r):D(e,r))},function(t){n||(n=!0,N(e,t))},e._label);!n&&i&&(n=!0,N(e,i))},e)}(t,r,n):D(t,r)}function I(e,t){if(e===t)N(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)D(e,t);else{var r=void 0;try{r=t.then}catch(t){return void N(e,t)}x(e,t,r)}var n,i}function O(e){e._onerror&&e._onerror(e._result),k(e)}function D(e,t){e._state===w&&(e._result=t,e._state=A,0!==e._subscribers.length&&a(k,e))}function N(e,t){e._state===w&&(e._state=R,e._result=t,a(O,e))}function P(e,t,r,n){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+A]=r,i[s+R]=n,0===s&&e._state&&a(k,e)}function k(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,s=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?U(r,n,i,s):i(s);e._subscribers.length=0}}function U(t,r,n,i){var s=e(n),o=void 0,a=void 0,u=!0;if(s){try{o=n(i)}catch(e){u=!1,a=e}if(r===o)return void N(r,new TypeError("A promises callback cannot return that same promise."))}else o=i;r._state!==w||(s&&u?I(r,o):!1===u?N(r,a):t===A?D(r,o):t===R&&N(r,o))}var L=0;function M(e){e[C]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var H=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[C]||M(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&D(this.promise,this._result))):N(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===_){var i=void 0,s=void 0,o=!1;try{i=e.then}catch(e){o=!0,s=e}if(i===S&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===q){var a=new r(E);o?N(a,s):x(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===w&&(this._remaining--,e===R?N(n,r):this._result[t]=r),0===this._remaining&&D(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;P(e,void 0,function(e){return r._settledAt(A,t,e)},function(e){return r._settledAt(R,t,e)})},e}(),q=function(){function t(e){this[C]=L++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){I(e,t)},function(t){N(e,t)})}catch(t){N(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return q.prototype.then=S,q.all=function(e){return new H(this,e).promise},q.race=function(e){var t=this;return n(e)?new t(function(r,n){for(var i=e.length,s=0;s<i;s++)t.resolve(e[s]).then(r,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},q.resolve=_,q.reject=function(e){var t=new this(E);return N(t,e),t},q._setScheduler=function(e){o=e},q._setAsap=function(e){a=e},q._asap=a,q.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=q},q.Promise=q,q},e.exports=n()}).call(this,r(34),r(7))},function(e,t,r){var n;!function(){"use strict";function i(e){var t=e&&e.Promise||self.Promise,r=e&&e.XMLHttpRequest||self.XMLHttpRequest,n=self;return function(){var e=Object.create(n,{fetch:{value:void 0,writable:!0}});return function(e){if(!e.fetch){var n={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};c.prototype.append=function(e,t){e=o(e),t=a(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},c.prototype.delete=function(e){delete this.map[o(e)]},c.prototype.get=function(e){var t=this.map[o(e)];return t?t[0]:null},c.prototype.getAll=function(e){return this.map[o(e)]||[]},c.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},c.prototype.set=function(e,t){this.map[o(e)]=[a(t)]},c.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},d.call(f.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var s=[301,302,303,307,308];m.redirect=function(e,t){if(-1===s.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=f,e.Response=m,e.fetch=function(e,i){return new t(function(t,s){var o;o=f.prototype.isPrototypeOf(e)&&!i?e:new f(e,i);var a=new r;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:v(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;t(new m(r,e))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&n.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return t.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new t(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function p(e){var t=new FileReader;return t.readAsArrayBuffer(e),l(t)}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob?(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(p)},this.text=function(){var e,r,n=h(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,(r=new FileReader).readAsText(e),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)}):this.text=function(){var e=h(this);return e||t.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e,t){var r,n,s=(t=t||{}).body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,s||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),i.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function v(e){var t=new c;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),i=r.join(":").trim();t.append(n,i)}),t}function m(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof c?t.headers:new c(t.headers),this.url=t.url||"",this._initBody(e)}}(void 0!==e?e:this),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response}}()}void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){(function(t){var n=r(3).EventEmitter,i=r(33),s=r(31),o=r(75),a=r(35),u=r(32);function c(e){n.call(this),this.events={beforeLogin:"beforeLogin",loginSuccess:"loginSuccess",loginError:"loginError",beforeRefresh:"beforeRefresh",refreshSuccess:"refreshSuccess",refreshError:"refreshError",beforeLogout:"beforeLogout",logoutSuccess:"logoutSuccess",logoutError:"logoutError",rateLimitError:"rateLimitError"},e=e||{},this._server=e.server,this._appKey=e.appKey,this._appSecret=e.appSecret,this._redirectUri=e.redirectUri||"",this._refreshDelayMs=e.refreshDelayMs||100,this._clearCacheOnRefreshError=void 0===e.clearCacheOnRefreshError||e.clearCacheOnRefreshError,this._userAgent=(e.appName?e.appName+(e.appVersion?"/"+e.appVersion:"")+" ":"")+"RCJSSDK/"+a.version,this._externals=e.externals,this._cache=e.cache,this._client=e.client,this._knownPrefixes=e.knownPrefixes||c._knownPrefixes,this._refreshPromise=null,this._auth=new o({cache:this._cache,cacheId:c._cacheId,refreshHandicapMs:e.refreshHandicapMs})}c._urlPrefix="/restapi",c._apiVersion="v1.0",c._knownPrefixes=["/rcvideo"],c._tokenEndpoint="/restapi/oauth/token",c._revokeEndpoint="/restapi/oauth/revoke",c._authorizeEndpoint="/restapi/oauth/authorize",c._cacheId="platform",c.prototype=Object.create(n.prototype),c.prototype.delay=function(e){return new this._externals.Promise(function(t,r){setTimeout(function(){t(null)},e)})},c.prototype.auth=function(){return this._auth},c.prototype.client=function(){return this._client},c.prototype.createUrl=function(e,t){t=t||{};var r="",n=-1!=(e=e||"").indexOf("http://")||-1!=e.indexOf("https://"),i=this._knownPrefixes.some(function(t){return 0===e.indexOf(t)});return t.addServer&&!n&&(r+=this._server),-1!=e.indexOf(c._urlPrefix)||n||i||(r+=c._urlPrefix+"/"+c._apiVersion),r+=e,(t.addMethod||t.addToken)&&(r+=e.indexOf("?")>-1?"&":"?"),t.addMethod&&(r+="_method="+t.addMethod),t.addToken&&(r+=(t.addMethod?"&":"")+"access_token="+this._auth.accessToken()),r},c.prototype.loginUrl=function(e){return e=e||{},this.createUrl(c._authorizeEndpoint+"?"+i.stringify({response_type:e.implicit?"token":"code",redirect_uri:e.redirectUri||this._redirectUri,client_id:this._appKey,state:e.state||"",brand_id:e.brandId||"",display:e.display||"",prompt:e.prompt||""}),{addServer:!0})},c.prototype.parseLoginRedirect=function(e){function t(e,t){return e.split(t).reverse()[0]}var r=0===e.indexOf("#")&&t(e,"#")||0===e.indexOf("?")&&t(e,"?")||null;if(!r)throw new Error("Unable to parse response");var n=i.parse(r);if(!n)throw new Error("Unable to parse response");var s=n.error_description||n.error;if(s){var o=new Error(s);throw o.error=n.error,o}return n},c.prototype.loginWindow=function(e){return new this._externals.Promise(function(t,r){if("undefined"==typeof window)throw new Error("This method can be used only in browser");if(!e.url)throw new Error("Missing mandatory URL parameter");(e=e||{}).width=e.width||400,e.height=e.height||600,e.origin=e.origin||window.location.origin,e.property=e.property||a.authResponseProperty,e.target=e.target||"_blank";var n=void 0!==window.screenLeft?window.screenLeft:screen.left,i=void 0!==window.screenTop?window.screenTop:screen.top,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=s/2-e.width/2+n,c=o/2-e.height/2+i,h=window.open(e.url,"_blank","_blank"==e.target?"scrollbars=yes, status=yes, width="+e.width+", height="+e.height+", left="+u+", top="+c:"");if(!h)throw new Error("Could not open login window. Please allow popups for this site");h.focus&&h.focus();var l=window.addEventListener?"addEventListener":"attachEvent",p="addEventListener"==l?"removeEventListener":"detachEvent",d="addEventListener"==l?"message":"onmessage",f=function(n){try{if(n.origin!=e.origin)return;if(!n.data||!n.data[e.property])return;h.close(),window[p](d,f);var i=this.parseLoginRedirect(n.data[e.property]);if(!i.code&&!i.access_token)throw new Error("No authorization code or token");t(i)}catch(n){r(n)}}.bind(this);window[l](d,f,!1)}.bind(this))},c.prototype.loggedIn=function(){return this.ensureLoggedIn().then(function(){return!0}).catch(function(){return!1})},c.prototype.login=function(e){return new this._externals.Promise(function(t){e=e||{},this.emit(this.events.beforeLogin);var r={};if(e.access_token)return t(e);e.code?e.code&&(r.grant_type="authorization_code",r.code=e.code,r.redirect_uri=e.redirectUri||this._redirectUri):(r.grant_type="password",r.username=e.username,r.password=e.password,r.extension=e.extension||""),e.endpointId&&(r.endpoint_id=e.endpointId),e.accessTokenTtl&&(r.access_token_ttl=e.accessTokenTtl),e.refreshTokenTtl&&(r.refresh_token_ttl=e.refreshTokenTtl),t(this._tokenRequest(c._tokenEndpoint,r))}.bind(this)).then(function(e){var t=e.json?e:null,r=t&&t.json()||e;return this._auth.setData(r),this.emit(this.events.loginSuccess,t),t}.bind(this)).catch(function(e){throw this._clearCacheOnRefreshError&&this._cache.clean(),this.emit(this.events.loginError,e),e}.bind(this))},c.prototype._refresh=function(){return this.delay(this._refreshDelayMs).then(function(){if(this.emit(this.events.beforeRefresh),!this._auth.refreshToken())throw new Error("Refresh token is missing");if(!this._auth.refreshTokenValid())throw new Error("Refresh token has expired");return this._tokenRequest(c._tokenEndpoint,{grant_type:"refresh_token",refresh_token:this._auth.refreshToken(),access_token_ttl:this._auth.data().expires_in+1,refresh_token_ttl:this._auth.data().refresh_token_expires_in+1})}.bind(this)).then(function(e){var t=e.json();if(!t.access_token)throw this._client.makeError(new Error("Malformed OAuth response"),e);return this._auth.setData(t),this.emit(this.events.refreshSuccess,e),e}.bind(this)).catch(function(e){throw e=this._client.makeError(e),this._clearCacheOnRefreshError&&this._cache.clean(),this.emit(this.events.refreshError,e),e}.bind(this))},c.prototype.refresh=function(){return this._refreshPromise||(this._refreshPromise=this._refresh().then(function(e){return this._refreshPromise=null,e}.bind(this)).catch(function(e){throw this._refreshPromise=null,e}.bind(this))),this._refreshPromise},c.prototype.logout=function(){return new this._externals.Promise(function(e){this.emit(this.events.beforeLogout),e(this._tokenRequest(c._revokeEndpoint,{token:this._auth.accessToken()}))}.bind(this)).then(function(e){return this._cache.clean(),this.emit(this.events.logoutSuccess,e),e}.bind(this)).catch(function(e){throw this.emit(this.events.logoutError,e),e}.bind(this))},c.prototype.inflateRequest=function(e,t){return(t=t||{}).skipAuthCheck?this._externals.Promise.resolve(e):this.ensureLoggedIn().then(function(){return e.headers.set("X-User-Agent",this._userAgent),e.headers.set("Client-Id",this._appKey),e.headers.set("Authorization",this._authHeader()),e}.bind(this))},c.prototype.sendRequest=function(e,t){return this.inflateRequest(e,t).then(function(e){return t=t||{},this._client.sendRequest(e)}.bind(this)).catch(function(e){if(!e.apiResponse||!e.apiResponse.response()||t.retry)throw e;var r=e.apiResponse.response(),n=r.status;if(n!=u._unauthorizedStatus&&n!=u._rateLimitStatus)throw e;t.retry=!0;var i=0;if(n==u._unauthorizedStatus&&this._auth.cancelAccessToken(),n==u._rateLimitStatus){var s=t.handleRateLimit&&"boolean"!=typeof t.handleRateLimit?t.handleRateLimit:60;if(i=1e3*parseFloat(r.headers.get("retry-after")||s),e.retryAfter=i,this.emit(this.events.rateLimitError,e),!t.handleRateLimit)throw e}return this.delay(i).then(function(){return this.sendRequest(this._client.createRequest(t),t)}.bind(this))}.bind(this))},c.prototype.send=function(e){return(e=e||{}).url=this.createUrl(e.url,{addServer:!0}),this.sendRequest(this._client.createRequest(e),e)},c.prototype.get=function(e,t,r){return this.send(s({},{method:"GET",url:e,query:t},r))},c.prototype.post=function(e,t,r,n){return this.send(s({},{method:"POST",url:e,query:r,body:t},n))},c.prototype.put=function(e,t,r,n){return this.send(s({},{method:"PUT",url:e,query:r,body:t},n))},c.prototype.delete=function(e,t,r){return this.send(s({},{method:"DELETE",url:e,query:t},r))},c.prototype.ensureLoggedIn=function(){return this._isAccessTokenValid()?this._externals.Promise.resolve():this.refresh()},c.prototype._tokenRequest=function(e,t){return this.send({url:e,skipAuthCheck:!0,body:t,method:"POST",headers:{Authorization:"Basic "+this._apiKey(),"Content-Type":u._urlencodedContentType}})},c.prototype._isAccessTokenValid=function(){return this._auth.accessTokenValid()},c.prototype._apiKey=function(){var e=this._appKey+":"+this._appSecret;return"function"==typeof btoa?btoa(e):new t(e).toString("base64")},c.prototype._authHeader=function(){var e=this._auth.accessToken();return this._auth.tokenType()+(e?" "+e:"")},e.exports=c}).call(this,r(71).Buffer)},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(72),i=r(73),s=r(74);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=a(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):p(e,t);if("Buffer"===t.type&&s(t.data))return p(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(h(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(n)return j(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var s,o=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var h=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var l=!0,p=0;p<u;p++)if(c(e,s+p)!==c(t,p)){l=!1;break}if(l)return s}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function T(e,t,r,n){return B(j(t,e.length-r),e,r,n)}function b(e,t,r,n){return B(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return b(e,t,r,n)}function _(e,t,r,n){return B(F(t),e,r,n)}function C(e,t,r,n){return B(function(e,t){for(var r,n,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function w(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,u,c=e[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&c)<<6|63&s)>127&&(h=u);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return l(null,e)},u.allocUnsafeSlow=function(e){return l(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(n,i),h=e.slice(t,r),l=0;l<a;++l)if(c[l]!==h[l]){s=c[l],o=h[l];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=q(e[s]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,s){return s||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,s){return s||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||N(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||N(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=u.isBuffer(e)?e:j(new u(e,n).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function F(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(7))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=c(e),n=r[0],o=r[1],a=new s(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),u=0,h=o>0?n-4:n,l=0;l<h;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;2===o&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,a[u++]=255&t);1===o&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t);return a},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(h(e,o,o+16383>a?a:o+16383));1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var i,s,o=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,p=r?-1:1,d=e[t+l];for(l+=p,s=d&(1<<-h)-1,d>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=p,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+e[t+l],l+=p,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=c}return(d?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,u,c=8*s-i-1,h=(1<<c)-1,l=h>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*u-1)*Math.pow(2,i),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&a,d+=f,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+d]=255&o,d+=f,o/=256,c-=8);e[r+d-f]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){function r(e){this._cache=e.cache,this._cacheId=e.cacheId,this._refreshHandicapMs=e.refreshHandicapMs||6e4}r.prototype.accessToken=function(){return this.data().access_token},r.prototype.refreshToken=function(){return this.data().refresh_token},r.prototype.tokenType=function(){return this.data().token_type},r.prototype.data=function(){return this._cache.getItem(this._cacheId)||{token_type:"",access_token:"",expires_in:0,refresh_token:"",refresh_token_expires_in:0}},r.prototype.setData=function(e){e=e||{};var t=this.data();return Object.keys(e).forEach(function(r){t[r]=e[r]}),t.expire_time=Date.now()+1e3*t.expires_in,t.refresh_token_expire_time=Date.now()+1e3*t.refresh_token_expires_in,this._cache.setItem(this._cacheId,t),this},r.prototype.accessTokenValid=function(){return this.data().expire_time-this._refreshHandicapMs>Date.now()},r.prototype.refreshTokenValid=function(){return this.data().refresh_token_expire_time>Date.now()},r.prototype.cancelAccessToken=function(){return this.setData({access_token:"",expires_in:0})},e.exports=r},function(e){e.exports={name:"ringcentral",version:"3.2.2",scripts:{clean:"rm -rf build/*",build:"npm run clean && webpack --display-modules --progress --colors --bail",watch:"npm run build -- --watch",test:"npm run hint && npm run build && npm run istanbul && npm run karma && npm run karma-webpack",mocha:"mocha --opts mocha.opts","mocha-watch":"npm run mocha -- --watch","mocha-api":"mocha ./test-api/**/*-spec.js",karma:"karma start karma.conf.js","karma-watch":"npm run karma -- --no-single-run --auto-watch","karma-webpack":"karma start karma.conf.webpack.js","karma-webpack-watch":"npm run karma-webpack -- --no-single-run --auto-watch",istanbul:"istanbul cover _mocha -- --opts mocha.opts",coveralls:"cat ./build/coverage/lcov.info | coveralls",tsd:"tsd reinstall -so",start:"http-server -p 3030",docs:"jsdoc2md 'src/**/*!(test).js' > API.md",hint:"jshint src/**/*.js"},dependencies:{"es6-promise":"^4.0.5","fetch-ponyfill":"^3.0.2","is-plain-object":"^2.0.1","object-assign":"^4.1.0",pubnub:"^4.4.2"},devDependencies:{chai:"3.5.0",coveralls:"2.13.1","fetch-mock":"5.9.4","http-server":"0.9.0",istanbul:"0.4.5","jsdoc-to-markdown":"2.0.1",jshint:"2.9.4","json-loader":"0.5.4",karma:"1.4.1","karma-chai-plugins":"0.8.0","karma-chrome-launcher":"2.0.0","karma-coverage":"1.1.1","karma-firefox-launcher":"1.0.0","karma-html-reporter":"0.2.6","karma-mocha":"1.3.0","karma-mocha-reporter":"2.2.2","karma-phantomjs-launcher":"1.0.2","karma-sourcemap-loader":"0.3.5","karma-webpack":"2.0.2",mocha:"3.2.0","phantomjs-prebuilt":"2.1.14",sinon:"1.17.7","sinon-chai":"2.8.0",soap:"0.18.0",webpack:"1.14.0","whatwg-fetch":"2.0.2"},jsdoc2md:{separators:!0,"module-index-format":"grouped","param-list-format":"table","property-list-format":"table"},jshintConfig:{curly:!1,expr:!0,indent:4,latedef:!0},preferGlobal:!1,private:!1,main:"./src/SDK.js",author:{name:"RingCentral, Inc.",email:"devsupport@ringcentral.com"},contributors:[{name:"Kirill Konshin"}],repository:{type:"git",url:"git://github.com/ringcentral/ringcentral-js.git"},bugs:{url:"https://github.com/ringcentral/ringcentral-js/issues"},homepage:"https://github.com/ringcentral/ringcentral-js",engines:{node:">=0.10.36"},license:"MIT"}},function(e,t,r){var n=r(36);function i(e){if(!(e=e||{}).cacheKey)throw new Error("Cached Subscription requires cacheKey parameter to be defined");this._cacheKey=e.cacheKey,n.call(this,e),this._cache=e.cache,this._subscription=void 0}i.prototype=Object.create(n.prototype),i.prototype.subscription=function(){return this._cache.getItem(this._cacheKey)||{}},i.prototype._setSubscription=function(e){return this._cache.setItem(this._cacheKey,e)},i.prototype.restore=function(e){return this.eventFilters().length||this.setEventFilters(e),this},e.exports=i}]]);
//# sourceMappingURL=demoVendor.js.map